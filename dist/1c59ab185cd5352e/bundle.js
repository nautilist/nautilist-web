!function(){var e,t,n,r=e={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,u=[],c=!1,l=-1;function d(){c&&s&&(c=!1,s.length?u=s.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(s=u,u=[];++l<t;)s&&s[l].run();l=-1,t=u.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||c||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var p={};(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}p.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return(i?"/":"")+(r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"))||"."},p.normalize=function(e){var i=p.isAbsolute(e),o="/"===r(e,-1);return(e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},p.isAbsolute=function(e){return"/"===e.charAt(0)},p.join=function(){var e=Array.prototype.slice.call(arguments,0);return p.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},p.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=p.resolve(e).substr(1),t=p.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var u=[];for(s=a;s<r.length;s++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},p.sep="/",p.delimiter=":",p.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},p.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},p.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e);var v={exports:{}};function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){var r="object"==(void 0===v.exports?"undefined":t(v.exports))&&v.exports&&!v.exports.nodeType&&v.exports,i="object"==t(v)&&v&&!v.nodeType&&v,o="object"==(void 0===e?"undefined":t(e))&&e;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,u=2147483647,c=36,l=1,d=26,f=38,h=700,m=72,p=128,b="-",y=/^xn--/,g=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=c-l,_=Math.floor,S=String.fromCharCode;function k(e){throw new RangeError(E[e])}function O(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function T(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+O((e=e.replace(w,".")).split("."),t).join(".")}function C(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function D(e){return O(e,function(e){var t="";return e>65535&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+S(e)}).join("")}function L(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function M(e,t,n){var r=0;for(e=n?_(e/h):e>>1,e+=_(e/t);e>A*d>>1;r+=c)e=_(e/A);return _(r+(A+1)*e/(e+f))}function x(e){var t,n,r,i,o,a,s,f,h,v,y,g=[],w=e.length,E=0,A=p,S=m;for((n=e.lastIndexOf(b))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&k("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<w;){for(o=E,a=1,s=c;i>=w&&k("invalid-input"),((f=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||f>_((u-E)/a))&&k("overflow"),E+=f*a,!(f<(h=s<=S?l:s>=S+d?d:s-S));s+=c)a>_(u/(v=c-h))&&k("overflow"),a*=v;S=M(E-o,t=g.length+1,0==o),_(E/t)>u-A&&k("overflow"),A+=_(E/t),E%=t,g.splice(E++,0,A)}return D(g)}function I(e){var t,n,r,i,o,a,s,f,h,v,y,g,w,E,A,O=[];for(g=(e=C(e)).length,t=p,n=0,o=m,a=0;a<g;++a)(y=e[a])<128&&O.push(S(y));for(r=i=O.length,i&&O.push(b);r<g;){for(s=u,a=0;a<g;++a)(y=e[a])>=t&&y<s&&(s=y);for(s-t>_((u-n)/(w=r+1))&&k("overflow"),n+=(s-t)*w,t=s,a=0;a<g;++a)if((y=e[a])<t&&++n>u&&k("overflow"),y==t){for(f=n,h=c;!(f<(v=h<=o?l:h>=o+d?d:h-o));h+=c)A=f-v,E=c-v,O.push(S(L(v+A%E,0))),f=_(A/E);O.push(S(L(f,0))),o=M(n,w,r==i),n=0,++r}++n,++t}return O.join("")}if(a={version:"1.4.1",ucs2:{decode:C,encode:D},decode:x,encode:I,toASCII:function(e){return T(e,function(e){return g.test(e)?"xn--"+I(e):e})},toUnicode:function(e){return T(e,function(e){return y.test(e)?x(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==t(define.amd)&&define.amd)define("punycode",function(){return a});else if(r&&i)if(v.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),v=v.exports;var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(e){switch(void 0===e?"undefined":g(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},E=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function A(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var _=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},S={};S.decode=S.parse=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c,l,d,f,h=e[u].replace(o,"%20"),m=h.indexOf(n);m>=0?(c=h.substr(0,m),l=h.substr(m+1)):(c=h,l=""),d=decodeURIComponent(c),f=decodeURIComponent(l),b(i,d)?y(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i},S.encode=S.stringify=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":g(e))?A(_(e),function(r){var i=encodeURIComponent(w(r))+n;return E(e[r])?A(e[r],function(e){return i+encodeURIComponent(w(e))}).join(t):i+encodeURIComponent(w(e[r]))}).join(t):r?encodeURIComponent(w(r))+n+encodeURIComponent(w(e)):""};var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":k(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},T={},C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function D(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}T.parse=H,T.resolve=function(e,t){return H(e,!1,!0).resolve(t)},T.resolveObject=function(e,t){return e?H(e,!1,!0).resolveObject(t):t},T.format=function(e){return O.isString(e)&&(e=H(e)),e instanceof D?e.format():D.prototype.format.call(e)},T.Url=D;var L=/^([a-z0-9.+-]+:)/i,M=/:[0-9]*$/,x=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,I=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),N=["'"].concat(I),F=["%","/","?",";","#"].concat(N),P=["/","?","#"],j=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,G={javascript:!0,"javascript:":!0},Y={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function H(e,t,n){if(e&&O.isObject(e)&&e instanceof D)return e;var r=new D;return r.parse(e,t,n),r}D.prototype.parse=function(e,t,n){if(!O.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":C(e)));var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(i);if(a=a.trim(),!n&&1===e.split("#").length){var s=x.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?S.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=L.exec(a);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||u&&Y[u]||(a=a.substr(2),this.slashes=!0)}if(!Y[u]&&(l||u&&!U[u])){for(var d,f,h=-1,m=0;m<P.length;m++)-1!==(p=a.indexOf(P[m]))&&(-1===h||p<h)&&(h=p);for(-1!==(f=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(d)),h=-1,m=0;m<F.length;m++){var p;-1!==(p=a.indexOf(F[m]))&&(-1===h||p<h)&&(h=p)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var b="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!b)for(var y=this.hostname.split(/\./),g=(m=0,y.length);m<g;m++){var w=y[m];if(w&&!w.match(j)){for(var E="",A=0,_=w.length;A<_;A++)w.charCodeAt(A)>127?E+="x":E+=w[A];if(!E.match(j)){var k=y.slice(0,m),T=y.slice(m+1),D=w.match(R);D&&(k.push(D[1]),T.unshift(D[2])),T.length&&(a="/"+T.join(".")+a),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=v.toASCII(this.hostname));var M=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+M,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!G[c])for(m=0,g=N.length;m<g;m++){var H=N[m];if(-1!==a.indexOf(H)){var W=encodeURIComponent(H);W===H&&(W=escape(H)),a=a.split(H).join(W)}}var V=a.indexOf("#");-1!==V&&(this.hash=a.substr(V),a=a.slice(0,V));var B=a.indexOf("?");if(-1!==B?(this.search=a.substr(B),this.query=a.substr(B+1),t&&(this.query=S.parse(this.query)),a=a.slice(0,B)):t&&(this.search="",this.query={}),a&&(this.pathname=a),U[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){M=this.pathname||"";var q=this.search||"";this.path=M+q}return this.href=this.format(),this},D.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&O.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||U[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},D.prototype.resolve=function(e){return this.resolveObject(H(e,!1,!0)).format()},D.prototype.resolveObject=function(e){if(O.isString(e)){var t=new D;t.parse(e,!1,!0),e=t}for(var n=new D,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=e[u])}return U[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!U[e.protocol]){for(var c=Object.keys(e),l=0;l<c.length;l++){var d=c[l];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||Y[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",m=n.search||"";n.path=h+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var p=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=v||p||n.host&&e.pathname,y=b,g=n.pathname&&n.pathname.split("/")||[],w=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!U[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===g[0]?g[0]=n.host:g.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),b=b&&(""===f[0]||""===g[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,g=f;else if(f.length)g||(g=[]),g.pop(),g=g.concat(f),n.search=e.search,n.query=e.query;else if(!O.isNullOrUndefined(e.search))return w&&(n.hostname=n.host=g.shift(),(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift())),n.search=e.search,n.query=e.query,O.isNull(n.pathname)&&O.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!g.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=g.slice(-1)[0],A=(n.host||e.host||g.length>1)&&("."===E||".."===E)||""===E,_=0,S=g.length;S>=0;S--)"."===(E=g[S])?g.splice(S,1):".."===E?(g.splice(S,1),_++):_&&(g.splice(S,1),_--);if(!b&&!y)for(;_--;_)g.unshift("..");!b||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),A&&"/"!==g.join("/").substr(-1)&&g.push("");var k,T=""===g[0]||g[0]&&"/"===g[0].charAt(0);return w&&(n.hostname=n.host=T?"":g.length?g.shift():"",(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift())),(b=b||n.host&&g.length)&&!T&&g.unshift(""),g.length?n.pathname=g.join("/"):(n.pathname=null,n.path=null),O.isNull(n.pathname)&&O.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},D.prototype.parseHost=function(){var e=this.host,t=M.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var W=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)V.call(n,r)&&(e[r]=n[r])}return e},V=Object.prototype.hasOwnProperty,B={};(function(e){"function"==typeof Symbol&&Symbol.iterator,B=n;var t=n.events={INSTALLED:"sw:installed",UPDATED:"sw:updated",REDUNDANT:"sw:redundant",POST_MESSAGE:"sw:postMessage",MESSAGE:"sw:message",SYNC:"sw:sync",NOTIFICATION_REQUEST:"sw:notificationRequest",ERROR:"log:error"};function n(n,r){return n=n||"/sw.js",r=r||{},function(i,o){o.on(i.events.DOMCONTENTLOADED,function(){if((r=W({scope:"/"},r)).electron&&(r.scope=p.join(e,r.scope),n=T.format({pathname:p.join(e,n.replace(/^\//,"")),protocol:"file:",slashes:!0}),delete r.electron),window.onmessage=function(e){o.emit(t.MESSAGE,{data:e.data,channel:"window",port:null})},window.MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(e){o.emit(t.MESSAGE,{data:e.data,channel:"messageChannel",port:"port1"})},a.port2.onmessage=function(e){o.emit(t.MESSAGE,{data:e.data,channel:"messageChannel",port:"port2"})}}o.on(t.NOTIFICATION_REQUEST,function(e){Notification.requestPermission(function(t){"function"==typeof t&&e(t)})}),navigator.serviceWorker&&navigator.onLine&&(navigator.serviceWorker.onmessage=function(e){o.emit(t.MESSAGE,{data:e.data,channel:"navigator.serviceWorker",port:null})},navigator.serviceWorker.register(n,r).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state?navigator.serviceWorker.controller?o.emit(t.UPDATED,e):o.emit(t.INSTALLED,e):"redundant"===n.state&&o.emit(t.REDUNDANT,e)}},e.sync&&function(e){e.sync.getTags().then(function(e){i.syncTags=e}).catch(function(e){o.emit(t.ERROR,e)})}(e)}).catch(function(e){o.emit(t.ERROR,e)}),navigator.serviceWorker.ready.then(function(e){new Promise(function(n){var r=e.active;"activated"!==r.state?(r.addEventListener("statechange",n,{once:!0}),o.on(t.POST_MESSAGE,function(e){r.postMessage(e)})):n()}).then(function(){e.navigationPreload&&e.navigationPreload.enable()}),o.on(t.SYNC,function(n){e.sync.register(n).then(function(){return e.sync.getTags()}).then(function(e){i.syncTags=e}).catch(function(e){o.emit(t.ERROR,e)})})}).catch(function(e){o.emit(t.ERROR,e)}))})}}}).call(this,"/node_modules/choo-service-worker");var q={};function K(e){if(!(this instanceof K))return new K(e);"number"==typeof e&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}q=K,Object.defineProperty(K.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),K.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},K.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},K.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},K.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},K.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},K.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge&&(this.remove(e),1))},K.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},K.prototype.evict=function(){this.tail&&this.remove(this.tail)};var $={};function z(e,t,n){this.cache="number"==typeof n?new q(n):n||new q(100),this.state=e,this.emit=t}function J(e){return new(e.bind.apply(e,arguments))}"function"==typeof Symbol&&Symbol.iterator,$=z,z.prototype.render=function(e,t){var n=this.cache.get(t);if(!n){for(var r=[],i=2,o=arguments.length;i<o;i++)r.push(arguments[i]);r.unshift(e,t,this.state,this.emit),n=J.apply(J,r),this.cache.set(t,n)}return n};var Z,X=function(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})};"function"==typeof Symbol&&Symbol.iterator;var Q="undefined"!=typeof window;function ee(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}ee.prototype.push=function(e){this.queue.push(e),this.schedule()},ee.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},ee.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},Z=function(){var e;return Q?(window._nanoScheduler||(window._nanoScheduler=new ee(!0)),e=window._nanoScheduler):e=new ee,e},"function"==typeof Symbol&&Symbol.iterator;var te,ne=Z();re.disabled=!0;try{te=window.performance,re.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!te.mark}catch(po){}function re(e){if(re.disabled)return ie;var t=(1e4*te.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function r(r){var i="end-"+t+"-"+e;te.mark(i),ne.push(function(){var o=null;try{var a=e+" ["+t+"]";te.measure(a,n,i),te.clearMarks(n),te.clearMarks(i)}catch(po){o=po}r&&r(o,e)})}return te.mark(n),r.uuid=t,r}function ie(e){e&&ne.push(function(){e(new Error("nanotiming: performance API unavailable"))})}var oe=re,ae=function(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}},se={};function ue(e){if(!(this instanceof ue))return new ue(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}"function"==typeof Symbol&&Symbol.iterator,se=ue,ue.prototype.emit=function(e){for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var i=oe(this._name+"('"+e.toString()+"')"),o=this._listeners[e];return o&&o.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,i.uuid),i(),this},ue.prototype.on=ue.prototype.addListener=function(e,t){return"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},ue.prototype.prependListener=function(e,t){return"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},ue.prototype.once=function(e,t){var n=this;return this.on(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},ue.prototype.prependOnceListener=function(e,t){var n=this;return this.prependListener(e,function r(){t.apply(n,arguments),n.removeListener(e,r)}),this},ue.prototype.removeListener=function(e,t){return"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(ae(e,n,1),!0):void 0}}},ue.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},ue.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,i=0;i<r;i++)n.push(t[i]);return n},ue.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var i=e.length,o=0;o<i;o++){var a=e[o];a.apply(a,n)}}},"function"==typeof Symbol&&Symbol.iterator;var ce=/(noopener|noreferrer) (noopener|noreferrer)/,le=/^[\w-_]+:/;function de(e,t){if(!e)throw new Error(t||"AssertionError")}de.notEqual=function(e,t,n){},de.notOk=function(e,t){},de.equal=function(e,t,n){},de.ok=de;var fe=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"],he=fe.length;function me(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}var pe=function(e,t){var n=e.nodeType,r=e.nodeName;1===n&&function(e,t){for(var n=t.attributes,r=e.attributes,i=null,o=null,a=null,s=null,u=r.length-1;u>=0;--u)a=(s=r[u]).name,i=s.namespaceURI,o=s.value,i?(a=s.localName||a,t.getAttributeNS(i,a)!==o&&t.setAttributeNS(i,a,o)):t.hasAttribute(a)?t.getAttribute(a)!==o&&("null"===o||"undefined"===o?t.removeAttribute(a):t.setAttribute(a,o)):t.setAttribute(a,o);for(var c=n.length-1;c>=0;--c)!1!==(s=n[c]).specified&&(a=s.name,(i=s.namespaceURI)?(a=s.localName||a,e.hasAttributeNS(i,a)||t.removeAttributeNS(i,a)):e.hasAttributeNS(null,a)||t.removeAttribute(a))}(e,t),3!==n&&8!==n||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===r?function(e,t){var n=e.value,r=t.value;me(e,t,"checked"),me(e,t,"disabled"),n!==r&&(t.setAttribute("value",n),t.value=n),"null"===n&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===r?function(e,t){me(e,t,"selected")}(e,t):"TEXTAREA"===r&&function(e,t){var n=e.value;if(n!==t.value&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t),function(e,t){for(var n=0;n<he;n++){var r=fe[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)};"function"==typeof Symbol&&Symbol.iterator;var ve=3;function be(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||ye(e)!==ye(t)?e:(pe(e,t),ge(e,t),t):null:e}function ye(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function ge(e,t){for(var n,r,i,o,a=0,s=0;n=t.childNodes[s],r=e.childNodes[s-a],n||r;s++)if(r)if(n)if(we(r,n))(i=be(r,n))!==n&&(t.replaceChild(i,n),a++);else{o=null;for(var u=s;u<t.childNodes.length;u++)if(we(t.childNodes[u],r)){o=t.childNodes[u];break}o?((i=be(r,o))!==o&&a++,t.insertBefore(i,n)):r.id||n.id?(t.insertBefore(r,n),a++):(i=be(r,n))!==n&&(t.replaceChild(i,n),a++)}else t.appendChild(r),a++;else t.removeChild(n),s--}function we(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&e.type===ve&&e.nodeValue===t.nodeValue}var Ee=function(e,t,n){return n&&n.childrenOnly?(ge(t,e),e):be(t,e)};"function"==typeof Symbol&&Symbol.iterator;var Ae=/([^?=&]+)(=([^&]*))?/g;"function"==typeof Symbol&&Symbol.iterator;var _e=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Se.call(n,r)&&(e[r]=n[r])}return e},Se=Object.prototype.hasOwnProperty,ke={};function Oe(){if(!(this instanceof Oe))return new Oe;this.trie={nodes:{}}}"function"==typeof Symbol&&Symbol.iterator,ke=Oe,Oe.prototype.create=function(e){var t=e.replace(/^\//,"").split("/");return function e(n,r){var i=t.hasOwnProperty(n)&&t[n];if(!1===i)return r;var o=null;return/^:|^\*/.test(i)?(r.nodes.hasOwnProperty("$$")?o=r.nodes.$$:(o={nodes:{}},r.nodes.$$=o),"*"===i[0]&&(r.wildcard=!0),r.name=i.replace(/^:|^\*/,"")):r.nodes.hasOwnProperty(i)?o=r.nodes[i]:(o={nodes:{}},r.nodes[i]=o),e(n+1,o)}(0,this.trie)},Oe.prototype.match=function(e){var t=e.replace(/^\//,"").split("/"),n={},r=function e(r,i){if(void 0!==i){var o=t[r];if(void 0===o)return i;if(i.nodes.hasOwnProperty(o))return e(r+1,i.nodes[o]);if(i.name){try{n[i.name]=decodeURIComponent(o)}catch(po){return e(r,void 0)}return e(r+1,i.nodes.$$)}if(i.wildcard){try{n.wildcard=decodeURIComponent(t.slice(r).join("/"))}catch(po){return e(r,void 0)}return i.nodes.$$}return e(r+1)}}(0,this.trie);if(r)return(r=_e(r)).params=n,r},Oe.prototype.mount=function(e,t){var n=e.replace(/^\//,"").split("/"),r=null,i=null;if(1===n.length)i=n[0],r=this.create(i);else{var o=n.join("/");i=n[0],r=this.create(o)}W(r.nodes,t.nodes),t.name&&(r.name=t.name),r.nodes[""]&&(Object.keys(r.nodes[""]).forEach(function(e){"nodes"!==e&&(r[e]=r.nodes[""][e])}),W(r.nodes,r.nodes[""].nodes),delete r.nodes[""].nodes)},"function"==typeof Symbol&&Symbol.iterator;var Te=function e(t){if(!(this instanceof e))return new e(t);var n=(t||"").replace(/^\//,""),r=ke();return i._trie=r,i.on=function(e,t){var n=t._wayfarer&&t._trie?t:function(){return t.apply(this,Array.prototype.slice.call(arguments))};(e=e||"/",n.route=e,n._wayfarer&&n._trie)?r.mount(e,n._trie.trie):r.create(e).cb=n;return i},i.emit=i,i.match=o,i._wayfarer=!0,i;function i(e){var t=o(e),n=new Array(arguments.length);n[0]=t.params;for(var r=1;r<n.length;r++)n[r]=arguments[r];return t.cb.apply(t.cb,n)}function o(e){var t=r.match(e);if(t&&t.cb)return new a(t);var i=r.match(n);if(i&&i.cb)return new a(i);throw new Error("route '"+e+"' did not match")}function a(e){this.cb=e.cb,this.route=e.cb.route,this.params=e.params}},Ce={},De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le=/file:\/\//.test("object"===("undefined"==typeof window?"undefined":De(window))&&window.location&&window.location.origin),Me=new RegExp("^(file://|/)(.*.html?/?)?"),xe=new RegExp("^(http(s)?(://))?(www.)?[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?"),Ie=new RegExp("#"),Ne=new RegExp("[?].*$");function Fe(e){if(!(this instanceof Fe))return new Fe(e);e=e||{},this.router=Te(e.default||"/404")}function Pe(e,t){return e=t?e.replace(Me,""):e.replace(xe,""),decodeURI(e.replace(Ne,"").replace(Ie,"/"))}Ce=Fe,Fe.prototype.on=function(e,t){e=e.replace(/^[#\/]/,""),this.router.on(e,t)},Fe.prototype.emit=function(e){return e=Pe(e,Le),this.router.emit(e)},Fe.prototype.match=function(e){return e=Pe(e,Le),this.router.match(e)};var je=function(e,t){if(e)try{var n=document.querySelector(e);n&&n.scrollIntoView(t)}catch(po){}},Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge=Ue,Ye={};function Ue(e){if(!(this instanceof Ue))return new Ue(e);e=e||{};var t=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hashEnabled=void 0===e.hash||e.hash,this._hasWindow="undefined"!=typeof window,this._cache=e.cache,this._loaded=!1,this._stores=[],this._tree=null;var n={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?_e(window.initialState,n):n,delete window.initialState):this.state=n,this.router=Ce({curry:!0}),this.emitter=se("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title),this.emitter.prependListener(this._events.DOMTITLECHANGE,function(e){t.state.title=e,t._hasWindow&&(document.title=e)})}Ue.prototype.route=function(e,t){this.router.on(e,t)},Ue.prototype.use=function(e){var t=this;this._stores.push(function(n){var r="choo.use";r=e.storeName?r+"("+e.storeName+")":r;var i=oe(r);e(n,t.emitter,t),i()})},Ue.prototype.start=function(){var e,t,n=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){n._matchRoute(),n._loaded&&(n.emitter.emit(n._events.RENDER),setTimeout(je.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){n.emitter.emit(n._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){window.history.pushState(Ye,null,e),n.emitter.emit(n._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){window.history.replaceState(Ye,null,e),n.emitter.emit(n._events.NAVIGATE)}),window.onpopstate=function(){n.emitter.emit(n._events.POPSTATE)},n._hrefEnabled&&(e=function(e){var t=e.href,r=e.hash;t!==window.location.href?n.emitter.emit(n._events.PUSHSTATE,t):!n._hashEnabled&&r&&je(r)},t=t||window.document,window.addEventListener("click",function(n){if(!(n.button&&0!==n.button||n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.defaultPrevented)){var r=function e(n){if(n&&n!==t)return"a"!==n.localName||void 0===n.href?e(n.parentNode):n}(n.target);r&&(window.location.protocol!==r.protocol||window.location.hostname!==r.hostname||window.location.port!==r.port||r.hasAttribute("data-nanohref-ignore")||r.hasAttribute("download")||"_blank"===r.getAttribute("target")&&ce.test(r.getAttribute("rel"))||le.test(r.getAttribute("href"))||(n.preventDefault(),e(r)))}}))),this._setCache(this.state),this._stores.forEach(function(e){e(n.state)}),this._matchRoute(),this._tree=this._prerender(this.state),this.emitter.prependListener(n._events.RENDER,function(e,t){t||(t=window.requestAnimationFrame);var n=!1,r=null;return function(){null!==r||n||(n=!0,t(function(){n=!1;for(var t=r.length,i=new Array(t),o=0;o<t;o++)i[o]=r[o];e.apply(e,i),r=null})),r=arguments}}(function(){var e=oe("choo.render"),t=n._prerender(n.state),r=oe("choo.morph");Ee(n._tree,t),r(),e()})),X(function(){n.emitter.emit(n._events.DOMCONTENTLOADED),n._loaded=!0}),this._tree},Ue.prototype.mount=function(e){if("object"!==("undefined"==typeof window?"undefined":Re(window)))return this.selector=e,this;var t=this;X(function(){var n=oe("choo.render"),r=t.start();t._tree="string"==typeof e?document.querySelector(e):e;var i=oe("choo.morph");Ee(t._tree,r),i(),n()})},Ue.prototype.toString=function(e,t){this.state=_e(this.state,t||{});var n=this;this._setCache(this.state),this._stores.forEach(function(e){e(n.state)}),this._matchRoute(e);var r=this._prerender(this.state);return"string"==typeof r.outerHTML?r.outerHTML:r.toString()},Ue.prototype._matchRoute=function(e){var t,n;e?(t=e.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(t=t.replace(/#.+$/,"")),n=e):(t=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(t+=window.location.hash.replace(/^#/,"/")),n=window.location.search);var r,i=this.router.match(t);return this._handler=i.cb,this.state.href=t,this.state.query=(r={},n.replace(/^.*\?/,"").replace(Ae,function(e,t,n,i){var o=decodeURIComponent(i),a=decodeURIComponent(t);r.hasOwnProperty(a)?Array.isArray(r[a])?r[a].push(o):r[a]=[r[a],o]:r[a]=o}),r),this.state.route=i.route,this.state.params=i.params,this.state},Ue.prototype._prerender=function(e){var t=oe("choo.prerender('"+e.route+"')"),n=this._handler(e,this.emit);return t(),n},Ue.prototype._setCache=function(e){var t=new $(e,this.emitter.emit.bind(this.emitter),this._cache);function n(e,n){for(var r=[],i=0,o=arguments.length;i<o;i++)r.push(arguments[i]);return t.render.apply(t,r)}e.cache=n,n.toJSON=function(){return null}};var He={populateHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.header)throw new Error("You need to pass 'options.header' to the populateHeader() hook.");return function(t){return"before"!==t.type?Promise.reject(new Error("The 'populateHeader' hook should only be used as a 'before' hook.")):(t.params.accessToken&&(t.params.headers=Object.assign({},(n={},r=e.header,i=e.prefix?e.prefix+" "+t.params.accessToken:t.params.accessToken,r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n),t.params.headers)),Promise.resolve(t));var n,r,i}},populateAccessToken:function(){return function(e){var t=e.app;return"before"!==e.type?Promise.reject(new Error("The 'populateAccessToken' hook should only be used as a 'before' hook.")):(Object.assign(e.params,{accessToken:t.get("accessToken")}),Promise.resolve(e))}},populateEntity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.service)throw new Error("You need to pass 'options.service' to the populateEntity() hook.");if(!e.field)throw new Error("You need to pass 'options.field' to the populateEntity() hook.");if(!e.entity)throw new Error("You need to pass 'options.entity' to the populateEntity() hook.");return function(t){var n=t.app;return"after"!==t.type?Promise.reject(new Error("The 'populateEntity' hook should only be used as an 'after' hook.")):n.passport.verifyJWT(t.result.accessToken).then(function(t){var r=t[e.field];return r?n.service(e.service).get(r):Promise.reject(new Error("Access token payload is missing the '"+e.field+"' field."))}).then(function(r){return t.result[e.entity]=r,n.set(e.entity,r),Promise.resolve(t)})}}},We={},Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();We.Storage=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.store={}}return Ve(e,[{key:"getItem",value:function(e){return this.store[e]}},{key:"setItem",value:function(e,t){return this.store[e]=t}},{key:"removeItem",value:function(e){return delete this.store[e],this}}]),e}(),We.payloadIsValid=function(e){return e&&(!e.exp||1e3*e.exp>(new Date).getTime())},We.getCookie=function(e){if("undefined"!=typeof document){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}return null},We.clearCookie=function(e){return"undefined"!=typeof document&&(document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),null};var Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe=1e3,Ke=6e4,$e=36e5,ze=24*$e;function Je(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}var Ze=function(e,t){t=t||{};var n,r,i=void 0===e?"undefined":Be(e);if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*ze;case"hours":case"hour":case"hrs":case"hr":case"h":return n*$e;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ke;case"seconds":case"second":case"secs":case"sec":case"s":return n*qe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&!1===isNaN(e))return t.long?(n=e,(r=Math.abs(n))>=ze?Je(n,r,ze,"day"):r>=$e?Je(n,r,$e,"hour"):r>=Ke?Je(n,r,Ke,"minute"):r>=qe?Je(n,r,qe,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=ze?Math.round(e/ze)+"d":t>=$e?Math.round(e/$e)+"h":t>=Ke?Math.round(e/Ke)+"m":t>=qe?Math.round(e/qe)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Xe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Qe={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Qe.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&(e=console).log.apply(e,arguments)},Qe.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Qe.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},Qe.save=function(e){try{e?Qe.storage.setItem("debug",e):Qe.storage.removeItem("debug")}catch(error){}},Qe.load=function(){var t=void 0;try{t=Qe.storage.getItem("debug")}catch(error){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},Qe.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Qe.storage=function(){try{return localStorage}catch(error){}}(),Qe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],(Qe=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var o=void 0;function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a.enabled){var i=a,s=Number(new Date),u=s-(o||s);i.diff=u,i.prev=o,i.curr=s,o=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;c++;var o=n.formatters[r];if("function"==typeof o){var a=t[c];e=o.call(i,a),t.splice(c,1),c--}return e}),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=t(e),a.destroy=r,a.extend=i,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){var e=[].concat(Xe(n.names.map(o)),Xe(n.skips.map(o).map(function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t=void 0,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,r=void 0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=Ze,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}(Qe)).formatters.j=function(e){try{return JSON.stringify(e)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this,e);var et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function tt(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}var nt=function(e,t){t=t||{};var n,r,i=void 0===e?"undefined":et(e);if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&!1===isNaN(e))return t.long?(n=e,(r=Math.abs(n))>=864e5?tt(n,r,864e5,"day"):r>=36e5?tt(n,r,36e5,"hour"):r>=6e4?tt(n,r,6e4,"minute"):r>=1e3?tt(n,r,1e3,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=864e5?Math.round(e/864e5)+"d":t>=36e5?Math.round(e/36e5)+"h":t>=6e4?Math.round(e/6e4)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function rt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var it={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};it.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&(e=console).log.apply(e,arguments)},it.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+it.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},it.save=function(e){try{e?it.storage.setItem("debug",e):it.storage.removeItem("debug")}catch(error){}},it.load=function(){var t=void 0;try{t=it.storage.getItem("debug")}catch(error){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},it.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},it.storage=function(){try{return localStorage}catch(error){}}(),it.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],(it=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var o=void 0;function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a.enabled){var i=a,s=Number(new Date),u=s-(o||s);i.diff=u,i.prev=o,i.curr=s,o=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;c++;var o=n.formatters[r];if("function"==typeof o){var a=t[c];e=o.call(i,a),t.splice(c,1),c--}return e}),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=t(e),a.destroy=r,a.extend=i,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){var e=[].concat(rt(n.names.map(o)),rt(n.skips.map(o).map(function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t=void 0,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,r=void 0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=nt,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}(it)).formatters.j=function(e){try{return JSON.stringify(e)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this,e);var ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at=it("@feathersjs/errors");function st(e,t,n,r,i){var o=void 0,a=void 0,s=void 0;(e=e||"Error")instanceof Error?(a=e.message||"Error",e.errors&&(o=e.errors)):"object"===(void 0===e?"undefined":ot(e))?(a=e.message||"Error",i=e):a=e,i&&((s=JSON.parse(JSON.stringify(i))).errors?(o=s.errors,delete s.errors):i.errors&&(o=JSON.parse(JSON.stringify(i.errors)))),this.type="FeathersError",this.name=t,this.message=a,this.code=n,this.className=r,this.data=s,this.errors=o||{},at(this.name+"("+this.code+"): "+this.message),at(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,st):this.stack=(new Error).stack}function ut(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function ct(e,t){st.call(this,e,"BadRequest",400,"bad-request",t)}function lt(e,t){st.call(this,e,"NotAuthenticated",401,"not-authenticated",t)}function dt(e,t){st.call(this,e,"PaymentError",402,"payment-error",t)}function ft(e,t){st.call(this,e,"Forbidden",403,"forbidden",t)}function ht(e,t){st.call(this,e,"NotFound",404,"not-found",t)}function mt(e,t){st.call(this,e,"MethodNotAllowed",405,"method-not-allowed",t)}function pt(e,t){st.call(this,e,"NotAcceptable",406,"not-acceptable",t)}function vt(e,t){st.call(this,e,"Timeout",408,"timeout",t)}function bt(e,t){st.call(this,e,"Conflict",409,"conflict",t)}function yt(e,t){st.call(this,e,"LengthRequired",411,"length-required",t)}function gt(e,t){st.call(this,e,"Unprocessable",422,"unprocessable",t)}function wt(e,t){st.call(this,e,"TooManyRequests",429,"too-many-requests",t)}function Et(e,t){st.call(this,e,"GeneralError",500,"general-error",t)}function At(e,t){st.call(this,e,"NotImplemented",501,"not-implemented",t)}function _t(e,t){st.call(this,e,"BadGateway",502,"bad-gateway",t)}function St(e,t){st.call(this,e,"Unavailable",503,"unavailable",t)}ut(st,Error),Object.defineProperty(st.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),ut(ct,st),ut(lt,st),ut(dt,st),ut(ft,st),ut(ht,st),ut(mt,st),ut(pt,st),ut(vt,st),ut(bt,st),ut(yt,st),ut(gt,st),ut(wt,st),ut(Et,st),ut(At,st),ut(_t,st),ut(St,st);var kt={FeathersError:st,BadRequest:ct,NotAuthenticated:lt,PaymentError:dt,Forbidden:ft,NotFound:ht,MethodNotAllowed:mt,NotAcceptable:pt,Timeout:vt,Conflict:bt,LengthRequired:yt,Unprocessable:gt,TooManyRequests:wt,GeneralError:Et,NotImplemented:At,BadGateway:_t,Unavailable:St,400:ct,401:lt,402:dt,403:ft,404:ht,405:mt,406:pt,408:vt,409:bt,411:yt,422:gt,429:wt,500:Et,501:At,502:_t,503:St},Ot=Object.assign({convert:function(e){if(!e)return e;var t=kt[e.name],n=t?new t(e.message,e.data):new Error(e.message||e);return"object"===(void 0===e?"undefined":ot(e))&&Object.assign(n,e),n}},kt),Tt={};function Ct(e){this.message=e}Ct.prototype=new Error,Ct.prototype.name="InvalidCharacterError",Tt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new Ct("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};var Dt;function Lt(e){this.message=e}Lt.prototype=new Error,Lt.prototype.name="InvalidTokenError",(Dt=function(e,t){if("string"!=typeof e)throw new Lt("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Tt(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(n){return Tt(t)}}(e.split(".")[n]))}catch(po){throw new Lt("Invalid token specified: "+po.message)}}).InvalidTokenError=Lt;var Mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),xt=We.Storage,It=We.payloadIsValid,Nt=We.getCookie,Ft=We.clearCookie,Pt=Qe("@feathersjs/authentication-client"),jt=function(){function e(t,n){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),t.passport)throw new Error("You have already registered authentication on this client app instance. You only need to do it once.");Object.assign(this,{options:n,app:t,payloadIsValid:It,getCookie:Nt,clearCookie:Ft,storage:t.get("storage")||this.getStorage(n.storage)}),this.setJWT=this.setJWT.bind(this),t.set("storage",this.storage),this.getJWT().then(this.setJWT),this.setupSocketListeners()}return Mt(e,[{key:"setupSocketListeners",value:function(){var e=this,t=this.app,n=t.io||t.primus,r=t.io?"emit":"send",i=t.io?"reconnect":"reconnected";if(n){n.on(i,function(){if(Pt("Socket reconnected"),n.authenticated){var i={strategy:e.options.jwtStrategy,accessToken:t.get("accessToken")};e.authenticateSocket(i,n,r).then(e.setJWT).catch(function(e){Pt("Error re-authenticating after socket reconnect",e),n.authenticated=!1,t.emit("reauthentication-error",e)})}});var o=function(){n.io.engine.on("upgrade",function(){if(Pt("Socket upgrading"),n.authenticated){var i={strategy:e.options.jwtStrategy,accessToken:t.get("accessToken")};e.authenticateSocket(i,n,r).then(e.setJWT).catch(function(e){Pt("Error re-authenticating after socket upgrade",e),n.authenticated=!1,t.emit("reauthentication-error",e)})}})};n.io&&n.io.engine?o():n.on("connect",o)}}},{key:"connected",value:function(){var e=this,t=this.app;if(t.rest)return Promise.resolve();var n=t.io||t.primus;return n?t.io&&n.connected||t.primus&&3===n.readyState?(Pt("Socket already connected"),Promise.resolve(n)):new Promise(function(r,i){var o=t.primus?"open":"connect",a=t.io?"disconnect":"end",s=setTimeout(function(){Pt("Socket connection timed out"),i(new Error("Socket connection timed out"))},e.options.timeout);Pt("Waiting for socket connection");var u=function(){Pt("Socket disconnected before it could connect"),n.authenticated=!1};n.once(a,u),n.once(o,function(){Pt("Socket connected"),Pt("Removing "+a+" listener"),n.removeListener(a,u),clearTimeout(s),r(n)})}):Promise.reject(new Error("It looks like your client connection has not been configured."))}},{key:"authenticate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.app,r=Promise.resolve(t);return t.strategy||(t.accessToken?t.strategy=this.options.jwtStrategy:r=this.getJWT().then(function(t){return t?{strategy:e.options.jwtStrategy,accessToken:t}:Promise.reject(new Ot.NotAuthenticated("Could not find stored JWT and no authentication strategy was given"))})),r.then(function(t){return e.connected(n).then(function(r){if(n.rest)return n.service(e.options.path).create(t).then(e.setJWT);var i=n.io?"emit":"send";return e.authenticateSocket(t,r,i).then(e.setJWT)})}).then(function(e){return n.emit("authenticated",e),e})}},{key:"authenticateSocket",value:function(e,t,n){var r=this;return new Promise(function(i,o){var a=setTimeout(function(){Pt("authenticateSocket timed out"),o(new Error("Authentication timed out"))},r.options.timeout);Pt("Attempting to authenticate socket"),t[n]("authenticate",e,function(e,n){if(e)return o(e);clearTimeout(a),t.authenticated=!0,Pt("Socket authenticated!"),i(n)})})}},{key:"logoutSocket",value:function(e,t){var n=this;return new Promise(function(r,i){var o=setTimeout(function(){Pt("logoutSocket timed out"),i(new Error("Logout timed out"))},n.options.timeout);e[t]("logout",function(t){if(clearTimeout(o),e.authenticated=!1,t)return i(t);r()})})}},{key:"logout",value:function(){var e=this,t=this.app;return t.set("accessToken",null),this.clearCookie(this.options.cookie),Promise.resolve(t.get("storage").removeItem(this.options.storageKey)).then(function(){if(t.io||t.primus){var n=t.io?"emit":"send",r=t.io?t.io:t.primus;return e.logoutSocket(r,n)}}).then(function(e){return t.emit("logout",e),e})}},{key:"setJWT",value:function(e){var t=e&&e.accessToken?e.accessToken:e;return t&&(this.app.set("accessToken",t),this.app.get("storage").setItem(this.options.storageKey,t)),Promise.resolve(e)}},{key:"getJWT",value:function(){var e=this,t=this.app;return new Promise(function(n,r){var i=t.get("accessToken");return i?n(i):Promise.resolve(e.storage.getItem(e.options.storageKey)).then(function(t){var r=t||e.getCookie(e.options.cookie);return r&&"null"!==r&&!e.payloadIsValid(Dt(r))&&(r=void 0),n(r)}).catch(r)})}},{key:"verifyJWT",value:function(e){if("string"!=typeof e)return Promise.reject(new Error("Token provided to verifyJWT is missing or not a string"));try{var t=Dt(e);return this.payloadIsValid(t)?Promise.resolve(t):Promise.reject(new Error("Invalid token: expired"))}catch(error){return Promise.reject(new Error("Cannot decode malformed token."))}}},{key:"getStorage",value:function(e){return e||new xt}}]),e}(),Rt={},Gt={header:"Authorization",cookie:"feathers-jwt",storageKey:"feathers-jwt",jwtStrategy:"jwt",path:"/authentication",entity:"user",service:"users",timeout:5e3};function Yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},Gt,e);return function(){var e=this;e.passport=new jt(e,t),e.authenticate=e.passport.authenticate.bind(e.passport),e.logout=e.passport.logout.bind(e.passport),e.mixins.push(function(n){if(e.version<"3.0.0")throw new Error("This version of @feathersjs/authentication-client only works with @feathersjs/feathers v3.0.0 or later.");n.hooks({before:He.populateAccessToken(t)})}),e.rest&&e.mixins.push(function(e){e.hooks({before:He.populateHeader(t)})})}}(Rt=Yt).default=Yt,Rt.defaults=Gt;var Ut={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ut.stripSlashes=function(e){return e.replace(/^(\/+)|(\/+)$/g,"")};var i=Ut._={each:function(e,t){e&&"function"==typeof e.forEach?e.forEach(t):i.isObject(e)&&Object.keys(e).forEach(function(n){return t(e[n],n)})},some:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).some(function(e){var r=n(e,2),i=r[0],o=r[1];return t(i,o)})},every:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).every(function(e){var r=n(e,2),i=r[0],o=r[1];return t(i,o)})},keys:function(e){return Object.keys(e)},values:function(e){return i.keys(e).map(function(t){return e[t]})},isMatch:function(e,t){return i.keys(t).every(function(n){return e[n]===t[n]})},isEmpty:function(e){return 0===i.keys(e).length},isObject:function(e){return"object"===(void 0===e?"undefined":t(e))&&!Array.isArray(e)&&null!==e},isObjectOrArray:function(e){return"object"===(void 0===e?"undefined":t(e))&&null!==e},extend:function(){return Object.assign.apply(Object,arguments)},omit:function(e){for(var t=i.extend({},e),n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach(function(e){return delete t[e]}),t},pick:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})},merge:function(e,t){return i.isObject(e)&&i.isObject(t)&&Object.keys(t).forEach(function(n){i.isObject(t[n])?(e[n]||Object.assign(e,r({},n,{})),i.merge(e[n],t[n])):Object.assign(e,r({},n,t[n]))}),e}};Ut.isPromise=function(e){return i.isObject(e)&&"function"==typeof e.then},Ut.makeUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="function"==typeof n.get?n.get.bind(n):function(){},i=r("env")||"production",o=r("host")||e.env.HOST_NAME||"localhost",a="development"===i||"test"===i||void 0===i?"http":"https",s=r("port")||e.env.PORT||3030;return t=t||"",a+"://"+o+("development"===i||"test"===i||void 0===i?":"+s:"")+"/"+Ut.stripSlashes(t)},Ut.createSymbol=function(e){return"undefined"!=typeof Symbol?Symbol(e):e}}).call(this,e);var Ht={},Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt=Ut._,Bt=Vt.each,qt=Vt.pick,Kt=Ut.createSymbol,$t=Kt("__feathersSkipHooks");Ht.SKIP=$t,Ht.ACTIVATE_HOOKS=Kt("__feathersActivateHooks"),Ht.createHookObject=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return Object.defineProperty(n,"toJSON",{value:function(){return qt(this,"type","method","path","params","id","data","result","error")}}),Object.assign(n,t,{method:e,get path(){var e=t.app,n=t.service;return n&&e&&e.services?Object.keys(e.services).find(function(t){return e.services[t]===n}):null}})},Ht.defaultMakeArguments=function(e){var t=[];return void 0!==e.id&&t.push(e.id),e.data&&t.push(e.data),t.push(e.params||{}),t},Ht.makeArguments=function(e){switch(e.method){case"find":return[e.params];case"get":case"remove":return[e.id,e.params];case"update":case"patch":return[e.id,e.data,e.params];case"create":return[e.data,e.params]}return Ht.defaultMakeArguments(e)},Ht.convertHookData=function(e){var t={};return Array.isArray(e)?t={all:e}:"object"!==(void 0===e?"undefined":Wt(e))?t={all:[e]}:Bt(e,function(e,n){t[n]=Array.isArray(e)?e:[e]}),t},Ht.isHookObject=function(e){return"object"===(void 0===e?"undefined":Wt(e))&&"string"==typeof e.method&&"string"==typeof e.type},Ht.getHooks=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e.__hooks[n][r]||[],a=t.__hooks[n][r]||[];return i?a.concat(o):o.concat(a)},Ht.processHooks=function(e,t){var n=this,r=t,i=function(e){if(e){if(e===$t)return $t;if(!Ht.isHookObject(e))throw new Error(r.type+" hook for '"+r.method+"' method returned invalid hook object");r=e}return r};return e.reduce(function(e,t){var r=t.bind(n);return(e=2===r.length?e.then(function(e){return e===$t?$t:new Promise(function(t,n){r(e,function(e,r){return e?n(e):t(r)})})}):e.then(function(e){return e===$t?$t:r(e)})).then(i)},Promise.resolve(r)).then(function(){return r}).catch(function(e){throw e.hook=r,e})},Ht.enableHooks=function(e,t,n){if("function"==typeof e.hooks)return e;var r={};return n.forEach(function(e){r[e]={}}),Object.defineProperty(e,"__hooks",{value:r}),Object.assign(e,{hooks:function(e){var n=this;return Bt(e,function(e,r){if(!n.__hooks[r])throw new Error("'"+r+"' is not a valid hook type");var i=Ht.convertHookData(e);Bt(i,function(e,n){if("all"!==n&&-1===t.indexOf(n))throw new Error("'"+n+"' is not a valid hook method")}),t.forEach(function(e){var t=n.__hooks[r][e]||(n.__hooks[r][e]=[]);i.all&&t.push.apply(t,i.all),i[e]&&t.push.apply(t,i[e])})}),this}})};var zt,Jt=Object.assign({},Ut,{hooks:Ht}),Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt=Object.create||function(e){var t=function(){};return t.prototype=e,new t},Qt=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},en=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function tn(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=Xt(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}zt=tn,tn.EventEmitter=tn,tn.prototype._events=void 0,tn.prototype._maxListeners=void 0;var nn,rn=10;try{var on={};Object.defineProperty&&Object.defineProperty(on,"x",{value:0}),nn=0===on.x}catch(vo){nn=!1}function an(e){return void 0===e._maxListeners?tn.defaultMaxListeners:e._maxListeners}function sn(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=Xt(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=an(e))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"===("undefined"==typeof console?"undefined":Zt(console))&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=n,++e._eventsCount;return e}function un(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function cn(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=en.call(un,r);return i.listener=n,r.wrapFn=i,i}function ln(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):fn(i,i.length):[]}function dn(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function fn(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}nn?Object.defineProperty(tn,"defaultMaxListeners",{enumerable:!0,get:function(){return rn},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');rn=e}}):tn.defaultMaxListeners=rn,tn.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},tn.prototype.getMaxListeners=function(){return an(this)},tn.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(n=a[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=fn(e,r),o=0;o<r;++o)i[o].call(n)}(n,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=fn(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=fn(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=fn(e,a),u=0;u<a;++u)s[u].call(n,r,i,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=fn(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,c,this,i)}return!0},tn.prototype.addListener=function(e,t){return sn(this,e,t,!1)},tn.prototype.on=tn.prototype.addListener,tn.prototype.prependListener=function(e,t){return sn(this,e,t,!0)},tn.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,cn(this,e,t)),this},tn.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,cn(this,e,t)),this},tn.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Xt(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=i,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},tn.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=Xt(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=Xt(null):delete n[e]),this;if(0===arguments.length){var i,o=Qt(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Xt(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},tn.prototype.listeners=function(e){return ln(this,e,!0)},tn.prototype.rawListeners=function(e){return ln(this,e,!1)},tn.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):dn.call(e,t)},tn.prototype.listenerCount=dn,tn.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var hn,mn={},pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};hn=function(){var e="function"==typeof Object.getOwnPropertySymbols;return{create:function(){var e=Object.create(this),t="string"==typeof e.__init?e.__init:"init";return"function"==typeof e[t]&&e[t].apply(e,arguments),e},mixin:function(t,n){var r=n||this,i=/\b_super\b/,o=Object.getPrototypeOf(r)||r.prototype,a={},s=t,u=function(e){var t=Object.getOwnPropertyDescriptor(s,e);!a[e]&&t&&(a[e]=t)};do{Object.getOwnPropertyNames(s).forEach(u),e&&Object.getOwnPropertySymbols(s).forEach(u)}while((s=Object.getPrototypeOf(s))&&Object.getPrototypeOf(s));var c=function(t){var n=a[t];"function"==typeof n.value&&i.test(n.value)&&(n.value=function(t,n,r,i){var o="function"==typeof n,a=function(){var e=this._super;this._super=o?n:t[r];var a=i.apply(this,arguments);return this._super=e,a};return o&&e&&Object.getOwnPropertySymbols(n).forEach(function(e){a[e]=n[e]}),a}(o,r[t],t,n.value)),Object.defineProperty(r,t,n)};return Object.keys(a).forEach(c),e&&Object.getOwnPropertySymbols(a).forEach(c),r},extend:function(e,t){return this.mixin(e,Object.create(t||this))},proxy:function(e){var t=this[e],n=Array.prototype.slice.call(arguments,1);return n.unshift(this),t.bind.apply(t,n)}}},"function"==typeof define&&define.amd?define([],hn):"object"===(void 0===mn?"undefined":pn(mn))?mn=hn():this.Proto=hn();var vn={},bn=zt.EventEmitter,yn=vn.eventHook=function(){return function(e){var t=e.app,n=e.service,r=t.eventMappings[e.method],i=n._hookEvents&&-1!==n._hookEvents.indexOf(r);r&&i&&"error"!==e.type&&(Array.isArray(e.result)?e.result:[e.result]).forEach(function(t){return n.emit(r,t,e)})}},gn=vn.eventMixin=function(e){if(!e._serviceEvents){var t=this,n="function"==typeof e.on&&"function"==typeof e.emit;"function"!=typeof e.mixin||n||e.mixin(bn.prototype),Object.defineProperties(e,{_serviceEvents:{value:Array.isArray(e.events)?e.events.slice():[]},_hookEvents:{value:[]}}),Object.keys(t.eventMappings).forEach(function(n){var r=t.eventMappings[n],i=-1!==e._serviceEvents.indexOf(r);"function"!=typeof e[n]||i||(e._serviceEvents.push(r),e._hookEvents.push(r))})}};vn=function(){return function(e){Object.assign(e,{eventMappings:{create:"created",update:"updated",remove:"removed",patch:"patched"}}),e.hooks({finally:yn()}),mn.mixin(bn.prototype,e),e.mixins.push(gn)}};var wn=Jt._,En=[function(e){var t=e.service,n=e.method,r=t.methods[n],i=e.arguments.reduce(function(e,t,n){return e[r[n]]=t,e},{});return i.params||(i.params={}),Object.assign(e,i),e},function(e){var t=e.service,n=e.method,r=t.methods[n];if(r.includes("id")&&void 0===e.id)throw new Error("An id must be provided to the '"+n+"' method");if(r.includes("data")&&!wn.isObjectOrArray(e.data))throw new Error("A data object must be provided to the '"+n+"' method");return e}],An={};function _n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Sn=Jt.hooks,kn=Jt.isPromise,On=Jt._,Tn=Sn.createHookObject,Cn=Sn.getHooks,Dn=Sn.processHooks,Ln=Sn.enableHooks,Mn=Sn.ACTIVATE_HOOKS,xn=function(e){var t=e.app,n=e.service,r=e.method,i=e.original;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.hookTypes.reduce(function(t,n){var r=e[n]||[];return t[n]=Array.isArray(r)?r:[r],t},{});return function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];var u=!0===a[a.length-1]&&a.pop(),c=i||n[r].bind(n),l=Tn(r,{type:"before",arguments:a,service:n,app:t});return Dn.call(n,En.concat(o.before),l).then(function(e){if(void 0!==e.result)return e;var t=c.apply(void 0,_n(function(e,t,n){return e.methods[t].reduce(function(e,t){return[].concat(_n(e),[n[t]])},[])}(n,r,e)));if(!kn(t))throw new Error("Service method '"+e.method+"' for '"+e.path+"' service must return a promise");return t.then(function(t){return e.result=t,e})}).then(function(e){return Object.assign({},e,{type:"after"})}).then(function(e){var t=o.after.concat(o.finally);return Dn.call(n,t,e)}).then(function(e){return u?e:e.result}).catch(function(e){var t=o.error.concat(o.finally),r=On.omit(Object.assign({},e.hook,l,{type:"error",original:e.hook,error:e}),"result");return Dn.call(n,t,r).catch(function(e){return r.error=e,r}).then(function(e){return u?void 0!==e.result?e:Promise.reject(e):void 0!==e.result?e.result:Promise.reject(e.error)})})}}},In=An.hookMixin=function(e){if("function"!=typeof e.hooks){e.methods=Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]&&e[t][Mn]}).reduce(function(t,n){return t[n]=e[n][Mn],t},e.methods||{}),Object.assign(e.methods,{find:["params"],get:["id","params"],create:["data","params"],update:["id","data","params"],patch:["id","data","params"],remove:["id","params"]});var t=this,n=Object.keys(e.methods),r=n.reduce(function(n,r){return"function"!=typeof e[r]?n:(n[r]=function(){var e=Array.from(arguments),n=this._super.bind(this);return xn({app:t,service:this,method:r,original:n})({before:Cn(t,this,"before",r),after:Cn(t,this,"after",r,!0),error:Cn(t,this,"error",r,!0),finally:Cn(t,this,"finally",r,!0)}).apply(void 0,_n(e))},n)},{});Ln(e,n,t.hookTypes),e.mixin(r)}};(An=function(){return function(e){Object.assign(e,{hookTypes:["before","after","error","finally"]}),Ln(e,e.methods,e.hookTypes),e.mixins.push(In)}}).withHooks=xn,An.ACTIVATE_HOOKS=Mn,An.activateHooks=function(e){return function(t){return Object.defineProperty(t,Mn,{value:e}),t}};var Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Fn(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}var Pn=function(e,t){t=t||{};var n,r,i=void 0===e?"undefined":Nn(e);if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&!1===isNaN(e))return t.long?(n=e,(r=Math.abs(n))>=864e5?Fn(n,r,864e5,"day"):r>=36e5?Fn(n,r,36e5,"hour"):r>=6e4?Fn(n,r,6e4,"minute"):r>=1e3?Fn(n,r,1e3,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=864e5?Math.round(e/864e5)+"d":t>=36e5?Math.round(e/36e5)+"h":t>=6e4?Math.round(e/6e4)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function jn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Rn={};(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Rn.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":t(console))&&console.log&&(e=console).log.apply(e,arguments)},Rn.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Rn.humanize(this.diff),this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)}},Rn.save=function(e){try{e?Rn.storage.setItem("debug",e):Rn.storage.removeItem("debug")}catch(error){}},Rn.load=function(){var t=void 0;try{t=Rn.storage.getItem("debug")}catch(error){}return!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG),t},Rn.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Rn.storage=function(){try{return localStorage}catch(error){}}(),Rn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],(Rn=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var o=void 0;function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(a.enabled){var i=a,s=Number(new Date),u=s-(o||s);i.diff=u,i.prev=o,i.curr=s,o=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;c++;var o=n.formatters[r];if("function"==typeof o){var a=t[c];e=o.call(i,a),t.splice(c,1),c--}return e}),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=t(e),a.destroy=r,a.extend=i,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){var e=[].concat(jn(n.names.map(o)),jn(n.skips.map(o).map(function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){n.save(e),n.names=[],n.skips=[];var t=void 0,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,r=void 0;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=Pn,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}(Rn)).formatters.j=function(e){try{return JSON.stringify(e)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}}).call(this,e);var Gn=Rn("feathers:application"),Yn=Jt.stripSlashes,Un=mn.extend({create:null}),Hn={init:function(){Object.assign(this,{version:"3.3.1",methods:["find","get","create","update","patch","remove"],mixins:[],services:{},providers:[],_setup:!1,settings:{}}),this.configure(An()),this.configure(vn())},get:function(e){return this.settings[e]},set:function(e,t){return this.settings[e]=t,this},disable:function(e){return this.settings[e]=!1,this},disabled:function(e){return!this.settings[e]},enable:function(e){return this.settings[e]=!0,this},enabled:function(e){return!!this.settings[e]},configure:function(e){return e.call(this,this),this},service:function(e,t){if(void 0!==t)throw new Error("Registering a new service with `app.service(path, service)` is no longer supported. Use `app.use(path, service)` instead.");var n=Yn(e)||"/",r=this.services[n];return void 0===r&&"function"==typeof this.defaultService?this.use("/"+n,this.defaultService(n)).service(n):r},use:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw new Error("'"+e+"' is not a valid service path.");var i=Yn(e)||"/",o="function"==typeof t.service&&t.services,a=this.methods.concat("setup").some(function(e){return t&&"function"==typeof t[e]});if(o){var s=t;return Object.keys(s.services).forEach(function(e){return n.use(i+"/"+e,s.service(e))}),this}if(!a)throw new Error("Invalid service object passed for path `"+i+"`");var u=Un.isPrototypeOf(t)?t:Un.extend(t);return Gn("Registering new service at `"+i+"`"),this.mixins.forEach(function(e){return e.call(n,u,i,r)}),"function"==typeof u._setup&&u._setup(this,i),this.providers.forEach(function(e){return e.call(n,u,i,r)}),this._isSetup&&"function"==typeof u.setup&&(Gn("Setting up service for `"+i+"`"),u.setup(this,i)),this.services[i]=u,this},setup:function(){var e=this;return Object.keys(this.services).forEach(function(t){var n=e.services[t];Gn("Setting up service for `"+t+"`"),"function"==typeof n.setup&&n.setup(e,t)}),this._isSetup=!0,this}},Wn={},Vn=Jt.hooks,Bn=An.ACTIVATE_HOOKS,qn=An.activateHooks,Kn=Object.create(null);function $n(){var e=Object.create(Kn);return mn.mixin(Hn,e),e.init(),e}$n.version="3.3.1",$n.SKIP=Vn.SKIP,$n.ACTIVATE_HOOKS=Bn,$n.activateHooks=qn,(Wn=$n).default=$n;var zn=String.prototype.replace,Jn=/%20/g,Zn={default:"RFC3986",formatters:{RFC1738:function(e){return zn.call(e,Jn,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn=Object.prototype.hasOwnProperty,er=Array.isArray,tr=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),nr=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},rr={arrayToObject:nr,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var u=a[s],c=o[u];"object"===(void 0===c?"undefined":Xn(c))&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:o,prop:u}),n.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(er(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(po){return r}},encode:function(e,t,n){if(0===e.length)return e;var r="string"==typeof e?e:String(e);if("iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",o=0;o<r.length;++o){var a=r.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?i+=r.charAt(o):a<128?i+=tr[a]:a<2048?i+=tr[192|a>>6]+tr[128|63&a]:a<55296||a>=57344?i+=tr[224|a>>12]+tr[128|a>>6&63]+tr[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&r.charCodeAt(o)),i+=tr[240|a>>18]+tr[128|a>>12&63]+tr[128|a>>6&63]+tr[128|63&a])}return i},isBuffer:function(e){return!(!e||"object"!==(void 0===e?"undefined":Xn(e))||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==(void 0===n?"undefined":Xn(n))){if(er(t))t.push(n);else{if(!t||"object"!==(void 0===t?"undefined":Xn(t)))return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!Qn.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==(void 0===t?"undefined":Xn(t)))return[t].concat(n);var i=t;return er(t)&&!er(n)&&(i=nr(t,r)),er(t)&&er(n)?(n.forEach(function(n,i){if(Qn.call(t,i)){var o=t[i];o&&"object"===(void 0===o?"undefined":Xn(o))&&n&&"object"===(void 0===n?"undefined":Xn(n))?t[i]=e(o,n,r):t.push(n)}else t[i]=n}),t):Object.keys(n).reduce(function(t,i){var o=n[i];return Qn.call(t,i)?t[i]=e(t[i],o,r):t[i]=o,t},i)}},ir=(Object.prototype.hasOwnProperty,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),or=Object.prototype.hasOwnProperty,ar={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},sr=Array.isArray,ur=Array.prototype.push,cr=function(e,t){ur.apply(e,sr(t)?t:[t])},lr=Date.prototype.toISOString,dr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:rr.encode,encodeValuesOnly:!1,formatter:Zn.formatters[Zn.default],indices:!1,serializeDate:function(e){return lr.call(e)},skipNulls:!1,strictNullHandling:!1},fr=function e(t,n,r,i,o,a,s,u,c,l,d,f,h){var m=t;if("function"==typeof s?m=s(n,m):m instanceof Date?m=l(m):"comma"===r&&sr(m)&&(m=m.join(",")),null===m){if(i)return a&&!f?a(n,dr.encoder,h):n;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||rr.isBuffer(m))return a?[d(f?n:a(n,dr.encoder,h))+"="+d(a(m,dr.encoder,h))]:[d(n)+"="+d(String(m))];var p,v=[];if(void 0===m)return v;if(sr(s))p=s;else{var b=Object.keys(m);p=u?b.sort(u):b}for(var y=0;y<p.length;++y){var g=p[y];o&&null===m[g]||(sr(m)?cr(v,e(m[g],"function"==typeof r?r(n,g):n,r,i,o,a,s,u,c,l,d,f,h)):cr(v,e(m[g],n+(c?"."+g:"["+g+"]"),r,i,o,a,s,u,c,l,d,f,h)))}return v},hr=function(e,t){var n,r=e,i=function(e){if(!e)return dr;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||dr.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Zn.default;if(void 0!==e.format){if(!or.call(Zn.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=Zn.formatters[n],i=dr.filter;return("function"==typeof e.filter||sr(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:dr.addQueryPrefix,allowDots:void 0===e.allowDots?dr.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:dr.charsetSentinel,delimiter:void 0===e.delimiter?dr.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:dr.encode,encoder:"function"==typeof e.encoder?e.encoder:dr.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:dr.encodeValuesOnly,filter:i,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:dr.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:dr.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:dr.strictNullHandling}}(t);"function"==typeof i.filter?r=(0,i.filter)("",r):sr(i.filter)&&(n=i.filter);var o,a=[];if("object"!==(void 0===r?"undefined":ir(r))||null===r)return"";o=t&&t.arrayFormat in ar?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var s=ar[o];n||(n=Object.keys(r)),i.sort&&n.sort(i.sort);for(var u=0;u<n.length;++u){var c=n[u];i.skipNulls&&null===r[c]||cr(a,fr(r[c],c,s,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var l=a.join(i.delimiter),d=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),l.length>0?d+l:""},mr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pr=Ot.Unavailable,vr=Jt._,br=Jt.stripSlashes,yr=Ot.convert;function gr(e){if("ECONNREFUSED"===e.code)throw new pr(e.message,vr.pick(e,"address","port","config"));throw yr(e)}var wr=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.name=br(t.name),this.options=t.options,this.connection=t.connection,this.base=t.base+"/"+this.name}return mr(e,[{key:"makeUrl",value:function(e,t){e=e||{};var n=this.base;return null!=t&&(n+="/"+encodeURIComponent(t)),0!==Object.keys(e).length&&(n+="?"+hr(e)),n}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request({url:this.makeUrl(e.query),method:"GET",headers:Object.assign({},e.headers)},e).catch(gr)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?Promise.reject(new Error("id for 'get' can not be undefined")):this.request({url:this.makeUrl(t.query,e),method:"GET",headers:Object.assign({},t.headers)},t).catch(gr)}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({url:this.makeUrl(t.query),body:e,method:"POST",headers:Object.assign({"Content-Type":"application/json"},t.headers)},t).catch(gr)}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===e?Promise.reject(new Error("id for 'update' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(n.query,e),body:t,method:"PUT",headers:Object.assign({"Content-Type":"application/json"},n.headers)},n).catch(gr)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===e?Promise.reject(new Error("id for 'patch' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(n.query,e),body:t,method:"PATCH",headers:Object.assign({"Content-Type":"application/json"},n.headers)},n).catch(gr)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?Promise.reject(new Error("id for 'remove' can not be undefined, only 'null' when removing multiple entries")):this.request({url:this.makeUrl(t.query,e),method:"DELETE",headers:Object.assign({},t.headers)},t).catch(gr)}}]),e}(),Er=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ar=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),Er(t,[{key:"request",value:function(e,t){var n=this.connection,r=this.options.HttpHeaders;if(!n||!r)throw new Error("Please pass angular's 'httpClient' (instance) and and object with 'HttpHeaders' (class) to feathers-rest");var i=e.url,o=t.connection,a=void 0===o?{}:o,s=new r(Object.assign({Accept:"application/json"},this.options.headers,e.headers,a.headers)),u=Object.assign({body:e.body},t.connection,{headers:s});return new Promise(function(t,r){n.request(e.method,i,u).subscribe(t,r)}).catch(function(e){var t=e.error;if(t)throw"string"==typeof t?JSON.parse(t):t;throw e})}}]),t}(),_r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Sr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),_r(t,[{key:"request",value:function(e,t){var n=this.connection,r=this.options.Headers;if(!n||!r)throw new Error("Please pass angular's 'http' (instance) and and object with 'Headers' (class) to feathers-rest");var i=e.url,o=t.connection,a=void 0===o?{}:o,s=new r(Object.assign({Accept:"application/json"},this.options.headers,e.headers,a.headers)),u=Object.assign({method:e.method,body:e.body},a,{headers:s});return new Promise(function(e,t){n.request(i,u).subscribe(e,t)}).then(function(e){return e.json()}).catch(function(e){var t=e.response||e;throw t instanceof Error?t:t.json()||t})}}]),t}(),kr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Or=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),kr(t,[{key:"request",value:function(e,t){var n=Object.assign({url:e.url,method:e.method,data:e.body,headers:Object.assign({Accept:"application/json"},this.options.headers,e.headers)},t.connection);return this.connection.request(n).then(function(e){return e.data}).catch(function(e){var t=e.response||e;throw t instanceof Error?t:t.data||t})}}]),t}(),Tr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),Tr(t,[{key:"request",value:function(e,t){var n=Object.assign({},e,t.connection);return n.headers=Object.assign({Accept:"application/json"},this.options.headers,n.headers),e.body&&(n.body=JSON.stringify(e.body)),(0,this.connection)(e.url,n).then(this.checkStatus).then(function(e){return 204===e.status?null:e.json()})}},{key:"checkStatus",value:function(e){return e.ok?e:e.json().then(function(t){throw t.response=e,t})}}]),t}(),Dr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),Dr(t,[{key:"request",value:function(e,t){var n=this,r=t.connection,i=void 0===r?{}:r,o=Object.assign({},e.headers,this.options.headers,i.headers),a=Object.assign({dataType:e.type||"json"},i,e,{headers:o});return e.body&&(a.data=JSON.stringify(e.body),a.contentType="application/json"),delete a.type,delete a.body,new Promise(function(e,t){n.connection.ajax(a).then(e,function(e){var n=e.responseText;try{n=JSON.parse(n)}catch(po){n=new Error(e.responseText)}n.xhr=n.response=e,t(n)})})}}]),t}(),Mr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),xr=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),Mr(t,[{key:"request",value:function(e,t){var n=this;return new Promise(function(r,i){var o=t.connection,a=void 0===o?{}:o,s=Object.assign({},e.headers,a.headers);n.connection(Object.assign({json:!0},e,t.connection,{headers:s}),function(e,t,n){return e?i(e):!e&&t.statusCode>=400?"string"==typeof n?i(new Error(n)):(n.response=t,i(Object.assign(new Error(n.message),n))):void r(n)})})}}]),t}(),Ir=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Nr={},Fr={jquery:Lr,superagent:function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,wr),Ir(t,[{key:"request",value:function(e,t){var n=this.connection(e.method,e.url).set(this.options.headers||{}).set("Accept","application/json").set(t.connection||{}).set(e.headers||{}).type(e.type||"json");return new Promise(function(t,r){n.set(e.headers),e.body&&n.send(e.body),n.end(function(e,n){if(e){try{var i=e.response;(e=JSON.parse(e.response.text)).response=i}catch(po){}return r(e)}t(n&&n.body)})})}}]),t}(),request:xr,fetch:Cr,axios:Or,angular:Sr,angularHttpClient:Ar};function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={Base:wr};return Object.keys(Fr).forEach(function(n){var r=Fr[n];t[n]=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error(n+" has to be provided to feathers-rest");var o=function(n){return new r({base:e,name:n,connection:t,options:i})},a=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.rest=t,this.defaultService=o};return a.Service=r,a.service=o,a}}),t}(Nr=Pr).default=Pr;var jr={},Rr=Nr("https://nautilist-public.herokuapp.com"),Gr=Wn().configure(Rr.fetch(window.fetch));Gr.configure(Rt({header:"Authorization",prefix:"",path:"/authentication",jwtStrategy:"jwt",entity:"user",service:"users",cookie:"feathers-jwt",storageKey:"feathers-jwt",storage:localStorage})),jr=Gr;var Yr;function Ur(e,t){e.api={projects:jr.service("/api/projects"),links:jr.service("/api/links"),lists:jr.service("/api/lists"),tracks:jr.service("/api/tracks"),collections:jr.service("/api/collections"),users:jr.service("users"),authmanagement:jr.service("authmanagement"),authenticate:function(e){return void 0!==e?jr.authenticate(e):jr.authenticate()},logout:function(){return jr.logout()}}}Yr=Ur,Ur.storeName="api";var Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr=function e(t){var n=Object.assign({},t);for(var r in n)"_id"===r?delete n[r]:"object"===Hr(n[r])&&e(n[r]);return n},Vr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Br(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Kr(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var $r,zr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Jr=/\n[\s]+$/,Zr=/^\n[\s]+/,Xr=/[\s]+$/,Qr=/^[\s]+/,ei=/[\n\s]+/g,ti=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],ni=["code","pre","textarea"],ri=function e(t,n){if(Array.isArray(n))for(var r,i,o=t.nodeName.toLowerCase(),a=!1,s=0,u=n.length;s<u;s++){var c=n[s];if(Array.isArray(c))e(t,c);else{("number"==typeof c||"boolean"==typeof c||"function"==typeof c||c instanceof Date||c instanceof RegExp)&&(c=c.toString());var l=t.childNodes[t.childNodes.length-1];if("string"==typeof c)a=!0,l&&"#text"===l.nodeName?l.nodeValue+=c:(c=document.createTextNode(c),t.appendChild(c),l=c),s===u-1&&(a=!1,-1===ti.indexOf(o)&&-1===ni.indexOf(o)?""===(r=l.nodeValue.replace(Zr,"").replace(Xr,"").replace(Jr,"").replace(ei," "))?t.removeChild(l):l.nodeValue=r:-1===ni.indexOf(o)&&(i=0===s?"":" ",r=l.nodeValue.replace(Zr,i).replace(Qr," ").replace(Xr,"").replace(Jr,"").replace(ei," "),l.nodeValue=r));else if(c&&c.nodeType){a&&(a=!1,-1===ti.indexOf(o)&&-1===ni.indexOf(o)?""===(r=l.nodeValue.replace(Zr,"").replace(Jr,"").replace(ei," "))?t.removeChild(l):l.nodeValue=r:-1===ni.indexOf(o)&&(r=l.nodeValue.replace(Qr," ").replace(Zr,"").replace(Jr,"").replace(ei," "),l.nodeValue=r));var d=c.nodeName;d&&(o=d.toLowerCase()),t.appendChild(c)}}}},ii="nautilist-web - route not found";$r={body:"w-100 h-100 code lh-copy flex flex-column",navbarTop:"w-100 h-auto flex flex-column flex-row-ns min-height-60px bg-near-white",main:"w-100 flex flex-column flex-grow-1",footer:"w-100 flex flex-column flex-row-ns min-height-180px bg-near-white bg-navy pink",aTag:"link black pointer",modalContainer:"w-100 h-100 fixed top-0 left-0 bg-light-green max-z flex flex-column",sectionmw7:"w-100 h-auto mw7 pa2 pa0-ns",fieldset:"w-100 dropshadow ba bw1 b--black mt3 mb3 pa2 bg-white",modalInput:"w-100 bg-near-white f6 bn pa2",legend:"pl3 pr3",submitButton:"pa2 ba bw1 b--black h3 bg-navy pink dropshadow grow w4"};var oi=function(){return function(){var e=document.createElement("footer");e.setAttribute("class",arguments[2]+" w-100 f7 pa4-ns pa2 items-center");var t=document.createElement("ul");t.setAttribute("class","list pl0 w-100-ns w-100 tc");var n=document.createElement("li");ri(n,["Imprint"]);var r=document.createElement("li");ri(r,["License"]);var i=document.createElement("li"),o=document.createElement("a");o.setAttribute("href","https://github.com/nautilist"),o.setAttribute("target","_blank"),o.setAttribute("class",arguments[0]+" pink"),ri(o,["Contribute"]),ri(i,[o]);var a=document.createElement("li"),s=document.createElement("a");s.setAttribute("href","https://github.com/nautilist/nautilist-web/issues"),s.setAttribute("target","_blank"),s.setAttribute("class",arguments[1]+" pink"),ri(s,["Issues/Reporting"]),ri(a,[s]);var u=document.createElement("li");ri(u,["contact: hello.nautilist at gmail dot com"]);var c=document.createElement("li");return ri(c,["\xa9 2019 nautilist is an open educational initiative by ITP."]),ri(t,["\n                ",n,"\n                ",r,"\n                ",i,"\n                ",a,"\n                ",u,"\n                ",c,"\n            "]),ri(e,["\n            ",t,"\n        "]),e}($r.aTag,$r.aTag,$r.footer)},ai=function(e,t){switch(e.user.authenticated){case!0:return function(e,t){var n=e.user.username;return function(){var e=document.createElement("div"),t=document.createElement("p"),n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-transparent b underline"),ri(n,[arguments[1]]),ri(t,["Hello ",n," \xb7 ",arguments[2]]),ri(e,["\n            ",t,"\n        "]),e}(function(e){t("NAVMODAL_CLOSE"),t("USERS_SET_SELECTED",n),t("pushState","/users/"+n)},n,function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","pointer bn bg-transparent"),ri(e,["log out"]),e}(function(e){t("NAVMODAL_CLOSE"),t("USER_LOGOUT")})}(0,t))}(e,t);default:return function(e,t){return function(){var e=document.createElement("div"),t=document.createElement("p");t.onclick=arguments[2];var n=document.createElement("a");n.setAttribute("href","/login"),n.setAttribute("class",arguments[0]),ri(n,["login"]);var r=document.createElement("a");return r.setAttribute("href","/signup"),r.setAttribute("class",arguments[1]),ri(r,["sign up"]),ri(t,[n," \xb7 ",r]),ri(e,["\n        ",t,"\n    "]),e}($r.aTag,$r.aTag,function(e){t("NAVMODAL_CLOSE")})}(0,t)}},si=function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","bn bg-transparent pointer"),ri(e,["browse"]),e}(function(e){t("BROWSE_FIND"),t("NAVMODAL_CLOSE"),t("pushState","/browse")})},ui=function(e,t){return function(){var e=document.createDocumentFragment(),t=document.createElement("form");t.onsubmit=arguments[2],t.setAttribute("class","flex-grow-1 flex flex-row pl3 h-100");var n=document.createElement("div");n.setAttribute("style","max-width:40px"),n.setAttribute("class","h-100 flex flex-column items-center justify-center dropshadow pa1 bl bt bb bg-white bw1 b--dark-pink");var r=document.createElement("img");r.setAttribute("src","/assets/1F50E.png"),r.setAttribute("class","w-100 ma0 pa0"),ri(n,["\n        ",r,"\n    "]);var i=document.createElement("input");return i.onkeyup=arguments[0],i.setAttribute("value",arguments[1]),i.setAttribute("type","search"),i.setAttribute("name","search"),i.setAttribute("placeholder","search"),i.setAttribute("class","h-100 dropshadow pl2 ba bw1 bg-white f6  b--dark-pink w-100 h-100"),ri(t,["\n    ",n,"\n    ",i]),ri(e,[t,"\n    ","\n    "]),e}(function(e){t("searchTerm_update",e.target.value)},e.search.searchTerm,function(e){e.preventDefault(),console.log("submit search"),t("NAVMODAL_CLOSE"),new FormData(e.currentTarget).get("search"),t("NAVSEARCH_FIND")})},ci=function(e,t){if(!0===e.modals.nav.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245, 0.95)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["menu"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("NAVMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("ul");e.setAttribute("class","pa2-ns pa4 list flex flex-column items-center justify-start w-100 h-100");var t=document.createElement("li");t.setAttribute("class","w-100 h3 tc mt4"),ri(t,[arguments[0]]);var n=document.createElement("li");n.setAttribute("class","w-100 h2 mt4 flex flex-row justify-center"),ri(n,[arguments[1]]);var r=document.createElement("li");return r.setAttribute("class","w-100 h3 tc mt4"),ri(r,[arguments[2]]),ri(e,["\n            ",t,"    \n            ",n,"    \n            ",r,"\n        "]),e}(ai(e,t),ui(e,t),si(0,t))}(e,t))},li=function(){return function(){var e=document.createElement("a");e.setAttribute("href","/"),e.setAttribute("class","w-100 "+arguments[0]);var t=document.createElement("img");return t.setAttribute("src","/assets/logo-n.png"),t.setAttribute("class","w-100"),ri(e,[t]),e}($r.aTag)},di=function(e,t){return function(){var e=document.createElement("nav");e.setAttribute("class",arguments[8]);var t=document.createElement("ul");t.setAttribute("class",arguments[5]);var n=document.createElement("li");n.setAttribute("class",arguments[0]),ri(n,["\n                    ",arguments[1],"\n                "]);var r=document.createElement("li");r.setAttribute("class",arguments[2]+" mw6"),ri(r,["\n                    ",arguments[3],"\n                "]);var i=document.createElement("li");i.setAttribute("class","pl3"),ri(i,["\n                    ",arguments[4],"\n                "]),ri(t,["\n                ",n,"\n                ",r,"\n                ",i,"\n            "]);var o=document.createElement("ul");o.setAttribute("class",arguments[7]);var a=document.createElement("li");ri(a,[arguments[6]]),ri(o,["\n                ",a,"\n            "]);var s=document.createComment(" mobile ");return ri(e,["\n            ",t,"\n            ",o,"\n            ",s,"\n            ",arguments[9],"\n    "]),e}(mi,li(),pi,ui(e,t),si(0,t),fi,ai(e,t),hi,$r.navbarTop,function(e,t){return function(){var e=document.createElement("ul");e.setAttribute("class","list pa2 ma0 f7 w-100 h-100 dn-ns flex flex-row justify-between");var t=document.createElement("li");t.setAttribute("class","h-100 w3"),ri(t,["\n            ",arguments[0],"\n        "]);var n=document.createElement("li"),r=document.createElement("p");ri(r,["nautilists"]),ri(n,["\n            ",r,"\n        "]);var i=document.createElement("li");return i.setAttribute("class","h-100 flex flex-column justify-center"),ri(i,["\n            ",arguments[1],"\n        "]),ri(e,["\n        ",t,"\n        ",n,"\n        ",i,"\n    "]),e}(li(),function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","bn bg-transparent pointer underline"),ri(e,["menu"]),e}(function(){return t("NAVMODAL_TOGGLE")})}(0,t))}(0,t))},fi="dn f7 flex-ns flex-row list pa0 pa2 ma0 w-two-thirds-ns w-100 items-center",hi="dn f7 flex-ns flex-row justify-end items-center list pa0 pa2 ma0 w-third-ns w-100",mi="dn w3 flex-ns flex-column items-left justify-center",pi="dn h-100 w-100 flex-ns",vi=function(e,t){switch("nautilists - lists"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - lists"),e.route){case"login":return function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class",arguments[2]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]+" items-center"),ri(t,["\n        ",arguments[1],"\n    "]),ri(e,["\n    ",arguments[3],"\n    ",t,"\n    ",arguments[4],"\n    ",arguments[5],"\n  "]),e}($r.main,function(e,t){return function(){var e=document.createElement("section");e.setAttribute("class",arguments[3]+" items-center justify-center flex flex-column");var t=document.createElement("form");t.onsubmit=arguments[0],t.setAttribute("class","mw6 w-100 flex flex-column items-center");var n=document.createElement("h2");n.setAttribute("class","f5"),ri(n,["Log In"]);var r=document.createElement("input");r.setAttribute("type","submit"),r.setAttribute("value","Log In"),r.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),ri(t,["\n        ",n,"\n        ",arguments[1],"\n        ",arguments[2],"\n        ",r,"\n    "]);var i=document.createElement("small"),o=document.createElement("a");return o.setAttribute("href","/signup"),o.setAttribute("class","link black underline"),ri(o,["Sign up!"]),ri(i,["Don't have an account? ",o]),ri(e,["\n    ",t,"\n    ",i,"\n    "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("USER_LOGIN",n)}}(0,t),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb3 bn");var t=document.createElement("legend");ri(t,["Email"]);var n=document.createElement("input");return n.setAttribute("type","email"),n.setAttribute("name","email"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),ri(e,["\n    ",t,"\n    ",n,"\n    "]),e}(),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb4 bn");var t=document.createElement("legend");ri(t,["Password"]);var n=document.createElement("input");n.setAttribute("type","password"),n.setAttribute("name","password"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white");var r=document.createElement("a");return r.setAttribute("href","/reset"),r.setAttribute("class","link black underline f7 b"),ri(r,["I forgot my password \ud83d\ude2c"]),ri(e,["\n    ",t,"\n    ",n,"\n    ",r,"\n    "]),e}(),$r.sectionmw7)}(0,t),$r.body,di(e,t),oi(),ci(e,t))}(e,t);case"signup":return function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class",arguments[2]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]+" items-center"),ri(t,["\n        ",arguments[1],"\n    "]),ri(e,["\n    ",arguments[3],"\n    ",t,"\n    ",arguments[4],"\n    ",arguments[5],"\n  "]),e}($r.main,function(e,t){return function(){var e=document.createElement("section");e.setAttribute("class",arguments[4]+" items-center justify-center flex flex-column");var t=document.createElement("form");t.onsubmit=arguments[0],t.setAttribute("class","mw6 w-100 flex flex-column items-center");var n=document.createElement("h2");n.setAttribute("class","f5"),ri(n,["Sign Up"]);var r=document.createElement("input");r.setAttribute("type","submit"),r.setAttribute("value","Sign up"),r.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),ri(t,["\n        ",n,"\n        ",arguments[1],"\n        ",arguments[2],"\n        ",arguments[3],"\n        ",r,"\n    "]);var i=document.createElement("small"),o=document.createElement("a");return o.setAttribute("href","/login"),o.setAttribute("class","link black underline"),ri(o,["Log in"]),ri(i,["Already have an account? ",o]),ri(e,["\n    ",t,"\n    ",i,"\n    "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);!1!==function(e){var t=e.get("username");if(!/^[0-9a-zA-Z\_]+$/.test(t))return alert("username must be lowercase and not include \nspecial characters or spaces"),!1}(n)&&t("USER_SIGNUP",n)}}(0,t),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb3 bn");var t=document.createElement("legend");ri(t,["Username"]);var n=document.createElement("input");return n.setAttribute("type","text"),n.setAttribute("name","username"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),ri(e,["\n    ",t,"\n    ",n,"\n    "]),e}(),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb3 bn");var t=document.createElement("legend");ri(t,["Email"]);var n=document.createElement("input");return n.setAttribute("type","email"),n.setAttribute("name","email"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),ri(e,["\n    ",t,"\n    ",n,"\n    "]),e}(),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb4 bn");var t=document.createElement("legend");ri(t,["Password"]);var n=document.createElement("input");n.setAttribute("type","password"),n.setAttribute("name","password"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white");var r=document.createElement("a");return r.setAttribute("href","/reset"),r.setAttribute("class","link black underline f7 b"),ri(r,["I forgot my password \ud83d\ude2c"]),ri(e,["\n    ",t,"\n    ",n,"\n    ",r,"\n    "]),e}(),$r.sectionmw7)}(0,t),$r.body,di(e,t),oi(),ci(e,t))}(e,t);case"verify":return function(e,t){return function(){var e=document.createElement("body");e.onload=arguments[2],e.setAttribute("class",arguments[3]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]+" items-center"),ri(t,["\n        ",arguments[1],"\n    "]),ri(e,["\n    ",arguments[4],"\n    ",t,"\n    ",arguments[5],"\n    ",arguments[6],"\n  "]),e}($r.main,function(e,t){return function(){var e=document.createElement("section");e.setAttribute("class",arguments[3]+" items-center justify-center flex flex-column");var t=document.createElement("form");t.onsubmit=arguments[0],t.setAttribute("class","mw6 w-100 flex flex-column items-center");var n=document.createElement("h2");n.setAttribute("class","f5"),ri(n,["Log In"]);var r=document.createElement("input");r.setAttribute("type","submit"),r.setAttribute("value","Log In"),r.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),ri(t,["\n        ",n,"\n        ",arguments[1],"\n        ",arguments[2],"\n        ",r,"\n    "]);var i=document.createElement("small"),o=document.createElement("a");return o.setAttribute("href","/signup"),o.setAttribute("class","link black underline"),ri(o,["Sign up!"]),ri(i,["Don't have an account? ",o]),ri(e,["\n    ",t,"\n    ",i,"\n    "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("USER_LOGIN",n)}}(0,t),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb3 bn");var t=document.createElement("legend");ri(t,["Email"]);var n=document.createElement("input");return n.setAttribute("type","email"),n.setAttribute("name","email"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),ri(e,["\n    ",t,"\n    ",n,"\n    "]),e}(),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb4 bn");var t=document.createElement("legend");ri(t,["Password"]);var n=document.createElement("input");n.setAttribute("type","password"),n.setAttribute("name","password"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white");var r=document.createElement("a");return r.setAttribute("href","/reset"),r.setAttribute("class","link black underline f7 b"),ri(r,["I forgot my password \ud83d\ude2c"]),ri(e,["\n    ",t,"\n    ",n,"\n    ",r,"\n    "]),e}(),$r.sectionmw7)}(0,t),function(){return function(e,t){e.query.hasOwnProperty("token")&&(console.log("has token yes!"),t("USER_SENDVERIFICATIONTOKEN"))}(e,t)},$r.body,di(e,t),oi(),ci(e,t))}(e,t);case"reset":return function(e,t){var n;return n=e.query.hasOwnProperty("token")?function(e,t){return function(){var e=document.createElement("section");e.setAttribute("class",arguments[2]+" items-center justify-center flex flex-column");var t=document.createElement("form");t.onsubmit=arguments[0],t.setAttribute("class","mw6 w-100 flex flex-column items-center");var n=document.createElement("h2");n.setAttribute("class","f5"),ri(n,["New Password"]);var r=document.createElement("input");return r.setAttribute("type","submit"),r.setAttribute("value","Send Reset Request"),r.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),ri(t,["\n        ",n,"\n        ",arguments[1],"\n        ",r,"\n    "]),ri(e,["\n    ",t,"\n    "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("USER_RESETPASSWORD",n)}}(0,t),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb3 bn");var t=document.createElement("legend");ri(t,["New Password"]);var n=document.createElement("input");return n.setAttribute("type","password"),n.setAttribute("name","password"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),ri(e,["\n    ",t,"\n    ",n,"\n    "]),e}(),$r.sectionmw7)}(0,t):function(e,t){return function(){var e=document.createElement("section");e.setAttribute("class",arguments[2]+" items-center justify-center flex flex-column");var t=document.createElement("form");t.onsubmit=arguments[0],t.setAttribute("class","mw6 w-100 flex flex-column items-center");var n=document.createElement("h2");n.setAttribute("class","f5"),ri(n,["Reset Your Password"]);var r=document.createElement("input");return r.setAttribute("type","submit"),r.setAttribute("value","Send Reset Request"),r.setAttribute("class","w-100 ba bw2 mw5 mb3 dropshadow h3 b--dark-pink dark-pink bg-white b"),ri(t,["\n        ",n,"\n        ",arguments[1],"\n        ",r,"\n    "]),ri(e,["\n    ",t,"\n    "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("USER_SENDRESETPASSWORD",n)}}(0,t),function(){var e=document.createElement("fieldset");e.setAttribute("class","w-100 mb3 bn");var t=document.createElement("legend");ri(t,["Email"]);var n=document.createElement("input");return n.setAttribute("type","email"),n.setAttribute("name","email"),n.setAttribute("required","required"),n.setAttribute("class","w-100 h3 dropshadow pa2 f4 bn bg-near-white"),ri(e,["\n    ",t,"\n    ",n,"\n    "]),e}(),$r.sectionmw7)}(0,t),function(){var e=document.createElement("body");e.setAttribute("class",arguments[2]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]+" items-center"),ri(t,["\n        ",arguments[1],"\n    "]),ri(e,["\n    ",arguments[3],"\n    ",t,"\n    ",arguments[4],"\n    ",arguments[5],"\n    "]),e}($r.main,n,$r.body,di(e,t),oi(),ci(e,t))}(e,t);case"verifyRedirect":return function(e,t){return function(){var e=document.createElement("body");e.setAttribute("class",arguments[2]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]+" items-center"),ri(t,["\n        ",arguments[1],"\n    "]),ri(e,["\n    ",arguments[3],"\n    ",t,"\n    ",arguments[4],"\n    ",arguments[5],"\n  "]),e}($r.main,function(){var e=document.createElement("section");e.setAttribute("class",arguments[2]+" justify-center flex flex-column");var t=document.createElement("h3");t.setAttribute("class",""),ri(t,["Check your email for a verification email from hello.nautilist@gmail.com. For now, you can:"]);var n=document.createElement("h3");n.setAttribute("class","");var r=document.createElement("a");r.setAttribute("href","/"),r.setAttribute("class",arguments[0]),ri(r,["Home"]),ri(n,["\u2192 ",r]);var i=document.createElement("h3");i.setAttribute("class","");var o=document.createElement("a");return o.setAttribute("href","/browse"),o.setAttribute("class",arguments[1]),ri(o,["Browse"]),ri(i,["\u2192 ",o]),ri(e,["\n        ",t,"\n        ",n,"\n        ",i,"\n    "]),e}($r.aTag,$r.aTag,$r.sectionmw7),$r.body,di(e,t),oi(),ci(e,t))}(e,t);default:return ri(n=document.createElement("body"),["nothing found"]),n}var n},bi={},yi={};(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{};"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=bi),yi=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var gi={};(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},gi=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var wi,Ei=Object.create(null),Ai="onloadid"+(new Date%9e6).toString(36),_i="data-"+Ai,Si=0;if(gi&&gi.MutationObserver){var ki=new MutationObserver(function(e){if(!(Object.keys(Ei).length<1))for(var t=0;t<e.length;t++)e[t].attributeName!==_i?(Di(e[t].removedNodes,Ci),Di(e[t].addedNodes,Ti)):(n=e[t],r=Ti,i=Ci,o=void 0,o=n.target.getAttribute(_i),function(e,t){return!(!e||!t)&&Ei[e][3]===Ei[t][3]}(n.oldValue,o)?Ei[o]=Ei[n.oldValue]:(Ei[n.oldValue]&&i(n.oldValue,n.target),Ei[o]&&r(o,n.target)));var n,r,i,o});yi.body?Oi(ki):yi.addEventListener("DOMContentLoaded",function(e){Oi(ki)})}function Oi(e){e.observe(yi.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[_i]})}function Ti(e,t){Ei[e][0]&&0===Ei[e][2]&&(Ei[e][0](t),Ei[e][2]=1)}function Ci(e,t){Ei[e][1]&&1===Ei[e][2]&&(Ei[e][1](t),Ei[e][2]=0)}function Di(e,t){for(var n=Object.keys(Ei),r=0;r<e.length;r++){if(e[r]&&e[r].getAttribute&&e[r].getAttribute(_i)){var i=e[r].getAttribute(_i);n.forEach(function(n){i===n&&t(n,e[r])})}e[r].childNodes.length>0&&Di(e[r].childNodes,t)}}(wi=function e(t,n,r,i){return n=n||function(){},r=r||function(){},t.setAttribute(_i,"o"+Si),Ei["o"+Si]=[n,r,0,i||e.caller],Si+=1,t}).KEY_ATTR=_i;var Li,Mi=wi.KEY_ID=Ai,xi=wi.KEY_ATTR;function Ii(e){this._hasWindow="undefined"!=typeof window,this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=e||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];var t=this;Object.defineProperty(this,"element",{get:function(){var e=yi.getElementById(t._id);if(e)return e.dataset.nanocomponent===t._ncID?e:void 0}})}Li=Ii,Ii.prototype.render=function(){for(var e,t=oe(this._name+".render"),n=new Array(arguments.length),r=0;r<arguments.length;r++)n[r]=arguments[r];if(this._hasWindow){if(this.element){e=this.element;var i=oe(this._name+".update"),o=this._rerender||this.update.apply(this,n);if(i(),this._rerender&&(this._rerender=!1),o){var a=this._handleRender(n),s=oe(this._name+".morph");Ee(e,a),s(),this.afterupdate&&this.afterupdate(e)}return this._proxy||(this._proxy=this._createProxy()),t(),this._proxy}return this._reset(),e=this._handleRender(n),this.beforerender&&this.beforerender(e),(this.load||this.unload||this.afterreorder)&&(wi(e,this._handleLoad,this._handleUnload,this._ncID),this._olID=e.dataset[Mi]),t(),e}var u=oe(this._name+".create");return e=this.createElement.apply(this,n),u(),t(),e},Ii.prototype.rerender=function(){this._rerender=!0,this.render.apply(this,this._arguments)},Ii.prototype._handleRender=function(e){var t=oe(this._name+".createElement"),n=this.createElement.apply(this,e);return t(),this._rootNodeName||(this._rootNodeName=n.nodeName),this._arguments=e,this._brandNode(this._ensureID(n))},Ii.prototype._createProxy=function(){var e=yi.createElement(this._rootNodeName),t=this;return this._brandNode(e),e.id=this._id,e.setAttribute("data-proxy",""),e.isSameNode=function(e){return e&&e.dataset.nanocomponent===t._ncID},e},Ii.prototype._reset=function(){this._ncID="ncid-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null},Ii.prototype._brandNode=function(e){return e.setAttribute("data-nanocomponent",this._ncID),this._olID&&e.setAttribute(xi,this._olID),e},Ii.prototype._ensureID=function(e){return e.id?this._id=e.id:e.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),e},Ii.prototype._handleLoad=function(e){this._loaded?this.afterreorder&&this.afterreorder(e):(this._loaded=!0,this.load&&this.load(e))},Ii.prototype._handleUnload=function(e){this.element||(this._loaded=!1,this.unload&&this.unload(e))},Ii.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")},Ii.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};var Ni=Li,Fi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pi=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state=n,i.emit=r,i.local=n.components[e]={popup:"dn"},i.togglePopup=i.togglePopup.bind(i),i.toggleListModal=i.toggleListModal.bind(i),i.toggleLinkModal=i.toggleLinkModal.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ni),Fi(t,[{key:"toggleLinkModal",value:function(e){this.emit("LISTS_FIND",{query:{$sort:{createdAt:-1}}}),this.emit("ADDLINKMODAL_TOGGLE")}},{key:"toggleListModal",value:function(e){this.emit("LINKS_FIND",{query:{$sort:{createdAt:-1}}}),this.emit("ADDLISTMODAL_TOGGLE")}},{key:"togglePopup",value:function(e){this.emit("ADDFEATUREBTNPOPUP_TOGGLE")}},{key:"createElement",value:function(){return function(){var e=document.createElement("div");e.setAttribute("class","fixed bottom-0 right-0 max-z mr3 mb3");var t=document.createElement("div");t.setAttribute("style","bottom:56px; right:0px;"),t.setAttribute("class","absolute "+arguments[2]);var n=document.createElement("ul");n.setAttribute("class","list pl0 w4 tr dropshadow");var r=document.createElement("li"),i=document.createElement("button");i.onclick=arguments[0],i.setAttribute("class","button-reset w-100 tc grow ba bw1 bg-light-green b--white pa1");var o=document.createElement("p");o.setAttribute("class","w-100 h1");var a=document.createElement("img");a.setAttribute("src","/assets/1F517.png"),a.setAttribute("class","h1"),ri(o,[a," link"]),ri(i,[" ",o,"\n              "]),ri(r,["\n              ",i,"\n            "]);var s=document.createElement("li"),u=document.createElement("button");u.onclick=arguments[1],u.setAttribute("class","button-reset w-100 tc grow ba bw1 bg-yellow b--white pa1");var c=document.createElement("p");c.setAttribute("class","w-100 h1");var l=document.createElement("img");l.setAttribute("src","/assets/1F4A5.png"),l.setAttribute("class","h1"),ri(c,[l," list"]),ri(u,[" ",c,"\n              "]),ri(s,["\n              ",u,"\n            "]),ri(n,["\n            ",r,"\n            ",s,"\n          "]),ri(t,["\n          ",n,"\n        "]);var d=document.createElement("button");return d.onclick=arguments[3],d.setAttribute("class","absolute bottom-0 right-0 bn w3 h3 br-100 bg-light-pink shadow-5"),ri(d,["+"]),ri(e,["\n        ",t,"\n        ",d,"\n      "]),e}(this.toggleLinkModal,this.toggleListModal,this.local.popup,this.togglePopup)}},{key:"update",value:function(){return this.local.popup=0==this.state.modals.addFeatureBtnPopup.displayed?"dn":"flex",!0}}]),t}();function ji(e,t){return function(e){var n=e.target.value,r=e.target.name;t("modal_handle_keyup",{modalName:"addLinkModal",prop:r,val:n})}}var Ri=function(e,t){if(!0===e.modals.addLinkModal.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Add Link"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("ADDLINKMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll");var t=document.createElement("section");t.setAttribute("class","w-50-ns w-100 h-100 pa2 pl4 pr4 bw1 br");var n=document.createElement("fieldset");n.setAttribute("class",arguments[1]+" mw0");var r=document.createElement("legend");r.setAttribute("class",arguments[0]),ri(r,["Optional: Step 1: Select List"]),ri(n,["\n                    ",r,"\n                    ",arguments[2],"\n                "]);var i=document.createElement("fieldset");i.setAttribute("class",arguments[4]+" mw0");var o=document.createElement("legend");o.setAttribute("class",arguments[3]),ri(o,["Optional: Step 2: Select Section"]),ri(i,["\n                    ",o,"\n                    ",arguments[5],"\n                "]),ri(t,["\n                ",n,"\n                ",i,"\n            "]);var a=document.createElement("section");a.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4");var s=document.createElement("div");return s.setAttribute("class","w-100 h-100"),ri(s,["\n                    ",arguments[6],"\n                "]),ri(a,["\n                ",s,"\n            "]),ri(e,["\n            ",t,"\n            ",a,"\n        "]),e}($r.legend,$r.fieldset,function(e,t){var n=e.main.lists.data.slice(0);return 0===(n=e.user.authenticated?n.filter(function(t){return t.ownerDetails.username===e.user.username}):[]).length?function(){var e=document.createElement("p"),t=document.createElement("a");t.setAttribute("href","/login"),t.setAttribute("class",arguments[0]+" underline"),ri(t,["log in"]);var n=document.createElement("button");return n.onclick=arguments[1],n.setAttribute("class","bn dropshadow bg-near-white"),ri(n,["retrieve my lists"]),ri(e,["No lists found - either you need to ",t," in or you can try to ",n]),e}($r.aTag,function(e,t){return function(n){t("LISTS_FIND",{query:{$or:[{owner:e.user._id},{collaborators:{$in:[e.user._id]}}]}})}}(e,t)):function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 vh-50-ns h3 flex flex-column overflow-y-scroll list ma0 pt2 pb3 pl3 pr3"),ri(e,["\n        ",arguments[0],"\n    "]),e}(function(e,t,r){return n.map(function(e){return function(e,t,n){var r=e.name,i=e.description,o=e._id,a=e.ownerDetails,s=t.modals.addLinkModal.selectedList._id===o?"bg-yellow":"bg-white";return function(){var e=document.createElement("li");e.onclick=arguments[3],e.setAttribute("data-id",arguments[4]),e.setAttribute("class",arguments[5]+" grow h3 w-100 pa1 ma0 f7 mt2 mb2 bg-white outline dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7 truncate b"),ri(t,[arguments[0]]);var n=document.createElement("p");n.setAttribute("class","ma0 pa0 f8 truncate b"),ri(n,["by ",arguments[1]]);var r=document.createElement("p");return r.setAttribute("class","ma0 pa0 f7 truncate"),ri(r,[arguments[2]]),ri(e,["\n        ",t,"\n        ",n,"\n        ",r,"\n    "]),e}(r,a.username,i,function(e,t,n){return function(t){n("ADDLINKMODAL_LISTSELECT_TOGGLE",e)}}(o,0,n),o,s)}(e,t,r)})}(0,e,t))}(e,t),$r.legend,$r.fieldset,function(e,t){var n=e.modals.addLinkModal.selectedList;return!Object.keys(n).length>0?"No list selected":function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 h4-ns h3 flex flex-column overflow-y-scroll list ma0 pt2 pb3 pl3 pr3"),ri(e,["\n        ",arguments[0],"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e.name,i=e.description,o=e._id,a=t.modals.addLinkModal.selectedSection._id===o?"bg-light-blue":"bg-white";return function(){var e=document.createElement("li");e.onclick=arguments[2],e.setAttribute("data-id",arguments[3]),e.setAttribute("class",arguments[4]+" grow h3 w-100 pa1 ma0 f7 mt2 mb2 bg-white outline dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7 truncate b"),ri(t,[arguments[0]]);var n=document.createElement("p");return n.setAttribute("class","ma0 pa0 f7 truncate"),ri(n,[arguments[1]]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(r=0===r.length?"default":r,i,function(e,t,n){return function(t){n("ADDLINKMODAL_SECTIONSELECT_TOGGLE",e)}}(o,0,n),o,a)}(e,t,n)})}(n.sections,e,t))}(e,t),function(e,t){return function(){var e=document.createElement("form");return e.setAttribute("id","AddListForm"),e.onsubmit=arguments[0],ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n            ",arguments[3],"\n            ",arguments[4],"\n            ",arguments[5],"\n        "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("ADDLINKMODAL_SUBMIT",n)}}(0,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["URL"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","url"),n.setAttribute("type","text"),n.setAttribute("placeholder","https://itp.nyu.edu"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addLinkModal.url,ji(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Name"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","name"),n.setAttribute("type","text"),n.setAttribute("placeholder","e.g. Title of URL"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addLinkModal.name,ji(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Description"]);var n=document.createElement("textarea");return n.onkeyup=arguments[1],n.setAttribute("name","description"),n.setAttribute("placeholder","A description to go with the magic"),n.setAttribute("class",arguments[2]),ri(n,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,ji(0,t),$r.modalInput,e.modals.addLinkModal.description,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Tags"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","tags"),n.setAttribute("type","text"),n.setAttribute("placeholder","creative, coding, javascript"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addLinkModal.tags,ji(0,t),$r.modalInput,$r.fieldset)}(e,t),function(){var e=document.createElement("div");e.setAttribute("class","w-100 mt4 flex flex-row justify-end");var t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value","Submit"),t.setAttribute("class",arguments[0]),ri(e,["\n            ",t,"\n        "]),e}($r.submitButton))}(e,t))}(e,t))};function Gi(e,t){return function(e){var n=e.target.value,r=e.target.name;t("modal_handle_keyup",{modalName:"addListModal",prop:r,val:n})}}var Yi=function(e,t){if(!0===e.modals.addListModal.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245, 1)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Create List"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("ADDLISTMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll");var t=document.createElement("section");t.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4 bw1 br");var n=document.createElement("fieldset");n.setAttribute("class",arguments[1]+" mw0");var r=document.createElement("legend");r.setAttribute("class",arguments[0]),ri(r,["Optional: Select Links"]),ri(n,["\n                ",r,"\n                ",arguments[2],"\n            "]),ri(t,["\n            ",n,"\n        "]);var i=document.createElement("section");i.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4");var o=document.createElement("div");return o.setAttribute("class","w-100 h-100"),ri(o,["\n                ",arguments[3],"\n            "]),ri(i,["\n            ",o,"\n        "]),ri(e,["\n        \n        ",t,"\n\n        ",i,"\n    "]),e}($r.legend,$r.fieldset,function(e,t){return function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 vh-50-ns h3 flex flex-column overflow-y-scroll list ma0 pt2 pb3 pl3 pr3"),ri(e,["\n        ",arguments[0],"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e.name,i=e.description,o=e._id,a=t.modals.addListModal.links.includes(o)?"bg-light-green":"bg-white";return function(){var e=document.createElement("li");e.onclick=arguments[2],e.setAttribute("data-id",arguments[3]),e.setAttribute("class",arguments[4]+" grow h3 w-100 pa1 ma0 f7 mt2 mb2 bg-white outline dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7 truncate b"),ri(t,[arguments[0]]);var n=document.createElement("p");return n.setAttribute("class","ma0 pa0 f7 truncate"),ri(n,[arguments[1]]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(r,i,function(e,t,n){return function(t){n("ADDLISTMODAL_LINKSELECT_TOGGLE",e)}}(o,0,n),o,a)}(e,t,n)})}(e.main.links.data,e,t))}(e,t),function(e,t){return function(){var e=document.createElement("form");return e.setAttribute("id","AddListForm"),e.onsubmit=arguments[0],ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n            ",arguments[3],"\n            ",arguments[4],"\n        "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("ADDLISTMODAL_SUBMIT",n)}}(0,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Name"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","name"),n.setAttribute("type","text"),n.setAttribute("placeholder","Magical List Name"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addListModal.name,Gi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Description"]);var n=document.createElement("textarea");return n.onkeyup=arguments[1],n.setAttribute("name","description"),n.setAttribute("placeholder","A description to go with the magic"),n.setAttribute("class",arguments[2]),ri(n,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,Gi(0,t),$r.modalInput,e.modals.addListModal.description,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Tags"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","tags"),n.setAttribute("type","text"),n.setAttribute("placeholder","creative, coding, javascript"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addListModal.tags,Gi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(){var e=document.createElement("div");e.setAttribute("class","w-100 mt4 flex flex-row justify-end");var t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value","Submit"),t.setAttribute("class",arguments[0]),ri(e,["\n            ",t,"\n        "]),e}($r.submitButton))}(e,t))}(e,t))},Ui=function(e){return e.map(function(e){return function(e){var t=e.name,n=e.url,r=e.description,i=e._id,o=e.selectedColor,a=e.colors,s=e.ownerDetails,u=n||"#";return function(){var e=document.createElement("a");e.setAttribute("href",arguments[8]),e.setAttribute("target","_blank"),e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("data-type","links"),t.setAttribute("data-id",arguments[6]),t.onclick=arguments[7],t.setAttribute("class","h-100 dropshadow bg-near-white ma2 flex flex-column justify-between");var n=document.createElement("div");n.setAttribute("class","flex flex-column w-100");var r=document.createElement("button");r.setAttribute("class","w-100 dn f7 bn bg-navy dark-pink"),ri(r,["save for later"]);var i=document.createElement("button");i.setAttribute("style","background-color:"+arguments[0]+";"),i.setAttribute("class","bn f7 w-100 h2 br--top");var o=document.createElement("div");o.setAttribute("class","hide-child");var a=document.createElement("section");a.setAttribute("class","pa2");var s=document.createElement("h3");s.setAttribute("style","max-height:4rem"),s.setAttribute("class","ma0 overflow-y-scroll"),ri(s,[arguments[1]]);var u=document.createElement("small");u.setAttribute("class","ma0");var c=document.createElement("a");c.setAttribute("href","/users/"+arguments[2]),c.setAttribute("class","link black underline"),ri(c,[arguments[3]]),ri(u,["by ",c]),ri(a,["\n                  ",s,"\n                  ",u,"\n                "]);var l=document.createElement("p");l.setAttribute("style","max-height:4rem"),l.setAttribute("class","ma0 pa2 f7 overflow-y-scroll"),ri(l,[arguments[4]]),ri(o,["\n                ",a,"\n                ",l,"\n              "]),ri(n,["\n              ",r,"\n              ",i,"\n              ",o,"\n          "]);var d=document.createElement("div");d.setAttribute("class","w-100 pa2 flex flex-row justify-end");var f=document.createElement("button");return f.onclick=arguments[5],f.setAttribute("class","dn h2 w2 br-100 f7 bn bg-moon-gray white grow"),ri(f,["+"]),ri(d,["\n            ",f,"\n          "]),ri(t,["\n          ",n,"\n          ",d,"\n      "]),ri(e,["\n      ",t,"\n    "]),e}(a[o],t,s.username,function(e){return e.hasOwnProperty("owner")?""+e.ownerDetails.username:"\ud83e\udd16"}(e),r,function(e){alert("save link modal")},i,function(e){var t=e.currentTarget.dataset,n=t.id;t.type,emit("fetch-link",n)},u)}(e)})},Hi=function(e){return e.map(function(e){return function(e){var t=e.name,n=e.description,r=e._id,i=e.selectedColor;return function(){var e=document.createElement("a");e.setAttribute("href","/lists/"+arguments[7]),e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("data-type","lists"),t.setAttribute("data-id",arguments[6]),t.setAttribute("class","h-100 dropshadow bg-near-white ma2");var n=document.createElement("header");n.setAttribute("style","background-color:"+arguments[0]+";"),n.setAttribute("class","w-100 h2  br--top");var r=document.createElement("div");r.setAttribute("class","hide-child");var i=document.createElement("section");i.setAttribute("class","pa2");var o=document.createElement("h3");o.setAttribute("style","max-height:4rem"),o.setAttribute("class","ma0 overflow-y-scroll "),ri(o,[arguments[1]]);var a=document.createElement("small");a.setAttribute("class","ma0");var s=document.createElement("a");s.setAttribute("href","/users/"+arguments[2]),s.setAttribute("class","link black underline"),ri(s,[arguments[3]]),ri(a,["by ",s," ",arguments[4]]),ri(i,["\n              ",o,"\n              ",a,"\n            "]);var u=document.createElement("p");return u.setAttribute("style","max-height:4rem"),u.setAttribute("class","ma0 pa2  f7 overflow-y-scroll"),ri(u,[arguments[5]]),ri(r,["\n            ",i,"\n            ",u,"\n        "]),ri(t,["\n        ",n,"\n        ",r,"\n      "]),ri(e,["\n      ",t,"\n    "]),e}(e.colors[i],t,e.ownerDetails.username,function(e){return e.hasOwnProperty("owner")?""+e.ownerDetails.username:"\ud83e\udd16"}(e),function(e){if(e.collaboratorDetails.length>0)return"+ "+e.collaboratorDetails.length+" collaborators"}(e),n,r,r)}(e)})},Wi=function(e,t,n){return e.map(function(e){return function(e,t,n){return function(){var e=document.createElement("div");e.onclick=arguments[3],e.setAttribute("class","fl w-100 w-25-l w-third-m h5 link black mb4");var t=document.createElement("div");t.setAttribute("class","h-100 dropshadow bg-near-white ma2 tc pa3");var n=document.createElement("img");n.setAttribute("src",arguments[0]+arguments[1]),n.setAttribute("class","br-100 h4 w4 dib pa2");var r=document.createElement("h1");return r.setAttribute("class","f3 mb2"),ri(r,[arguments[2]]),ri(t,["\n                ",n,"\n                ",r,"\n            "]),ri(e,["\n            ",t,"\n        "]),e}("/assets/",e.emojis[e.selectedEmoji],e.username,function(t){n("pushState","/users/"+e.username)})}(e,0,n)})},Vi=function(e,t,n){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 flex flex-row justify-center pa4 mt4");var t=document.createElement("button");return t.onclick=arguments[0],t.setAttribute("class","w-100 mw5 pa2 h3 bn bg-yellow navy dropshadow"),ri(t,["Load More"]),ri(e,["\n    ",t,"\n    "]),e}(function(t){n(e)})},Bi=function(e,t){switch("nautilists - links"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - links"),e.route){case"links":return function(e,t){return"nautilists - links"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - links"),function(){var e=document.createElement("body");e.onload=arguments[3],e.setAttribute("class",arguments[4]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]),ri(t,["\n      ",arguments[1],"\n      ",arguments[2],"\n  "]),ri(e,["\n  ",arguments[5],"\n  ",t,"\n  ",arguments[6],"\n  ",arguments[7],"\n  ",arguments[8],"\n  ",arguments[9],"\n  ",arguments[10],"\n"]),e}($r.main,function(e,t){var n,r,i=e.main.links,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no links yet"]),o=r):o=Ui(i.data),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Recent Links"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),ri(n,["\n    ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e),Vi("LINKS_FIND_MORE",0,t),function(){return t("LINKS_FIND")},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t))}(e,t);case"links/:_id":return function(e,t){return"nautilists - links"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - links"),function(){var e=document.createElement("body");e.onload=arguments[1],e.setAttribute("class",arguments[2]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]),ri(t,["\n      \n  "]),ri(e,["\n  ",arguments[3],"\n  ",t,"\n  ",arguments[4],"\n  ",arguments[5],"\n  ",arguments[6],"\n  ",arguments[7],"\n  ",arguments[8],"\n"]),e}($r.main,function(){return t("LINKS_FIND")},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t))}(e,t);default:return ri(n=document.createElement("body"),["nothing found"]),n}var n};function qi(e,t){return function(e){var n=e.target.value,r=e.target.name;t("modal_handle_keyup",{modalName:"editFeatureModal",prop:r,val:n})}}var Ki=function(e,t){if(!0===e.modals.editFeatureModal.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245, 1)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Edit Feature"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("EDITFEATUREMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll justify-center");var t=document.createElement("section");return t.setAttribute("class",arguments[0]),ri(t,["\n            ",arguments[1],"\n            "]),ri(e,["\n            ",t,"\n        "]),e}($r.sectionmw7,function(e,t){return function(){var e=document.createElement("form");return e.setAttribute("id","AddListForm"),e.onsubmit=arguments[0],ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n            ",arguments[3],"\n            ",arguments[4],"\n            ",arguments[5],"\n        "]),e}(function(e,t){return function(e){e.preventDefault(),t("EDITFEATUREMODAL_SUBMIT")}}(0,t),function(e,t){return"links"!==e.modals.editFeatureModal.prop?"":function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["URL"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","url"),n.setAttribute("type","text"),n.setAttribute("placeholder","https://itp.nyu.edu"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.editFeatureModal.url,qi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Name"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","name"),n.setAttribute("type","text"),n.setAttribute("placeholder","e.g. Title of URL"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.editFeatureModal.name,qi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Description"]);var n=document.createElement("textarea");return n.onkeyup=arguments[1],n.setAttribute("name","description"),n.setAttribute("placeholder","A description to go with the magic"),n.setAttribute("class",arguments[2]),ri(n,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,qi(0,t),$r.modalInput,e.modals.editFeatureModal.description,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Tags"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","tags"),n.setAttribute("type","text"),n.setAttribute("placeholder","creative, coding, javascript"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.editFeatureModal.tags,qi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(){var e=document.createElement("div");e.setAttribute("class","w-100 mt4 flex flex-row justify-end");var t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value","Submit"),t.setAttribute("class",arguments[0]),ri(e,["\n            ",t,"\n        "]),e}($r.submitButton))}(e,t))}(e,t))},$i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),zi=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.local=n.components[e]={},i.state=n,i.emit=r,i.addByUrl=i.addByUrl.bind(i),i.searchByName=i.searchByName.bind(i),i.searchResults=i.searchResults.bind(i),i.selectAndAdd=i.selectAndAdd.bind(i),i.showCurrentCollaborators=i.showCurrentCollaborators.bind(i),i.removeCollaborator=i.removeCollaborator.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ni),$i(t,[{key:"addByUrl",value:function(e){var t=this;e.preventDefault();var n=this.state.main.selected.lists._id,r=new FormData(e.currentTarget).get("url").split("/").slice(-1).pop();this.state.api.users.find({query:{username:r}}).then(function(e){if(!(!e.data.length>0)){var r={$push:{collaborators:e.data[0]._id}};return t.state.api.lists.patch(n,r)}alert("user not found!")}).then(function(e){alert("added collaborator!"),t.emit("LISTS_GET",n),t.emit("render")}).catch(function(e){return alert(e),e})}},{key:"searchByName",value:function(e){var t=this;e.preventDefault();var n={query:{$search:new FormData(e.currentTarget).get("username")}};this.state.api.users.find(n).then(function(e){t.state.modals.addCollaboratorModal.searchResults=e.data,t.emit("render")}).catch(function(e){return alert(e),e})}},{key:"selectAndAdd",value:function(e){var t=this,n=e.currentTarget.dataset.userid,r=this.state.main.selected.lists._id,i={$push:{collaborators:n}};this.state.api.lists.patch(r,i,{}).then(function(e){return alert("user added as collaborator!"),t.state.api.lists.get(e._id)}).then(function(e){t.state.main.selected.lists=e,t.state.modals.addCollaboratorModal.searchResults=[],t.showCurrentCollaborators(),t.emit("render")}).catch(function(e){alert(e)})}},{key:"searchResults",value:function(){var e=this,t=this.state.modals.addCollaboratorModal.searchResults;return t.length>0?t.map(function(t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 bn bg-light-gray flex flex-column mb2");var t=document.createElement("div");t.setAttribute("class","w-100 pa2 flex flex-row items-center");var n=document.createElement("div");n.setAttribute("class","w-two-thirds");var r=document.createElement("p");r.setAttribute("class"," w-100 ma0 b"),ri(r,[arguments[0]]),ri(n,["\n              ",r,"\n              "]);var i=document.createElement("div");i.setAttribute("class","w-third tr");var o=document.createElement("button");return o.setAttribute("data-userid",arguments[1]),o.onclick=arguments[2],o.setAttribute("class","dropshadow pa2 bg-dark-pink white bn"),ri(o,["Select"]),ri(i,["\n              ",o,"\n              "]),ri(t,["\n              ",n,"\n              ",i,"\n            "]),ri(e,["\n            ",t,"\n          "]),e}(t.username,t._id,e.selectAndAdd)}):""}},{key:"removeCollaborator",value:function(e){var t=this;return function(n){var r={$pull:{collaborators:n.currentTarget.dataset.userid}};!0===confirm("do you really want to remove this collaborator?")&&t.state.api.lists.patch(e,r,{}).then(function(e){t.state.main.selected.lists=e,t.emit("render")}).catch(function(e){return alert("error removing collaborator",e),e})}}},{key:"showCurrentCollaborators",value:function(){var e=this,t=this.state.main.selected.lists._id,n=this.state.main.selected.lists;return n.hasOwnProperty("collaboratorDetails")&&n.collaboratorDetails.length>0?n.collaboratorDetails.map(function(n){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 bn bg-light-gray flex flex-column mb2");var t=document.createElement("div");t.setAttribute("class","w-100 pa2 flex flex-row items-center");var n=document.createElement("div");n.setAttribute("class","w-two-thirds");var r=document.createElement("p");r.setAttribute("class"," w-100 ma0 b"),ri(r,[arguments[0]]),ri(n,["\n          ",r,"\n          "]);var i=document.createElement("div");i.setAttribute("class","w-third tr");var o=document.createElement("button");return o.setAttribute("data-userid",arguments[1]),o.onclick=arguments[2],o.setAttribute("class","dropshadow pa2 bg-near-white red bn"),ri(o,["Remove"]),ri(i,["\n          ",o,"\n          "]),ri(t,["\n          ",n,"\n          ",i,"\n        "]),ri(e,["\n        ",t,"\n      "]),e}(n.username,n._id,e.removeCollaborator(t))}):"no collaborators yet"}},{key:"ModalHeader",value:function(){var e=this;return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Add Collaborators"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return e.emit("ADDCOLLABORATORMODAL_TOGGLE")})}},{key:"ModalMain",value:function(){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll justify-center");var t=document.createElement("section");t.setAttribute("class","w-50-ns w-100 h-100 pa2 pl4 pr4 bw1 br");var n=document.createComment(" Current Collaborators "),r=document.createElement("h3");ri(r,["Current Collaborators"]),ri(t,["\n                ",n,"\n                ",r,"\n                ",arguments[0],"\n                \n            "]);var i=document.createElement("section");i.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4");var o=document.createComment(" By URL section "),a=document.createElement("section");a.setAttribute("class","w-100 mt2 mb2");var s=document.createElement("h3");ri(s,["Add Collaborator by their profile URL"]);var u=document.createElement("form");u.setAttribute("id","addByUrlForm-collaborator"),u.setAttribute("name","addByUrlForm-collaborator"),u.onsubmit=arguments[1];var c=document.createComment(" url input "),l=document.createElement("fieldset");l.setAttribute("class","w-100 ba bw1 b--black");var d=document.createElement("legend");ri(d,["URL"]);var f=document.createElement("div");f.setAttribute("class","w-100 flex flex-row-ns flex-column items-center");var h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("name","url"),h.setAttribute("placeholder","https://www.nautilists.com/users/shiffman"),h.setAttribute("class","w-100 b--moon-grey w-two-thirds-ns pl2 pr2 ba bw1 bg-light-gray h3 f6");var m=document.createElement("input");m.setAttribute("form","addByUrlForm-collaborator"),m.setAttribute("type","submit"),m.setAttribute("value","add collaborator"),m.setAttribute("class","w-100 w-third-ns h3 pa2 bg-light-pink navy dropshadow bn mt2 ma0-ns"),ri(f,["\n              ",h,"\n              ",m,"\n              "]),ri(l,["\n              ",d,"\n              ",f,"\n              "]),ri(u,["\n              ",c,"\n              ",l,"\n            "]);var p=document.createComment(" Search section "),v=document.createElement("section");v.setAttribute("class","w-100 mt2 mb2");var b=document.createElement("h3");ri(b,["Add Collaborator by searching for their username"]);var y=document.createComment(" Search bar "),g=document.createElement("form");g.setAttribute("id","searchByName-collaborator"),g.setAttribute("name","searchByName"),g.onsubmit=arguments[2];var w=document.createElement("fieldset");w.setAttribute("class","w-100 ba bw1 b--black");var E=document.createElement("legend");ri(E,["Search"]);var A=document.createElement("div");A.setAttribute("class","w-100 flex flex-row-ns flex-column items-center");var _=document.createElement("input");_.setAttribute("type","search"),_.setAttribute("name","username"),_.setAttribute("placeholder","e.g. shiffman"),_.setAttribute("class","w-100 b--moon-grey w-two-thirds-ns pl2 pr2 ba bw1 bg-light-gray h3 f6");var S=document.createElement("input");S.setAttribute("form","searchByName-collaborator"),S.setAttribute("type","submit"),S.setAttribute("value","search"),S.setAttribute("class","w-100 w-third-ns h3 pa2 bg-light-pink navy dropshadow bn bw2 mt2 ma0-ns"),ri(A,["\n              ",_,"\n              ",S,"\n              "]),ri(w,["\n              ",E,"\n              ",A,"\n              "]),ri(g,["\n              ",w,"\n              "]),ri(v,["\n              ",b,"\n              ",y,"\n              ",g,"\n            "]);var k=document.createComment(" Search results "),O=document.createElement("section");return O.setAttribute("id","searchResults-collaborator"),O.setAttribute("class","flex flex-column h5 overflow-y-scroll"),ri(O,["\n                ",arguments[3],"\n                "]),ri(a,["\n              ",s,"\n              ",u,"\n            \n            ",p,"\n            ",v,"\n            ",k,"\n                ",O,"\n            "]),ri(i,["\n            ",o,"\n            ",a,"\n        "]),ri(e,["\n            \n            ",t,"\n\n\n            ",i,"\n    "]),e}(this.showCurrentCollaborators(),this.addByUrl,this.searchByName,this.searchResults())}},{key:"createElement",value:function(){var e=this;return!0===this.state.modals.addCollaboratorModal.displayed?function(){var e=document.createElement("div");e.setAttribute("style","background:rgba(232, 253, 245, 1)"),e.setAttribute("class",arguments[1]);var t=document.createComment(" invisible div under the modal to capture out of modal click to close "),n=document.createElement("div");return n.onclick=arguments[0],n.setAttribute("class","dn w-100 h-100 fixed top-0 left-0"),ri(e,["\n      \n        ",arguments[2],"\n        \n        ",arguments[3],"\n        \n      ",t,"\n      ",n,"\n    "]),e}(function(){return e.emit("ADDCOLLABORATORMODAL_TOGGLE")},$r.modalContainer,this.ModalHeader(),this.ModalMain()):document.createElement("div")}},{key:"update",value:function(){return!0}}]),t}();function Ji(e,t){return function(e){var n=e.target.value,r=e.target.name;t("modal_handle_keyup",{modalName:"addSectionLinksModal",prop:r,val:n})}}function Zi(e,t){return function(e){var n=e.target.value,r=e.target.name;t("modal_handle_keyup",{modalName:"addSectionModal",prop:r,val:n})}}var Xi,Qi={exports:{}},eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Xi=function(){"use strict";var e,t;function n(){return e.apply(null,arguments)}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,n,r){return Ct(e,t,n,r,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function h(e){if(null==e._isValid){var n=f(e),r=t.call(n.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&r);if(e._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=d(NaN);return null!=e?l(f(t),e):f(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var p=n.momentProperties=[];function v(e,t){var n,r,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),p.length>0)for(n=0;n<p.length;n++)o(i=t[r=p[n]])||(e[r]=i);return e}var b=!1;function y(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,n.updateOffset(this),b=!1)}function g(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function E(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function A(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&E(e[r])!==E(t[r]))&&a++;return a+o}function _(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var r=!0;return l(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"===eo(arguments[a])){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}_(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)},t)}var k,O={};function T(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),O[e]||(_(t),O[e]=!0)}function C(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var n,r=l({},e);for(n in t)c(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},l(r[n],e[n]),l(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&i(e[n])&&(r[n]=l({},r[n]));return r}function L(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,k=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var M={};function x(e,t){var n=e.toLowerCase();M[n]=M[n+"s"]=M[t]=e}function I(e){return"string"==typeof e?M[e]||M[e.toLowerCase()]:void 0}function N(e){var t,n,r={};for(n in e)c(e,n)&&(t=I(n))&&(r[t]=e[n]);return r}var F={};function P(e,t){F[e]=t}function j(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Y={},U={};function H(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function W(e,t){return e.isValid()?(t=V(t,e.localeData()),Y[t]=Y[t]||function(e){var t,n,r,i=e.match(R);for(t=0,n=i.length;t<n;t++)U[i[t]]?i[t]=U[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=C(i[r])?i[r].call(t,e):i[r];return o}}(t),Y[t](e)):e.localeData().invalidDate()}function V(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;n>=0&&G.test(e);)e=e.replace(G,r),G.lastIndex=0,n-=1;return e}var B=/\d/,q=/\d\d/,K=/\d{3}/,$=/\d{4}/,z=/[+-]?\d{6}/,J=/\d\d?/,Z=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,Q=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,re=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,oe=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,se={};function ue(e,t,n){se[e]=C(t)?t:function(e,r){return e&&n?n:t}}function ce(e,t){return c(se,e)?se[e](t._strict,t._locale):new RegExp(le(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})))}function le(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var de={};function fe(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),a(t)&&(r=function(e,n){n[t]=E(e)}),n=0;n<e.length;n++)de[e[n]]=r}function he(e,t){fe(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function me(e,t,n){null!=t&&c(de,e)&&de[e](t,n._a,n,e)}var pe=0,ve=1,be=2,ye=3,ge=4,we=5,Ee=6,Ae=7,_e=8;function Se(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}H("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),x("year","y"),P("year",1),ue("Y",re),ue("YY",J,q),ue("YYYY",ee,$),ue("YYYYY",te,z),ue("YYYYYY",te,z),fe(["YYYYY","YYYYYY"],pe),fe("YYYY",function(e,t){t[pe]=2===e.length?n.parseTwoDigitYear(e):E(e)}),fe("YY",function(e,t){t[pe]=n.parseTwoDigitYear(e)}),fe("Y",function(e,t){t[pe]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)};var Oe,Te=Ce("FullYear",!0);function Ce(e,t){return function(r){return null!=r?(Le(this,e,r),n.updateOffset(this,t),this):De(this,e)}}function De(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Le(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Me(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Me(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%12+12)%12;return e+=(t-n)/12,1===n?ke(e)?29:28:31-n%7%2}Oe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),H("MMMM",0,0,function(e){return this.localeData().months(this,e)}),x("month","M"),P("month",8),ue("M",J),ue("MM",J,q),ue("MMM",function(e,t){return t.monthsShortRegex(e)}),ue("MMMM",function(e,t){return t.monthsRegex(e)}),fe(["M","MM"],function(e,t){t[ve]=E(e)-1}),fe(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ve]=i:f(n).invalidMonth=e});var xe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Fe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=E(t);else if(!a(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Me(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Pe(e){return null!=e?(Fe(this,e),n.updateOffset(this,!0),this):De(this,"Month")}var je=ae,Re=ae;function Ge(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=d([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=le(r[t]),i[t]=le(i[t]);for(t=0;t<24;t++)o[t]=le(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ye(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Ue(e,t,n){var r=7+t-n;return-(7+Ye(e,0,r).getUTCDay()-t)%7+r-1}function He(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+Ue(e,r,i);return s<=0?a=Se(o=e-1)+s:s>Se(e)?(o=e+1,a=s-Se(e)):(o=e,a=s),{year:o,dayOfYear:a}}function We(e,t,n){var r,i,o=Ue(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+Ve(i=e.year()-1,t,n):a>Ve(e.year(),t,n)?(r=a-Ve(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Ve(e,t,n){var r=Ue(e,t,n),i=Ue(e+1,t,n);return(Se(e)-r+i)/7}function Be(e,t){return e.slice(t,7).concat(e.slice(0,t))}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),x("week","w"),x("isoWeek","W"),P("week",5),P("isoWeek",5),ue("w",J),ue("ww",J,q),ue("W",J),ue("WW",J,q),he(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=E(e)}),H("d",0,"do","day"),H("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),H("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),H("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),x("day","d"),x("weekday","e"),x("isoWeekday","E"),P("day",11),P("weekday",11),P("isoWeekday",11),ue("d",J),ue("e",J),ue("E",J),ue("dd",function(e,t){return t.weekdaysMinRegex(e)}),ue("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ue("dddd",function(e,t){return t.weekdaysRegex(e)}),he(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),he(["d","e","E"],function(e,t,n,r){t[r]=E(e)});var qe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ze=ae,Je=ae,Ze=ae;function Xe(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],c=[];for(t=0;t<7;t++)n=d([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),c.push(r),c.push(i),c.push(o);for(a.sort(e),s.sort(e),u.sort(e),c.sort(e),t=0;t<7;t++)s[t]=le(s[t]),u[t]=le(u[t]),c[t]=le(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Qe(){return this.hours()%12||12}function et(e,t){H(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function tt(e,t){return t._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,Qe),H("k",["kk",2],0,function(){return this.hours()||24}),H("hmm",0,0,function(){return""+Qe.apply(this)+j(this.minutes(),2)}),H("hmmss",0,0,function(){return""+Qe.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),et("a",!0),et("A",!1),x("hour","h"),P("hour",13),ue("a",tt),ue("A",tt),ue("H",J),ue("h",J),ue("k",J),ue("HH",J,q),ue("hh",J,q),ue("kk",J,q),ue("hmm",Z),ue("hmmss",X),ue("Hmm",Z),ue("Hmmss",X),fe(["H","HH"],ye),fe(["k","kk"],function(e,t,n){var r=E(e);t[ye]=24===r?0:r}),fe(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),fe(["h","hh"],function(e,t,n){t[ye]=E(e),f(n).bigHour=!0}),fe("hmm",function(e,t,n){var r=e.length-2;t[ye]=E(e.substr(0,r)),t[ge]=E(e.substr(r)),f(n).bigHour=!0}),fe("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ye]=E(e.substr(0,r)),t[ge]=E(e.substr(r,2)),t[we]=E(e.substr(i)),f(n).bigHour=!0}),fe("Hmm",function(e,t,n){var r=e.length-2;t[ye]=E(e.substr(0,r)),t[ge]=E(e.substr(r))}),fe("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ye]=E(e.substr(0,r)),t[ge]=E(e.substr(r,2)),t[we]=E(e.substr(i))});var nt,rt=Ce("Hours",!0),it={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ie,monthsShort:Ne,week:{dow:0,doy:6},weekdays:qe,weekdaysMin:$e,weekdaysShort:Ke,meridiemParse:/[ap]\.?m?\.?/i},ot={},at={};function st(e){return e?e.toLowerCase().replace("_","-"):e}function ut(e){var t=null;if(!ot[e]&&Qi&&Qi.exports)try{t=nt._abbr,require("./locale/"+e),ct(t)}catch(po){}return ot[e]}function ct(e,t){var n;return e&&((n=o(t)?dt(e):lt(e,t))?nt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),nt._abbr}function lt(e,t){if(null!==t){var n,r=it;if(t.abbr=e,null!=ot[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ot[e]._config;else if(null!=t.parentLocale)if(null!=ot[t.parentLocale])r=ot[t.parentLocale]._config;else{if(null==(n=ut(t.parentLocale)))return at[t.parentLocale]||(at[t.parentLocale]=[]),at[t.parentLocale].push({name:e,config:t}),null;r=n._config}return ot[e]=new L(D(r,t)),at[e]&&at[e].forEach(function(e){lt(e.name,e.config)}),ct(e),ot[e]}return delete ot[e],null}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return nt;if(!r(e)){if(t=ut(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=st(e[o]).split("-")).length,n=(n=st(e[o+1]))?n.split("-"):null;t>0;){if(r=ut(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&A(i,n,!0)>=t-1)break;t--}o++}return nt}(e)}function ft(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ve]<0||n[ve]>11?ve:n[be]<1||n[be]>Me(n[pe],n[ve])?be:n[ye]<0||n[ye]>24||24===n[ye]&&(0!==n[ge]||0!==n[we]||0!==n[Ee])?ye:n[ge]<0||n[ge]>59?ge:n[we]<0||n[we]>59?we:n[Ee]<0||n[Ee]>999?Ee:-1,f(e)._overflowDayOfYear&&(t<pe||t>be)&&(t=be),f(e)._overflowWeeks&&-1===t&&(t=Ae),f(e)._overflowWeekday&&-1===t&&(t=_e),f(e).overflow=t),e}function ht(e,t,n){return null!=e?e:null!=t?t:n}function mt(e){var t,r,i,o,a,s=[];if(!e._d){for(i=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[be]&&null==e._a[ve]&&function(e){var t,n,r,i,o,a,s,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,n=ht(t.GG,e._a[pe],We(Dt(),1,4).year),r=ht(t.W,1),((i=ht(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var c=We(Dt(),o,a);n=ht(t.gg,e._a[pe],c.year),r=ht(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>Ve(n,o,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(s=He(n,r,i,o,a),e._a[pe]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=ht(e._a[pe],i[pe]),(e._dayOfYear>Se(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),r=Ye(a,0,e._dayOfYear),e._a[ve]=r.getUTCMonth(),e._a[be]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ye]&&0===e._a[ge]&&0===e._a[we]&&0===e._a[Ee]&&(e._nextDay=!0,e._a[ye]=0),e._d=(e._useUTC?Ye:function(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ye]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(f(e).weekdayMismatch=!0)}}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((\-?\d+)/i;function Et(e){var t,n,r,i,o,a,s=e._i,u=pt.exec(s)||vt.exec(s);if(u){for(f(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],r=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){o=(u[2]||" ")+gt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!bt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),Ot(e)}else e._isValid=!1}var At=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function _t(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,n,r,i,o,a,s,u=At.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){var c=(t=u[4],n=u[3],r=u[2],i=u[5],o=u[6],a=u[7],s=[_t(t),Ne.indexOf(n),parseInt(r,10),parseInt(i,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),s);if(!function(e,t,n){return!e||Ke.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}(u[1],c,e))return;e._a=c,e._tzm=function(e,t,n){if(e)return St[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(u[8],u[9],u[10]),e._d=Ye.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function Ot(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,r,i,o,a,s=""+e._i,u=s.length,c=0;for(i=V(e._f,e._locale).match(R)||[],t=0;t<i.length;t++)o=i[t],(r=(s.match(ce(o,e))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&f(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),U[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),me(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-c,s.length>0&&f(e).unusedInput.push(s),e._a[ye]<=12&&!0===f(e).bigHour&&e._a[ye]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[ye]=(l=e._locale,d=e._a[ye],null==(h=e._meridiem)?d:null!=l.meridiemHour?l.meridiemHour(d,h):null!=l.isPM?((m=l.isPM(h))&&d<12&&(d+=12),m||12!==d||(d=0),d):d),mt(e),ft(e)}else kt(e);else Et(e);var l,d,h,m}function Tt(e){var t=e._i,c=e._f;return e._locale=e._locale||dt(e._l),null===t||void 0===c&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new y(ft(t)):(s(t)?e._d=t:r(c)?function(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Ot(t),h(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));l(e,n||t)}(e):c?Ot(e):function(e){var t=e._i;o(t)?e._d=new Date(n.now()):s(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=wt.exec(e._i);null===t?(Et(e),!1===e._isValid&&(delete e._isValid,kt(e),!1===e._isValid&&(delete e._isValid,n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):r(t)?(e._a=u(t.slice(0),function(e){return parseInt(e,10)}),mt(e)):i(t)?function(e){if(!e._d){var t=N(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),mt(e)}}(e):a(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),h(e)||(e._d=null),e))}function Ct(e,t,n,o,a){var s,u={};return!0!==n&&!1!==n||(o=n,n=void 0),(i(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||r(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=n,u._i=e,u._f=t,u._strict=o,(s=new y(ft(Tt(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Dt(e,t,n,r){return Ct(e,t,n,r,!1)}n.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Lt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Mt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()});function xt(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Dt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var It=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Nt(e){var t=N(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Oe.call(It,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<It.length;++r)if(e[It[r]]){if(n)return!1;parseFloat(e[It[r]])!==E(e[It[r]])&&(n=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=dt(),this._bubble()}function Ft(e){return e instanceof Nt}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function jt(e,t){H(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}jt("Z",":"),jt("ZZ",""),ue("Z",oe),ue("ZZ",oe),fe(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Gt(oe,e)});var Rt=/([\+\-]|\d\d)/gi;function Gt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Rt)||["-",0,0],i=60*r[1]+E(r[2]);return 0===i?0:"+"===r[0]?i:-i}function Yt(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(g(e)||s(e)?e.valueOf():Dt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),n.updateOffset(r,!1),r):Dt(e).local()}function Ut(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var Wt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Vt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(e,t){var n,r,i,o,s,u,l=e,d=null;return Ft(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(l={},t?l[t]=e:l.milliseconds=e):(d=Wt.exec(e))?(n="-"===d[1]?-1:1,l={y:0,d:E(d[be])*n,h:E(d[ye])*n,m:E(d[ge])*n,s:E(d[we])*n,ms:E(Pt(1e3*d[Ee]))*n}):(d=Vt.exec(e))?(n="-"===d[1]?-1:1,l={y:qt(d[2],n),M:qt(d[3],n),w:qt(d[4],n),d:qt(d[5],n),h:qt(d[6],n),m:qt(d[7],n),s:qt(d[8],n)}):null==l?l={}:"object"===(void 0===l?"undefined":eo(l))&&("from"in l||"to"in l)&&(o=Dt(l.from),s=Dt(l.to),i=o.isValid()&&s.isValid()?(s=Yt(s,o),o.isBefore(s)?u=Kt(o,s):((u=Kt(s,o)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new Nt(l),Ft(e)&&c(e,"_locale")&&(r._locale=e._locale),r}function qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Kt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),zt(this,Bt(n="string"==typeof n?+n:n,r),e),this}}function zt(e,t,r,i){var o=t._milliseconds,a=Pt(t._days),s=Pt(t._months);e.isValid()&&(i=null==i||i,s&&Fe(e,De(e,"Month")+s*r),a&&Le(e,"Date",De(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&n.updateOffset(e,a||s))}Bt.fn=Nt.prototype,Bt.invalid=function(){return Bt(NaN)};var Jt=$t(1,"add"),Zt=$t(-1,"subtract");function Xt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Qt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var en=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function tn(){return this._locale}var nn=126227808e5;function rn(e,t){return(e%t+t)%t}function on(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-nn:new Date(e,t,n).valueOf()}function an(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-nn:Date.UTC(e,t,n)}function sn(e,t){H(0,[e,e.length],0,t)}function un(e,t,n,r,i){var o;return null==e?We(this,r,i).year:(t>(o=Ve(e,r,i))&&(t=o),function(e,t,n,r,i){var o=He(e,t,n,r,i),a=Ye(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,r,i))}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),x("weekYear","gg"),x("isoWeekYear","GG"),P("weekYear",1),P("isoWeekYear",1),ue("G",re),ue("g",re),ue("GG",J,q),ue("gg",J,q),ue("GGGG",ee,$),ue("gggg",ee,$),ue("GGGGG",te,z),ue("ggggg",te,z),he(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=E(e)}),he(["gg","GG"],function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),x("quarter","Q"),P("quarter",7),ue("Q",B),fe("Q",function(e,t){t[ve]=3*(E(e)-1)}),H("D",["DD",2],"Do","date"),x("date","D"),P("date",9),ue("D",J),ue("DD",J,q),ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),fe(["D","DD"],be),fe("Do",function(e,t){t[be]=E(e.match(J)[0])});var cn=Ce("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),x("dayOfYear","DDD"),P("dayOfYear",4),ue("DDD",Q),ue("DDDD",K),fe(["DDD","DDDD"],function(e,t,n){n._dayOfYear=E(e)}),H("m",["mm",2],0,"minute"),x("minute","m"),P("minute",14),ue("m",J),ue("mm",J,q),fe(["m","mm"],ge);var ln=Ce("Minutes",!1);H("s",["ss",2],0,"second"),x("second","s"),P("second",15),ue("s",J),ue("ss",J,q),fe(["s","ss"],we);var dn,fn=Ce("Seconds",!1);for(H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),x("millisecond","ms"),P("millisecond",16),ue("S",Q,B),ue("SS",Q,q),ue("SSS",Q,K),dn="SSSS";dn.length<=9;dn+="S")ue(dn,ne);function hn(e,t){t[Ee]=E(1e3*("0."+e))}for(dn="S";dn.length<=9;dn+="S")fe(dn,hn);var mn=Ce("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var pn=y.prototype;function vn(e){return e}pn.add=Jt,pn.calendar=function(e,t){var r=e||Dt(),i=Yt(r,this).startOf("day"),o=n.calendarFormat(this,i)||"sameElse",a=t&&(C(t[o])?t[o].call(this,r):t[o]);return this.format(a||this.localeData().calendar(o,this,Dt(r)))},pn.clone=function(){return new y(this)},pn.diff=function(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Yt(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=I(t)){case"year":o=Xt(this,r)/12;break;case"month":o=Xt(this,r);break;case"quarter":o=Xt(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:w(o)},pn.endOf=function(e){var t;if(void 0===(e=I(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?an:on;switch(e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-rn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-rn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-rn(t,1e3)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},pn.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)},pn.from=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||Dt(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.fromNow=function(e){return this.from(Dt(),e)},pn.to=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||Dt(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.toNow=function(e){return this.to(Dt(),e)},pn.get=function(e){return C(this[e=I(e)])?this[e]():this},pn.invalidAt=function(){return f(this).overflow},pn.isAfter=function(e,t){var n=g(e)?e:Dt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},pn.isBefore=function(e,t){var n=g(e)?e:Dt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},pn.isBetween=function(e,t,n,r){var i=g(e)?e:Dt(e),o=g(t)?t:Dt(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},pn.isSame=function(e,t){var n,r=g(e)?e:Dt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=I(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},pn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},pn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},pn.isValid=function(){return h(this)},pn.lang=en,pn.locale=Qt,pn.localeData=tn,pn.max=Mt,pn.min=Lt,pn.parsingFlags=function(){return l({},f(this))},pn.set=function(e,t){if("object"===(void 0===e?"undefined":eo(e)))for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:F[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=N(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(C(this[e=I(e)]))return this[e](t);return this},pn.startOf=function(e){var t;if(void 0===(e=I(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?an:on;switch(e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=rn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=rn(t,6e4);break;case"second":t=this._d.valueOf(),t-=rn(t,1e3)}return this._d.setTime(t),n.updateOffset(this,!0),this},pn.subtract=Zt,pn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},pn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1e3)},pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.year=Te,pn.isLeapYear=function(){return ke(this.year())},pn.weekYear=function(e){return un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(e){return un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},pn.month=Pe,pn.daysInMonth=function(){return Me(this.year(),this.month())},pn.week=pn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},pn.isoWeek=pn.isoWeeks=function(e){var t=We(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},pn.weeksInYear=function(){var e=this.localeData()._week;return Ve(this.year(),e.dow,e.doy)},pn.isoWeeksInYear=function(){return Ve(this.year(),1,4)},pn.date=cn,pn.day=pn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},pn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},pn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},pn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},pn.hour=pn.hours=rt,pn.minute=pn.minutes=ln,pn.second=pn.seconds=fn,pn.millisecond=pn.milliseconds=mn,pn.utcOffset=function(e,t,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Gt(oe,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(i=Ut(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?zt(this,Bt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Ut(this)},pn.utc=function(e){return this.utcOffset(0,e)},pn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ut(this),"m")),this},pn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Gt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},pn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Dt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pn.isUtc=Ht,pn.isUTC=Ht,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=S("dates accessor is deprecated. Use date instead.",cn),pn.months=S("months accessor is deprecated. Use month instead",Pe),pn.years=S("years accessor is deprecated. Use year instead",Te),pn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),pn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=Tt(e))._a){var t=e._isUTC?d(e._a):Dt(e._a);this._isDSTShifted=this.isValid()&&A(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var bn=L.prototype;function yn(e,t,n,r){var i=dt(),o=d().set(r,t);return i[n](o,e)}function gn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return yn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=yn(e,r,n,"month");return i}function wn(e,t,n,r){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i,o=dt(),s=e?o._week.dow:0;if(null!=n)return yn(t,(n+s)%7,r,"day");var u=[];for(i=0;i<7;i++)u[i]=yn(t,(i+s)%7,r,"day");return u}bn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return C(r)?r.call(t,n):r},bn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},bn.invalidDate=function(){return this._invalidDate},bn.ordinal=function(e){return this._ordinal.replace("%d",e)},bn.preparse=vn,bn.postformat=vn,bn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return C(i)?i(e,t,n,r):i.replace(/%d/i,e)},bn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return C(n)?n(t):n.replace(/%s/i,t)},bn.set=function(e){var t,n;for(n in e)C(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},bn.months=function(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||xe).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone},bn.monthsShort=function(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[xe.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},bn.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Oe.call(this._shortMonthsParse,a))?i:null:-1!==(i=Oe.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Oe.call(this._shortMonthsParse,a))?i:-1!==(i=Oe.call(this._longMonthsParse,a))?i:null:-1!==(i=Oe.call(this._longMonthsParse,a))?i:-1!==(i=Oe.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},bn.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Re),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},bn.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=je),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},bn.week=function(e){return We(e,this._week.dow,this._week.doy).week},bn.firstDayOfYear=function(){return this._week.doy},bn.firstDayOfWeek=function(){return this._week.dow},bn.weekdays=function(e,t){var n=r(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Be(n,this._week.dow):e?n[e.day()]:n},bn.weekdaysMin=function(e){return!0===e?Be(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},bn.weekdaysShort=function(e){return!0===e?Be(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},bn.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Oe.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Oe.call(this._weekdaysParse,a))?i:-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:-1!==(i=Oe.call(this._weekdaysParse,a))?i:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Oe.call(this._minWeekdaysParse,a))?i:-1!==(i=Oe.call(this._weekdaysParse,a))?i:-1!==(i=Oe.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},bn.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=ze),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},bn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},bn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},bn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},bn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ct("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===E(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=S("moment.lang is deprecated. Use moment.locale instead.",ct),n.langData=S("moment.langData is deprecated. Use moment.localeData instead.",dt);var En=Math.abs;function An(e,t,n,r){var i=Bt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function _n(e){return e<0?Math.floor(e):Math.ceil(e)}function Sn(e){return 4800*e/146097}function kn(e){return 146097*e/4800}function On(e){return function(){return this.as(e)}}var Tn=On("ms"),Cn=On("s"),Dn=On("m"),Ln=On("h"),Mn=On("d"),xn=On("w"),In=On("M"),Nn=On("Q"),Fn=On("y");function Pn(e){return function(){return this.isValid()?this._data[e]:NaN}}var jn=Pn("milliseconds"),Rn=Pn("seconds"),Gn=Pn("minutes"),Yn=Pn("hours"),Un=Pn("days"),Hn=Pn("months"),Wn=Pn("years"),Vn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,M:11},qn=Math.abs;function Kn(e){return(e>0)-(e<0)||+e}function $n(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=qn(this._milliseconds)/1e3,r=qn(this._days),i=qn(this._months);e=w(n/60),t=w(e/60),n%=60,e%=60;var o=w(i/12),a=i%=12,s=r,u=t,c=e,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",h=Kn(this._months)!==Kn(d)?"-":"",m=Kn(this._days)!==Kn(d)?"-":"",p=Kn(this._milliseconds)!==Kn(d)?"-":"";return f+"P"+(o?h+o+"Y":"")+(a?h+a+"M":"")+(s?m+s+"D":"")+(u||c||l?"T":"")+(u?p+u+"H":"")+(c?p+c+"M":"")+(l?p+l+"S":"")}var zn=Nt.prototype;return zn.isValid=function(){return this._isValid},zn.abs=function(){var e=this._data;return this._milliseconds=En(this._milliseconds),this._days=En(this._days),this._months=En(this._months),e.milliseconds=En(e.milliseconds),e.seconds=En(e.seconds),e.minutes=En(e.minutes),e.hours=En(e.hours),e.months=En(e.months),e.years=En(e.years),this},zn.add=function(e,t){return An(this,e,t,1)},zn.subtract=function(e,t){return An(this,e,t,-1)},zn.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=I(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Sn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(kn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},zn.asMilliseconds=Tn,zn.asSeconds=Cn,zn.asMinutes=Dn,zn.asHours=Ln,zn.asDays=Mn,zn.asWeeks=xn,zn.asMonths=In,zn.asQuarters=Nn,zn.asYears=Fn,zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12):NaN},zn._bubble=function(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*_n(kn(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=w(o/1e3),u.seconds=e%60,t=w(e/60),u.minutes=t%60,n=w(t/60),u.hours=n%24,a+=w(n/24),s+=i=w(Sn(a)),a-=_n(kn(i)),r=w(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},zn.clone=function(){return Bt(this)},zn.get=function(e){return e=I(e),this.isValid()?this[e+"s"]():NaN},zn.milliseconds=jn,zn.seconds=Rn,zn.minutes=Gn,zn.hours=Yn,zn.days=Un,zn.weeks=function(){return w(this.days()/7)},zn.months=Hn,zn.years=Wn,zn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var r=Bt(e).abs(),i=Vn(r.as("s")),o=Vn(r.as("m")),a=Vn(r.as("h")),s=Vn(r.as("d")),u=Vn(r.as("M")),c=Vn(r.as("y")),l=i<=Bn.ss&&["s",i]||i<Bn.s&&["ss",i]||o<=1&&["m"]||o<Bn.m&&["mm",o]||a<=1&&["h"]||a<Bn.h&&["hh",a]||s<=1&&["d"]||s<Bn.d&&["dd",s]||u<=1&&["M"]||u<Bn.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,l)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},zn.toISOString=$n,zn.toString=$n,zn.toJSON=$n,zn.locale=Qt,zn.localeData=tn,zn.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),zn.lang=en,H("X",0,0,"unix"),H("x",0,0,"valueOf"),ue("x",re),ue("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),fe("x",function(e,t,n){n._d=new Date(E(e))}),n.version="2.24.0",e=Dt,n.fn=pn,n.min=function(){return xt("isBefore",[].slice.call(arguments,0))},n.max=function(){return xt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=d,n.unix=function(e){return Dt(1e3*e)},n.months=function(e,t){return gn(e,t,"months")},n.isDate=s,n.locale=ct,n.invalid=m,n.duration=Bt,n.isMoment=g,n.weekdays=function(e,t,n){return wn(e,t,n,"weekdays")},n.parseZone=function(){return Dt.apply(null,arguments).parseZone()},n.localeData=dt,n.isDuration=Ft,n.monthsShort=function(e,t){return gn(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return wn(e,t,n,"weekdaysMin")},n.defineLocale=lt,n.updateLocale=function(e,t){if(null!=t){var n,r,i=it;null!=(r=ut(e))&&(i=r._config),(n=new L(t=D(i,t))).parentLocale=ot[e],ot[e]=n,ct(e)}else null!=ot[e]&&(null!=ot[e].parentLocale?ot[e]=ot[e].parentLocale:null!=ot[e]&&delete ot[e]);return ot[e]},n.locales=function(){return k(ot)},n.weekdaysShort=function(e,t,n){return wn(e,t,n,"weekdaysShort")},n.normalizeUnits=I,n.relativeTimeRounding=function(e){return void 0===e?Vn:"function"==typeof e&&(Vn=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},n.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=pn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n},"object"===(void 0===Qi.exports?"undefined":eo(Qi.exports))?Qi.exports=Xi():"function"==typeof define&&define.amd?define(Xi):this.moment=Xi(),Qi=Qi.exports;var to={exports:{}},no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";"function"==typeof define&&define.amd?define(e):void 0!==to.exports?to.exports=e():window.Sortable=e()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,r,i,o,a,s,u,c,l,d,f,h,m,p,v,b,y,g,w,E,A,_,S,k,O,T,C=[],D=!1,L=!1,M=!1,x=[],I=!1,N=!1,F=[],P=/\s+/g,j="Sortable"+(new Date).getTime(),R=window,G=R.document,Y=R.parseInt,U=R.setTimeout,H=R.jQuery||R.Zepto,W=R.Polymer,V={capture:!1,passive:!1},B=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),q=!!navigator.userAgent.match(/Edge/i),K=!!navigator.userAgent.match(/firefox/i),$=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),z=!!navigator.userAgent.match(/iP(ad|od|hone)/i),J=q||B?"cssFloat":"float",Z="draggable"in G.createElement("div"),X=function(){if(B)return!1;var e=G.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),Q=!1,ee=!1,te=Math.abs,ne=Math.min,re=Math.max,ie=[],oe=function(e,t){var n=_e(e),r=Y(n.width)-Y(n.paddingLeft)-Y(n.paddingRight)-Y(n.borderLeftWidth)-Y(n.borderRightWidth),i=Le(e,0,t),o=Le(e,1,t),a=i&&_e(i),s=o&&_e(o),u=a&&Y(a.marginLeft)+Y(a.marginRight)+Ue(i).width,c=s&&Y(s.marginLeft)+Y(s.marginRight)+Ue(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&"none"!==a.float){var l="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==l?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||u>=r&&"none"===n[J]||o&&"none"===n[J]&&u+c>r)?"vertical":"horizontal"},ae=function(e,t){if(!e||!e.getBoundingClientRect)return se();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=_e(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n||!n.getBoundingClientRect||n===G.body)return se();if(r||t)return n;r=!0}}}while(n=n.parentNode);return se()},se=function(){return B?G.documentElement:G.scrollingElement},ue=function(e,t,n){e.scrollLeft+=t,e.scrollTop+=n},ce=Pe(function(e,t,n,r){if(t.scroll){var i=n?n[j]:window,o=t.scrollSensitivity,a=t.scrollSpeed,l=e.clientX,d=e.clientY,f=se(),h=!1;u!==n&&(le(),s=t.scroll,c=t.scrollFn,!0===s&&(s=ae(n,!0),u=s));var m=0,p=s;do{var v,b,y,g,E,A,_,S,k,O=p,T=Ue(O),L=T.top,M=T.bottom,x=T.left,I=T.right,N=T.width,F=T.height;if(v=O.scrollWidth,b=O.scrollHeight,y=_e(O),S=O.scrollLeft,k=O.scrollTop,O===f?(A=N<v&&("auto"===y.overflowX||"scroll"===y.overflowX||"visible"===y.overflowX),_=F<b&&("auto"===y.overflowY||"scroll"===y.overflowY||"visible"===y.overflowY)):(A=N<v&&("auto"===y.overflowX||"scroll"===y.overflowX),_=F<b&&("auto"===y.overflowY||"scroll"===y.overflowY)),g=A&&(te(I-l)<=o&&S+N<v)-(te(x-l)<=o&&!!S),E=_&&(te(M-d)<=o&&k+F<b)-(te(L-d)<=o&&!!k),!C[m])for(var P=0;P<=m;P++)C[P]||(C[P]={});C[m].vx==g&&C[m].vy==E&&C[m].el===O||(C[m].el=O,C[m].vx=g,C[m].vy=E,clearInterval(C[m].pid),!O||0==g&&0==E||(h=!0,C[m].pid=setInterval(function(){r&&0===this.layer&&(be.active._emulateDragOver(!0),be.active._onTouchMove(w,!0));var t=C[this.layer].vy?C[this.layer].vy*a:0,n=C[this.layer].vx?C[this.layer].vx*a:0;"function"==typeof c&&"continue"!==c.call(i,n,t,e,w,C[this.layer].el)||ue(C[this.layer].el,n,t)}.bind({layer:m}),24))),m++}while(t.bubbleScroll&&p!==f&&(p=ae(p,!1)));D=h}},30),le=function(){C.forEach(function(e){clearInterval(e.pid)}),C=[]},de=function(e){function t(e,n){return function(r,i,o,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,o,a),n)(r,i,o,a);var u=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===u||e.join&&e.indexOf(u)>-1}}var n={},r=e.group;r&&"object"==(void 0===r?"undefined":no(r))||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},fe=function(t){e&&e.parentNode&&e.parentNode[j]&&e.parentNode[j]._computeIsAligned(t)},he=function(){!X&&n&&_e(n,"display","none")},me=function(){!X&&n&&_e(n,"display","")};G.addEventListener("click",function(e){if(M)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),M=!1,!1},!0);var pe,ve=function(t){if(e){var n=function(e,t){for(var n=0;n<x.length;n++)if(!Me(x[n])){var r=Ue(x[n]),i=x[n][j].options.emptyInsertThreshold,o=e>=r.left-i&&e<=r.right+i,a=t>=r.top-i&&t<=r.bottom+i;if(i&&o&&a)return x[n]}}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(n){var r={};for(var i in t)r[i]=t[i];r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[j]._onDragOver(r)}}};function be(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=je({},t),e[j]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:Y(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==be.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var r in n)!(r in t)&&(t[r]=n[r]);for(var i in de(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Z,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?we(e,"pointerdown",this._onTapStart):(we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),x.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function ye(e,t,n,r){if(e){n=n||G;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Fe(e,t):Fe(e,t))||r&&e===n)return e;if(e===n)break}while(e=ge(e))}return null}function ge(e){return e.host&&e!==G&&e.host.nodeType?e.host:e.parentNode}function we(e,t,n){e.addEventListener(t,n,!B&&V)}function Ee(e,t,n){e.removeEventListener(t,n,!B&&V)}function Ae(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(P," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(P," ")}}function _e(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return G.defaultView&&G.defaultView.getComputedStyle?n=G.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function Se(e){var t="";do{var n=_e(e,"transform");n&&"none"!==n&&(t=n+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function ke(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function Oe(e,t,n,i,o,a,s,u,c,l,d){var f,h=(e=e||t[j]).options,m="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||B||q?(f=G.createEvent("Event")).initEvent(n,!0,!0):f=new CustomEvent(n,{bubbles:!0,cancelable:!0}),f.to=o||t,f.from=a||t,f.item=i||t,f.clone=r,f.oldIndex=s,f.newIndex=u,f.oldDraggableIndex=c,f.newDraggableIndex=l,f.originalEvent=d,f.pullMode=p?p.lastPutMode:void 0,t&&t.dispatchEvent(f),h[m]&&h[m].call(e,f)}function Te(e,t,n,r,i,o,a,s){var u,c,l=e[j],d=l.options.onMove;return!window.CustomEvent||B||q?(u=G.createEvent("Event")).initEvent("move",!0,!0):u=new CustomEvent("move",{bubbles:!0,cancelable:!0}),u.to=t,u.from=e,u.dragged=n,u.draggedRect=r,u.related=i||t,u.relatedRect=o||Ue(t),u.willInsertAfter=s,u.originalEvent=a,e.dispatchEvent(u),d&&(c=d.call(l,u,a)),c}function Ce(e){e.draggable=!1}function De(){Q=!1}function Le(t,r,i){for(var o=0,a=0,s=t.children;a<s.length;){if("none"!==s[a].style.display&&s[a]!==n&&s[a]!==e&&ye(s[a],i.draggable,t,!1)){if(o===r)return s[a];o++}a++}return null}function Me(e){for(var t=e.lastElementChild;t&&(t===n||"none"===_e(t,"display"));)t=t.previousElementSibling;return t||null}function xe(t){return Ne(e)<Ne(t)?1:-1}function Ie(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Ne(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||e===r||t&&!Fe(e,t)||n++;return n}function Fe(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(wn){return!1}return!1}}function Pe(e,t){return function(){if(!pe){var n=arguments,r=this;pe=U(function(){1===n.length?e.call(r,n[0]):e.apply(r,n),pe=void 0},t)}}}function je(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Re(e){return W&&W.dom?W.dom(e).cloneNode(!0):H?H(e).clone(!0)[0]:e.cloneNode(!0)}function Ge(e){return U(e,0)}function Ye(e){return clearTimeout(e)}function Ue(e,t,n,r){if(e.getBoundingClientRect||e===R){var i,o,a,s,u,c,l;if(e!==R&&e!==se()?(o=(i=e.getBoundingClientRect()).top,a=i.left,s=i.bottom,u=i.right,c=i.height,l=i.width):(o=0,a=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,l=window.innerWidth),r&&e!==R&&(n=n||e.parentNode,!B))do{if(n&&n.getBoundingClientRect&&"none"!==_e(n,"transform")){var d=n.getBoundingClientRect();o-=d.top+Y(_e(n,"border-top-width")),a-=d.left+Y(_e(n,"border-left-width")),s=o+i.height,u=a+i.width;break}}while(n=n.parentNode);if(t&&e!==R){var f=Se(n||e),h=f&&f.a,m=f&&f.d;f&&(s=(o/=m)+(c/=m),u=(a/=h)+(l/=h))}return{top:o,left:a,bottom:s,right:u,width:l,height:c}}}function He(e,t){for(var n=ae(e,!0),r=Ue(e)[t];n;){var i=Ue(n)[t];if(!("top"===t||"left"===t?r>=i:r<=i))return n;if(n===se())break;n=ae(n,!1)}return!1}function We(e){var t=0,n=0,r=se();if(e)do{var i=Se(e),o=i.a,a=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}return be.prototype={constructor:be,_computeIsAligned:function(t){var r;if(n&&!X?(he(),r=G.elementFromPoint(t.clientX,t.clientY),me()):r=t.target,r=ye(r,this.options.draggable,this.el,!1),!ee&&e&&e.parentNode===this.el){for(var i,o,a,s,u,c,l,d,f=this.el.children,h=0;h<f.length;h++)ye(f[h],this.options.draggable,this.el,!1)&&f[h]!==r&&(f[h].sortableMouseAligned=(i=t.clientX,o=t.clientY,a=f[h],s=this._getDirection(t,null),this.options,void 0,void 0,void 0,void 0,u=Ue(a),c="vertical"===s?u.left:u.top,l="vertical"===s?u.right:u.bottom,c<(d="vertical"===s?i:o)&&d<l));ye(r,this.options.draggable,this.el,!0)||(A=null),ee=!0,U(function(){ee=!1},30)}},_getDirection:function(t,n){return"function"==typeof this.options.direction?this.options.direction.call(this,t,n,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n,r,i=this,o=this.el,s=this.options,u=s.preventOnFilter,c=t.type,l=t.touches&&t.touches[0],d=(l||t).target,f=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||d,h=s.filter;if(function(e){ie.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&ie.push(r)}}(o),!e&&!(/mousedown|pointerdown/.test(c)&&0!==t.button||s.disabled||f.isContentEditable||(d=ye(d,s.draggable,o,!1),a===d))){if(n=Ne(d),r=Ne(d,s.draggable),"function"==typeof h){if(h.call(this,t,d,this))return Oe(i,f,"filter",d,o,o,n,void 0,r),void(u&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=ye(f,e.trim(),o,!1))return Oe(i,e,"filter",d,o,o,n,void 0,r),!0})))return void(u&&t.cancelable&&t.preventDefault());s.handle&&!ye(f,s.handle,o,!1)||this._prepareDragStart(t,l,d,n,r)}}},_handleAutoScroll:function(t,n){if(e&&this.options.scroll){var r=t.clientX,i=t.clientY,o=G.elementFromPoint(r,i),a=this;if(n||q||B||$){ce(t,a.options,o,n);var s=ae(o,!0);!D||v&&r===b&&i===y||(v&&clearInterval(v),v=setInterval(function(){if(e){var o=ae(G.elementFromPoint(r,i),!0);o!==s&&(s=o,le(),ce(t,a.options,s,n))}},10),b=r,y=i)}else{if(!a.options.bubbleScroll||ae(o,!0)===se())return void le();ce(t,a.options,ae(o,!1),!1)}}},_prepareDragStart:function(n,r,s,u,c){var d,h=this,p=h.el,v=h.options,b=p.ownerDocument;s&&!e&&s.parentNode===p&&(i=p,t=(e=s).parentNode,o=e.nextSibling,a=s,m=v.group,l=u,f=c,g={target:e,clientX:(r||n).clientX,clientY:(r||n).clientY},this._lastX=(r||n).clientX,this._lastY=(r||n).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",d=function(){h._disableDelayedDragEvents(),!K&&h.nativeDraggable&&(e.draggable=!0),h._triggerDragStart(n,r),Oe(h,i,"choose",e,i,i,l,void 0,f),Ae(e,v.chosenClass,!0)},v.ignore.split(",").forEach(function(t){ke(e,t.trim(),Ce)}),we(b,"dragover",ve),we(b,"mousemove",ve),we(b,"touchmove",ve),we(b,"mouseup",h._onDrop),we(b,"touchend",h._onDrop),we(b,"touchcancel",h._onDrop),K&&this.nativeDraggable&&(this.options.touchStartThreshold=4,e.draggable=!0),!v.delay||v.delayOnTouchOnly&&!r||this.nativeDraggable&&(q||B)?d():(we(b,"mouseup",h._disableDelayedDrag),we(b,"touchend",h._disableDelayedDrag),we(b,"touchcancel",h._disableDelayedDrag),we(b,"mousemove",h._delayedDragTouchMoveHandler),we(b,"touchmove",h._delayedDragTouchMoveHandler),v.supportPointer&&we(b,"pointermove",h._delayedDragTouchMoveHandler),h._dragStartTimer=U(d,v.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;re(te(t.clientX-this._lastX),te(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){e&&Ce(e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ee(e,"mouseup",this._disableDelayedDrag),Ee(e,"touchend",this._disableDelayedDrag),Ee(e,"touchcancel",this._disableDelayedDrag),Ee(e,"mousemove",this._delayedDragTouchMoveHandler),Ee(e,"touchmove",this._delayedDragTouchMoveHandler),Ee(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||("touch"==t.pointerType?t:null),!this.nativeDraggable||n?this.options.supportPointer?we(G,"pointermove",this._onTouchMove):we(G,n?"touchmove":"mousemove",this._onTouchMove):(we(e,"dragend",this),we(i,"dragstart",this._onDragStart));try{G.selection?Ge(function(){G.selection.empty()}):window.getSelection().removeAllRanges()}catch(vo){}},_dragStarted:function(t,n){if(L=!1,i&&e){this.nativeDraggable&&(we(G,"dragover",this._handleAutoScroll),we(G,"dragover",fe));var r=this.options;!t&&Ae(e,r.dragClass,!1),Ae(e,r.ghostClass,!0),_e(e,"transform",""),be.active=this,t&&this._appendGhost(),Oe(this,i,"start",e,i,i,l,void 0,f,void 0,n)}else this._nulling()},_emulateDragOver:function(t){if(w){if(this._lastX===w.clientX&&this._lastY===w.clientY&&!t)return;this._lastX=w.clientX,this._lastY=w.clientY,he();for(var n=G.elementFromPoint(w.clientX,w.clientY),r=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(w.clientX,w.clientY))!==r;)r=n;if(r)do{if(r[j]&&r[j]._onDragOver({clientX:w.clientX,clientY:w.clientY,target:n,rootEl:r})&&!this.options.dragoverBubble)break;n=r}while(r=r.parentNode);e.parentNode[j]._computeIsAligned(w),me()}},_onTouchMove:function(e,t){if(g){var r=this.options,i=r.fallbackTolerance,o=r.fallbackOffset,a=e.touches?e.touches[0]:e,s=n&&Se(n),u=n&&s&&s.a,c=n&&s&&s.d,l=z&&O&&We(O),d=(a.clientX-g.clientX+o.x)/(u||1)+(l?l[0]-F[0]:0)/(u||1),f=(a.clientY-g.clientY+o.y)/(c||1)+(l?l[1]-F[1]:0)/(c||1),h=e.touches?"translate3d("+d+"px,"+f+"px,0)":"translate("+d+"px,"+f+"px)";if(!be.active&&!L){if(i&&ne(te(a.clientX-this._lastX),te(a.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(a,!0),E=!0,w=a,_e(n,"webkitTransform",h),_e(n,"mozTransform",h),_e(n,"msTransform",h),_e(n,"transform",h),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!n){var t=this.options.fallbackOnBody?G.body:i,r=Ue(e,!0,t,!z),o=(_e(e),this.options);if(z){for(O=t;"static"===_e(O,"position")&&"none"===_e(O,"transform")&&O!==G;)O=O.parentNode;if(O!==G){var a=Ue(O,!0);r.top-=a.top,r.left-=a.left}O!==G.body&&O!==G.documentElement?(O===G&&(O=se()),r.top+=O.scrollTop,r.left+=O.scrollLeft):O=se(),F=We(O)}Ae(n=e.cloneNode(!0),o.ghostClass,!1),Ae(n,o.fallbackClass,!0),Ae(n,o.dragClass,!0),_e(n,"box-sizing","border-box"),_e(n,"margin",0),_e(n,"top",r.top),_e(n,"left",r.left),_e(n,"width",r.width),_e(n,"height",r.height),_e(n,"opacity","0.8"),_e(n,"position",z?"absolute":"fixed"),_e(n,"zIndex","100000"),_e(n,"pointerEvents","none"),t.appendChild(n)}},_onDragStart:function(t,n){var o=this,a=t.dataTransfer,s=o.options;(r=Re(e)).draggable=!1,r.style["will-change"]="",this._hideClone(),Ae(r,o.options.chosenClass,!1),o._cloneId=Ge(function(){o.options.removeCloneOnHide||i.insertBefore(r,e),Oe(o,i,"clone",e)}),!n&&Ae(e,s.dragClass,!0),n?(M=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Ee(G,"mouseup",o._onDrop),Ee(G,"touchend",o._onDrop),Ee(G,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(o,a,e)),we(G,"drop",o),_e(e,"transform","translateZ(0)")),L=!0,o._dragStartId=Ge(o._dragStarted.bind(o,n,t)),we(G,"selectstart",o),$&&_e(G.body,"user-select","none")},_onDragOver:function(n){var r,a,s,u=this.el,c=n.target,d=this.options,h=d.group,v=be.active,b=m===h,y=d.sort,g=this;if(!Q){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),E=!0,c=ye(c,d.draggable,u,!0),e.contains(n.target)||c.animated)return V(!1);if(c!==e&&(M=!1),v&&!d.disabled&&(b?y||(s=!i.contains(e)):p===this||(this.lastPutMode=m.checkPull(this,v,e,n))&&h.checkPut(this,v,e,n))){var w=this._getDirection(n,c);if(r=Ue(e),s)return this._hideClone(),t=i,o?i.insertBefore(e,o):i.appendChild(e),V(!0);var O=Me(u);if(!O||function(e,t,n){var r=Ue(Me(n)),i="vertical"===t?e.clientY:e.clientX,o="vertical"===t?e.clientX:e.clientY,a="vertical"===t?r.bottom:r.right,s="vertical"===t?r.left:r.top,u="vertical"===t?r.right:r.bottom;return"vertical"===t?o>u+10||o<=u&&i>a&&o>=s:i>a&&o>s||i<=a&&o>u+10}(n,w,u)&&!O.animated){if(O&&u===n.target&&(c=O),c&&(a=Ue(c)),b?v._hideClone():v._showClone(this),!1!==Te(i,u,e,r,c,a,n,!!c))return u.appendChild(e),t=u,T=null,B(),V(!0)}else if(c&&c!==e&&c.parentNode===u){var C,D=0,L=c.sortableMouseAligned,x=e.parentNode!==u,F="vertical"===w?"top":"left",P=He(c,"top")||He(e,"top"),R=P?P.scrollTop:void 0;if(A!==c&&(S=null,C=Ue(c)[F],I=!1),function(t,n,r){var i=e===e&&T||Ue(e),o=n===e&&T||Ue(n),a="vertical"===r?i.left:i.top,s="vertical"===r?i.right:i.bottom,u="vertical"===r?i.width:i.height,c="vertical"===r?o.left:o.top,l="vertical"===r?o.right:o.bottom,d="vertical"===r?o.width:o.height;return a===c||s===l||a+u/2===c+d/2}(0,c,w)&&L||x||P||d.invertSwap||"insert"===S||"swap"===S?("swap"!==S&&(N=d.invertSwap||x),D=function(t,n,r,i,o,a,s){var u=Ue(n),c="vertical"===r?t.clientY:t.clientX,l="vertical"===r?u.height:u.width,d="vertical"===r?u.top:u.left,f="vertical"===r?u.bottom:u.right,h=Ue(e),m=!1;if(!a)if(s&&k<l*i){if(!I&&(1===_?c>d+l*o/2:c<f-l*o/2)&&(I=!0),I)m=!0;else if("vertical"===r?h.top:h.left,"vertical"===r?h.bottom:h.right,1===_?c<d+k:c>f-k)return-1*_}else if(c>d+l*(1-i)/2&&c<f-l*(1-i)/2)return xe(n);return(m=m||a)&&(c<d+l*o/2||c>f-l*o/2)?c>d+l/2?1:-1:0}(n,c,w,d.swapThreshold,null==d.invertedSwapThreshold?d.swapThreshold:d.invertedSwapThreshold,N,A===c),S="swap"):(D=xe(c),S="insert"),0===D)return V(!1);T=null,A=c,_=D,a=Ue(c);var Y=c.nextElementSibling,H=!1,W=Te(i,u,e,r,c,a,n,H=1===D);if(!1!==W)return 1!==W&&-1!==W||(H=1===W),Q=!0,U(De,30),b?v._hideClone():v._showClone(this),H&&!Y?u.appendChild(e):c.parentNode.insertBefore(e,H?Y:c),P&&ue(P,0,R-P.scrollTop),t=e.parentNode,void 0===C||N||(k=te(C-Ue(c)[F])),B(),V(!0)}if(u.contains(e))return V(!1)}return!1}function V(t){return t&&(b?v._hideClone():v._showClone(g),v&&(Ae(e,p?p.options.ghostClass:v.options.ghostClass,!1),Ae(e,d.ghostClass,!0)),p!==g&&g!==be.active?p=g:g===be.active&&(p=null),r&&g._animate(r,e),c&&a&&g._animate(a,c)),(c===e&&!e.animated||c===u&&!c.animated)&&(A=null),d.dragoverBubble||n.rootEl||c===G||(g._handleAutoScroll(n),e.parentNode[j]._computeIsAligned(n),!t&&ve(n)),!d.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),!0}function B(){Oe(g,i,"change",c,u,i,l,Ne(e),f,Ne(e,d.draggable),n)}},_animate:function(t,n){var r=this.options.animation;if(r){var i=Ue(n);if(n===e&&(T=i),1===t.nodeType&&(t=Ue(t)),t.left+t.width/2!==i.left+i.width/2||t.top+t.height/2!==i.top+i.height/2){var o=Se(this.el),a=o&&o.a,s=o&&o.d;_e(n,"transition","none"),_e(n,"transform","translate3d("+(t.left-i.left)/(a||1)+"px,"+(t.top-i.top)/(s||1)+"px,0)"),this._repaint(n),_e(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),_e(n,"transform","translate3d(0,0,0)")}"number"==typeof n.animated&&clearTimeout(n.animated),n.animated=U(function(){_e(n,"transition",""),_e(n,"transform",""),n.animated=!1},r)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){Ee(G,"touchmove",this._onTouchMove),Ee(G,"pointermove",this._onTouchMove),Ee(G,"dragover",ve),Ee(G,"mousemove",ve),Ee(G,"touchmove",ve)},_offUpEvents:function(){var e=this.el.ownerDocument;Ee(e,"mouseup",this._onDrop),Ee(e,"touchend",this._onDrop),Ee(e,"pointerup",this._onDrop),Ee(e,"touchcancel",this._onDrop),Ee(G,"selectstart",this)},_onDrop:function(a){var s=this.el,u=this.options;L=!1,D=!1,N=!1,I=!1,clearInterval(this._loopId),clearInterval(v),le(),clearTimeout(pe),pe=void 0,clearTimeout(this._dragStartTimer),Ye(this._cloneId),Ye(this._dragStartId),Ee(G,"mousemove",this._onTouchMove),this.nativeDraggable&&(Ee(G,"drop",this),Ee(s,"dragstart",this._onDragStart),Ee(G,"dragover",this._handleAutoScroll),Ee(G,"dragover",fe)),$&&_e(G.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),a&&(E&&(a.cancelable&&a.preventDefault(),!u.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),(i===t||p&&"clone"!==p.lastPutMode)&&r&&r.parentNode&&r.parentNode.removeChild(r),e&&(this.nativeDraggable&&Ee(e,"dragend",this),Ce(e),e.style["will-change"]="",Ae(e,p?p.options.ghostClass:this.options.ghostClass,!1),Ae(e,this.options.chosenClass,!1),Oe(this,i,"unchoose",e,t,i,l,null,f,null,a),i!==t?(d=Ne(e),h=Ne(e,u.draggable),d>=0&&(Oe(null,t,"add",e,t,i,l,d,f,h,a),Oe(this,i,"remove",e,t,i,l,d,f,h,a),Oe(null,t,"sort",e,t,i,l,d,f,h,a),Oe(this,i,"sort",e,t,i,l,d,f,h,a)),p&&p.save()):e.nextSibling!==o&&(d=Ne(e),h=Ne(e,u.draggable),d>=0&&(Oe(this,i,"update",e,t,i,l,d,f,h,a),Oe(this,i,"sort",e,t,i,l,d,f,h,a))),be.active&&(null!=d&&-1!==d||(d=l,h=f),Oe(this,i,"end",e,t,i,l,d,f,h,a),this.save()))),this._nulling()},_nulling:function(){i=e=t=n=o=r=a=s=u=C.length=v=b=y=g=w=E=d=l=A=_=T=p=m=be.active=null,ie.forEach(function(e){e.checked=!0}),ie.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)ye(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Ie(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var i=n.children[r];ye(i,this.options.draggable,n,!1)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ye(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&de(n)},destroy:function(){var e=this.el;e[j]=null,Ee(e,"mousedown",this._onTapStart),Ee(e,"touchstart",this._onTapStart),Ee(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ee(e,"dragover",this),Ee(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),x.splice(x.indexOf(this.el),1),this.el=e=null},_hideClone:function(){r.cloneHidden||(_e(r,"display","none"),r.cloneHidden=!0,r.parentNode&&this.options.removeCloneOnHide&&r.parentNode.removeChild(r))},_showClone:function(t){"clone"===t.lastPutMode?r.cloneHidden&&(i.contains(e)&&!this.options.group.revertClone?i.insertBefore(r,e):o?i.insertBefore(r,o):i.appendChild(r),this.options.group.revertClone&&this._animate(e,r),_e(r,"display",""),r.cloneHidden=!1):this._hideClone()}},we(G,"touchmove",function(e){(be.active||L)&&e.cancelable&&e.preventDefault()}),be.utils={on:we,off:Ee,css:_e,find:ke,is:function(e,t){return!!ye(e,t,e,!1)},extend:je,throttle:Pe,closest:ye,toggleClass:Ae,clone:Re,index:Ne,nextTick:Ge,cancelNextTick:Ye,detectDirection:oe,getChild:Le},be.create=function(e,t){return new be(e,t)},be.version="1.9.0",be}),to=to.exports;var ro=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),io=function(e){function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state=n,i.emit=r,i.local=n.components[e]={},i.makeSortable=i.makeSortable.bind(i),i.handleSorting=i.handleSorting.bind(i),i.SectionCard=i.SectionCard.bind(i),i.SectionCards=i.SectionCards.bind(i),i.LinkCard=i.LinkCard.bind(i),i.LinkCards=i.LinkCards.bind(i),i.RemoveBtn=i.RemoveBtn.bind(i),i.handleRemove=i.handleRemove.bind(i),i.EditBtn=i.EditBtn.bind(i),i.handleEdit=i.handleEdit.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ni),ro(t,[{key:"handleRemove",value:function(e,t,n){var r=this;return function(i){if(!0===confirm("are you sure you want to remove "+n+" at "+t+" of "+e+"?")){var o=void 0,a=void 0;"links"===e?(o={query:{"sections._id":t}},a={$pull:{"sections.$.links":n}}):"sections"===e&&(o=null,a={$pull:{sections:{_id:n}}}),r.state.api.lists.patch(r.state.params._id,a,o).then(function(e){r.state.main.selected.lists=e,r.emit("render")}).catch(function(e){alert(e)})}}}},{key:"handleEdit",value:function(e,t){var n=this;return function(r){if("sections"===e){var i={query:{"sections._id":t}};n.state.api.lists.find(i).then(function(r){var i=r.data[0],o=i.sections.find(function(e){return e._id===t}),a=o.name,s=o.tags,u=o.description;n.emit("EDITFEATUREMODAL_SET_VALUES",{_id:i._id,featureid:t,name:a,description:u,tags:s,prop:e}),n.emit("EDITFEATUREMODAL_TOGGLE")}).catch(function(e){alert(e)})}else n.state.api[e].get(t).then(function(r){var i=r.name,o=r.url,a=r.description,s=r.tags,u=r._id;n.emit("EDITFEATUREMODAL_SET_VALUES",{_id:u,featureid:t,name:i,url:o,description:a,tags:s,prop:e}),n.emit("EDITFEATUREMODAL_TOGGLE")}).catch(function(e){alert(e)})}}},{key:"RemoveBtn",value:function(e,t,n){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 bn bg-near-white red"),ri(e,["remove"]),e}(this.handleRemove(e,t,n))}},{key:"EditBtn",value:function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 bn bg-light-green navy mr2"),ri(e,["edit"]),e}(this.handleEdit(e,t))}},{key:"LinkCard",value:function(e,t,n){var r=t.find(function(t){return t._id===e}),i=r.name,o=r.description,a=r.url,s=r.updatedAt;return function(){var e=document.createElement("li");e.setAttribute("data-id",arguments[10]),e.setAttribute("class","w-100 ba bw1 mt2 mb2 pa3-ns pa2 bg-washed-red dropshadow flex flex-column");var t=document.createElement("div");t.setAttribute("class","w-100 flex flex-row justify-end"),ri(t,["\n                ",arguments[0],"\n                ",arguments[1],"\n            "]);var n=document.createElement("div");n.setAttribute("class","flex flex-row-ns justify-between-ns pointer flex-column");var r=document.createElement("div");r.setAttribute("class","w-75-ns w-100");var i=document.createElement("small");i.setAttribute("class","f8 ma0 pa0");var o=document.createElement("a");o.setAttribute("href",arguments[2]),o.setAttribute("target","_blank"),o.setAttribute("class",arguments[3]),ri(o,[arguments[4]]),ri(i,[o]);var a=document.createElement("h2");a.setAttribute("class","pa0 ma0 f6 f4-ns");var s=document.createElement("a");s.setAttribute("href",arguments[5]),s.setAttribute("target","_blank"),s.setAttribute("class",arguments[6]),ri(s,[arguments[7]]),ri(a,[s]);var u=document.createElement("p");u.setAttribute("class","pa0 mt2 f7 f6-ns"),ri(u,[arguments[8]]),ri(r,["\n            ",i,"\n            ",a,"\n            ",u,"\n            "]);var c=document.createElement("div");c.setAttribute("class","w-25-ns w-100 tr");var l=document.createElement("small");return l.setAttribute("class","f8 ma0 pa0"),ri(l,[arguments[9]]),ri(c,["\n            ",l,"\n            "]),ri(n,["\n            ",r,"\n            ",c,"\n            "]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}(this.EditBtn("links",r._id),this.RemoveBtn("links",n._id,r._id),a,$r.aTag,a,a,$r.aTag,i,o,Qi(s).format("MMMM Do YYYY, h:mm a"),r._id)}},{key:"LinkCards",value:function(e,t,n){var r=this;return e.map(function(e){return r.LinkCard(e,t,n)})}},{key:"SectionCard",value:function(e,t){var n=e.name,r=e.description,i=e.links,o=this.LinkCards(i,t,e),a=this.state.main.selected.lists;return function(){var e=document.createElement("li");e.setAttribute("data-id",arguments[7]),e.setAttribute("class","w-100");var t=document.createElement("fieldset");t.setAttribute("class","mt3 mb3 bg-white b--light-green ba bw1 dropshadow pa2");var n=document.createElement("legend");n.setAttribute("class",arguments[0]+" ma0 pa0 f5 f4-ns"),ri(n,[arguments[1]," ",arguments[2],"\n     ",arguments[3]]);var r=document.createElement("p");r.setAttribute("class","ma0 pa0 f7 f6-ns"),ri(r,[arguments[4]]);var i=document.createElement("ul");return i.setAttribute("data-sectionid",arguments[5]),i.setAttribute("class","list pl3-ns pr3-ns pa0 nested-sortable"),ri(i,["\n        ",arguments[6],"\n     "]),ri(t,["\n     ",n,"\n    \n     ",r,"\n     ",i,"\n     "]),ri(e,["\n    ",t,"\n    "]),e}($r.legend,n,this.EditBtn("sections",e._id),this.RemoveBtn("sections",a._id,e._id),r,e._id,o,e._id)}},{key:"SectionCards",value:function(e,t){var n=this;return e.map(function(e){return n.SectionCard(e,t)})}},{key:"createElement",value:function(e){var t=e.sections,n=e.sectionsDetails;return t?function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 pa0 list"),ri(e,["\n        ",arguments[0],"\n    "]),e}(this.SectionCards(t,n)):""}},{key:"update",value:function(){return!0}},{key:"makeSortable",value:function(e){var t=this,n=this.state.listPage;this.state.listPage.sortables=[];var r=[].slice.call(e.querySelectorAll(".nested-sortable")),i={animation:150,direction:"vertical",onMove:function(e){return 0!=n.editable},onSort:this.handleSorting()};r.forEach(function(e){t.state.listPage.sortables.push(new to(e,i))}),this.state.listPage.sortable=new to(e,i)}},{key:"handleSorting",value:function(e){var t=this;return function(e){var n=t.state.listPage,r=n.sortables.map(function(e){return{id:e.el.dataset.sectionid,links:e.toArray()}}),i={sections:n.sortable.toArray().map(function(e){var n=t.state.main.selected.lists.sections.find(function(t){return t._id===e});return n.links=r.find(function(t){return t.id===e}).links,n})},o=t.state.params._id;t.emit("LISTS_PATCH",o,i,{})}}},{key:"load",value:function(e){this.makeSortable(e)}},{key:"afterupdate",value:function(e){this.makeSortable(e)}}]),t}();function oo(e,t){return function(e){var n=e.target.value,r=e.target.name;t("listPage_handle_keyup",{prop:r,val:n})}}var ao=function(e,t,n){return function(){var e=document.createElement("section");return e.setAttribute("class",arguments[0]),ri(e,["\n        ",arguments[1],"\n        ",arguments[2],"\n    "]),e}(so,function(e,t,n){var r=e.name,i=e.description,o=e.ownerDetails,a=e.followersDetails;if(!a)return"";var s=a.length;return t.listPage.name=r,t.listPage.description=i,function(){var e=document.createElement("header");e.setAttribute("class","w-100 pa2 ba bw1 dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7"),ri(t,[arguments[0]," followers"]);var n=document.createElement("form");n.setAttribute("class","ma0 pa0");var r=document.createElement("input");r.setAttribute("name","name"),r.onkeyup=arguments[1],r.setAttribute("value",arguments[2]),r.setAttribute("class","ma0 pa2 f3-ns f4 w-100  bg-near-white ba bw1 b--moon-gray");var i=document.createElement("p");i.setAttribute("class","ma0 pa0 f7"),ri(i,["by ",arguments[3]]);var o=document.createElement("textarea");return o.setAttribute("name","description"),o.onkeyup=arguments[4],o.setAttribute("class","mt2 pa2 f5-ns f6 w-100  bg-near-white ba bw1 b--moon-gray"),ri(o,[arguments[5]]),ri(n,["\n            ",r,"\n            ",i,"\n            ",o,"\n            "]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}(s,oo(0,n),t.listPage.name,o.username,oo(0,n),t.listPage.description)}(e,t,n),t.cache(io,"EditableBody",t,n).render(e))},so=$r.sectionmw7+" mt3 mb5",uo=$r.sectionmw7+" mt3 mb5",co=function(e,t){"nautilists - list"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - list");var n=e.params._id;return function(){var e=document.createElement("body");e.onload=arguments[6],e.setAttribute("class",arguments[7]);var t=document.createElement("main");t.setAttribute("class",arguments[5]);var n=document.createElement("section");return n.setAttribute("class","w-100 flex flex-column items-center mt4 pa2 pa0-ns"),ri(n,["\n        ",arguments[0],"\n        ",arguments[1],"\n        ",arguments[2],"\n        ",arguments[3],"\n        ",arguments[4],"\n      "]),ri(t,["\n      ",n,"\n  "]),ri(e,["\n  ",arguments[8],"\n  ",t,"\n  ",arguments[9],"\n  ",arguments[10],"\n  ",arguments[11],"\n  ",arguments[12],"\n  ",arguments[13],"\n  ",arguments[14],"\n  ",arguments[15],"\n  ",arguments[16],"\n  ",arguments[17],"\n"]),e}(function(){var e=document.createElement("section");e.setAttribute("class",arguments[1]);var t=document.createElement("button");t.onclick=arguments[0],t.setAttribute("class","bg-transparent f7 bn");var n=document.createElement("span");return n.setAttribute("class","underline"),ri(n,["Go back"]),ri(t,["\u2190 ",n]),ri(e,["\n        ",t,"\n    "]),e}(function(e){history.go(-1)},$r.sectionmw7),function(e,t){return function(){var e=document.createElement("section");return e.setAttribute("class",arguments[0]+" flex flex-row-ns mt3 items-center"),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.sectionmw7,function(e,t){var n=e.user._id,r=e.main.selected.lists.followers;return!0===(r?r.includes(n):"")?function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 mr2-ns ma0 pa2 bg-near-white dropshadow bg-yellow navy"),ri(e,["Unfollow"]),e}(function(e){t("LISTPAGE_UNFOLLOW")}):function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 mr2-ns ma0 pa2 bg-near-white dropshadow bg-yellow navy"),ri(e,["Follow"]),e}(function(e){t("LISTPAGE_FOLLOW")})}(e,t),function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 mr2-ns ma0 pa2 bg-near-white dropshadow bg-purple light-green"),ri(e,["Remix"]),e}(function(e){t("LISTPAGE_REMIX")})}(0,t))}(e,t),function(e,t){return 1==!e.listPage.editable?"":(n=ri,(r=document.createElement("p")).setAttribute("class","ml3-ns ma0 pa0"),n(r,["now in edit mode \u2728"]),r);var n,r}(e),function(e,t){return e.listPage.canEdit?function(){var e=document.createElement("section");e.setAttribute("class",arguments[5]+" flex flex-row-ns mt4 items-center-ns justify-between-ns flex-column");var t=document.createElement("div");t.setAttribute("class","flex flex-row-ns flex-column"),ri(t,["\n                ",arguments[0],"\n                ",arguments[1],"\n                ",arguments[2],"\n                ",arguments[3]," \n            "]);var n=document.createElement("div");return n.setAttribute("class","flex flex-row-ns flex-column"),ri(n,["\n                ",arguments[4],"\n            "]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}(function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 pa2 ba bw1 b--pink bg-near-white dropshadow"),ri(e,["Edit List"]),e}(function(){return t("LISTPAGE_TOGGLE_EDITABLE")})}(0,t),function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 ml2-ns pa2 ba bw1 b--light-green bg-light-green dropshadow"),ri(e,["Add Section"]),e}(function(e){t("LINKS_FIND",{query:{$sort:{createdAt:-1}}}),t("ADDSECTIONMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 ml2-ns pa2 ba bw1 b--washed-red bg-washed-red dropshadow"),ri(e,["Add Link"]),e}(function(e){t("LINKS_FIND",{query:{$sort:{createdAt:-1}}}),t("ADDSECTIONLINKSMODAL_LISTSELECT_SET"),t("ADDSECTIONLINKSMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 ml2-ns pa2 ba bw1 b--dark-blue bg-dark-blue pink dropshadow"),ri(e,["Add Collaborator"]),e}(function(e){t("ADDCOLLABORATORMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","f7 ml2-ns pa2 ba bw1 b--light-red bg-light-red pointer ml2-ns dropshadow"),ri(e,["DELETE FOREVER"]),e}(function(){return t("LISTPAGE_REMOVE_LIST")})}(0,t),$r.sectionmw7):""}(e,t),function(e,t){var n,r=e.main.selected.lists;if(!Object.keys(r)>0)return"";switch(e.listPage.editable){case!0:return ao(r,e,t);case!1:return function(){var e=document.createElement("section");return e.setAttribute("class",arguments[0]),ri(e,["\n        ",arguments[1],"\n        ",arguments[2],"\n    "]),e}(uo,function(e){var t=e.name,n=e.description,r=e.ownerDetails,i=e.collaboratorDetails,o=e.followersDetails;return o?function(){var e=document.createElement("header");e.setAttribute("class","w-100 pa3 ba bw1 b--black dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7"),ri(t,[arguments[0]," followers"]);var n=document.createElement("h1");n.setAttribute("class","ma0 pa0 f3-ns f4"),ri(n,[arguments[1]]);var r=document.createElement("p");r.setAttribute("class","ma0 pa0 f7"),ri(r,["by ",arguments[2]]);var i=document.createElement("p");return i.setAttribute("class","ma0 pa0 f5-ns f6"),ri(i,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n            ",r,"\n            ",arguments[4],"\n            ",i,"\n        "]),e}(o.length,t,r.username,n,function(e){return!e.length>0?"":function(){var e=document.createElement("p");return e.setAttribute("class","ma0 pa0 f7"),ri(e,["together with ",arguments[0]]),e}(e.map(function(e){return function(){var e=document.createElement("a");return e.setAttribute("href","/users/"+arguments[0]),e.setAttribute("class",arguments[1]+" mr2"),ri(e,["\xb7 ",arguments[2]]),e}(e.username,$r.aTag,e.username)}))}(i)):""}(n=r),function(e){var t=e.sections,n=e.sectionsDetails;return t?function(){var e=document.createElement("section");e.setAttribute("class","w-100 pa0");var t=document.createElement("ul");return t.setAttribute("class","w-100 pa0 list"),ri(t,["\n            ",arguments[0],"\n            "]),ri(e,["\n            ",t,"\n        "]),e}(function(e,t){return e.map(function(e){return function(e,t){var n=e.name,r=e.description,i=function(e,t){return e.map(function(e){return function(e,t){var n=t.find(function(t){return t._id===e}),r=n.name,i=n.description,o=n.url,a=n.updatedAt;return function(){var e=document.createElement("li");e.setAttribute("class","w-100 ba bw1 mt2 mb2 pa3-ns pa2 bg-washed-red dropshadow flex flex-column flex-row-ns justify-between-ns");var t=document.createElement("div");t.setAttribute("class","w-75-ns w-100");var n=document.createElement("small");n.setAttribute("class","f8 ma0 pa0");var r=document.createElement("a");r.setAttribute("href",arguments[0]),r.setAttribute("target","_blank"),r.setAttribute("class",arguments[1]+" dim"),ri(r,[arguments[2]]),ri(n,[r]);var i=document.createElement("h2");i.setAttribute("class","pa0 ma0 f6 f4-ns");var o=document.createElement("a");o.setAttribute("href",arguments[3]),o.setAttribute("target","_blank"),o.setAttribute("class",arguments[4]+" dim"),ri(o,[arguments[5]]),ri(i,[o]);var a=document.createElement("p");a.setAttribute("class","pa0 mt2 f7 f6-ns"),ri(a,[arguments[6]]),ri(t,["\n            ",n,"\n            ",i,"\n            ",a,"\n            "]);var s=document.createElement("div");s.setAttribute("class","w-25-ns w-100 tr");var u=document.createElement("small");return u.setAttribute("class","f8 ma0 pa0"),ri(u,[arguments[7]]),ri(s,["\n            ",u,"\n            "]),ri(e,["\n            ",t,"\n            ",s,"\n        "]),e}(o,$r.aTag,o,o,$r.aTag,r,i,Qi(a).format("MMMM Do YYYY, h:mm a"))}(e,t)})}(e.links,t);return function(){var e=document.createElement("li");e.setAttribute("class","w-100");var t=document.createElement("fieldset");t.setAttribute("class","mt3 mb3 bg-white b--light-green ba bw1 dropshadow pa3-ns pa2");var n=document.createElement("legend");n.setAttribute("class",arguments[0]+" ma0 pa0 f5 f4-ns"),ri(n,[arguments[1]]);var r=document.createElement("p");r.setAttribute("class","ma0 pa0 f7 f6-ns"),ri(r,[arguments[2]]);var i=document.createElement("ul");return i.setAttribute("class","list pl3-ns pr3-ns pa0"),ri(i,["\n        ",arguments[3],"\n     "]),ri(t,["\n     ",n,"\n     ",r,"\n     ",i,"\n     "]),ri(e,["\n    ",t,"\n    "]),e}($r.legend,n,r,i)}(e,t)})}(t,n)):""}(n))}}(e,t),$r.main,function(){t("LISTS_GET",n)},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t),Ki(e,t),function(e,t){if(!0===e.modals.addSectionModal.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245, 1)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Add Section"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("ADDSECTIONMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll justify-center");var t=document.createElement("section");t.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4 bw1 br");var n=document.createElement("fieldset");n.setAttribute("class",arguments[1]+" mw0");var r=document.createElement("legend");r.setAttribute("class",arguments[0]),ri(r,["Optional: Select Links"]),ri(n,["\n                    ",r,"\n                    ",arguments[2],"\n                "]),ri(t,["\n                ",n,"\n            "]);var i=document.createElement("section");i.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4");var o=document.createElement("div");return o.setAttribute("class","w-100 h-100"),ri(o,["\n                    ",arguments[3],"\n                "]),ri(i,["\n                ",o,"\n            "]),ri(e,["\n            ",t,"\n\n            ",i,"\n        "]),e}($r.legend,$r.fieldset,function(e,t){return function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 vh-50-ns h3 flex flex-column overflow-y-scroll list ma0 pt2 pb3 pl3 pr3"),ri(e,["\n        ",arguments[0],"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e.name,i=e.description,o=e._id,a=t.modals.addSectionModal.links.includes(o)?"bg-light-green":"bg-white";return function(){var e=document.createElement("li");e.onclick=arguments[2],e.setAttribute("data-id",arguments[3]),e.setAttribute("class",arguments[4]+" grow h3 w-100 pa1 ma0 f7 mt2 mb2 bg-white outline dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7 truncate b"),ri(t,[arguments[0]]);var n=document.createElement("p");return n.setAttribute("class","ma0 pa0 f7 truncate"),ri(n,[arguments[1]]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(r,i,function(e,t,n){return function(t){n("ADDSECTIONMODAL_LINKSELECT_TOGGLE",e)}}(o,0,n),o,a)}(e,t,n)})}(e.main.links.data,e,t))}(e,t),function(e,t){return function(){var e=document.createElement("form");return e.setAttribute("id","AddListForm"),e.onsubmit=arguments[0],ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n            ",arguments[3],"\n            ",arguments[4],"\n        "]),e}(function(e,t){return function(e){e.preventDefault(),t("ADDSECTIONMODAL_SUBMIT")}}(0,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Name"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","name"),n.setAttribute("type","text"),n.setAttribute("placeholder","e.g. Title of URL"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addSectionModal.name,Zi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Description"]);var n=document.createElement("textarea");return n.onkeyup=arguments[1],n.setAttribute("name","description"),n.setAttribute("placeholder","A description to go with the magic"),n.setAttribute("class",arguments[2]),ri(n,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,Zi(0,t),$r.modalInput,e.modals.addSectionModal.description,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Tags"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","tags"),n.setAttribute("type","text"),n.setAttribute("placeholder","creative, coding, javascript"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addSectionModal.tags,Zi(0,t),$r.modalInput,$r.fieldset)}(e,t),function(){var e=document.createElement("div");e.setAttribute("class","w-100 mt4 flex flex-row justify-end");var t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value","Submit"),t.setAttribute("class",arguments[0]),ri(e,["\n            ",t,"\n        "]),e}($r.submitButton))}(e,t))}(e,t))}(e,t),function(e,t){if(!0===e.modals.addSectionLinksModal.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245, 1)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"           \n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Add Links to Section"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("ADDSECTIONLINKSMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll justify-center");var t=document.createElement("section");t.setAttribute("class","w-50-ns w-100 h-100 pa2 pl4 pr4 bw1 br");var n=document.createElement("fieldset");n.setAttribute("class",arguments[1]+" mw0");var r=document.createElement("legend");r.setAttribute("class",arguments[0]),ri(r,["Required: Step 1: Select Section"]),ri(n,["\n                    ",r,"\n                    ",arguments[2],"\n                "]);var i=document.createElement("fieldset");i.setAttribute("class",arguments[4]+" mw0");var o=document.createElement("legend");o.setAttribute("class",arguments[3]),ri(o,["Optional: Step 2: Select Links"]),ri(i,["\n                    ",o,"\n                    ",arguments[5],"\n                "]),ri(t,["\n                \n                ",n,"\n\n                ",i,"\n            "]);var a=document.createElement("section");a.setAttribute("class","w-50-ns w-100 h-auto pa2 pl4 pr4");var s=document.createElement("div");return s.setAttribute("class","w-100 h-100"),ri(s,["\n                    ",arguments[6],"\n                "]),ri(a,["\n                ",s,"\n            "]),ri(e,["\n            \n            ",t,"\n\n\n            ",a,"\n        "]),e}($r.legend,$r.fieldset,function(e,t){var n=e.modals.addSectionLinksModal.selectedList;return!Object.keys(n).length>0?"No list selected":function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 h4-ns h3 flex flex-column overflow-y-scroll list ma0 pt2 pb3 pl3 pr3"),ri(e,["\n        ",arguments[0],"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e.name,i=e.description,o=e._id,a=t.modals.addSectionLinksModal.selectedSection._id===o?"bg-light-blue":"bg-white";return function(){var e=document.createElement("li");e.onclick=arguments[2],e.setAttribute("data-id",arguments[3]),e.setAttribute("class",arguments[4]+" grow h3 w-100 pa1 ma0 f7 mt2 mb2 bg-white outline dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7 truncate b"),ri(t,[arguments[0]]);var n=document.createElement("p");return n.setAttribute("class","ma0 pa0 f7 truncate"),ri(n,[arguments[1]]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(r=0===r.length?"default":r,i,function(e,t,n){return function(t){n("ADDSECTIONLINKSMODAL_SECTIONSELECT_TOGGLE",e)}}(o,0,n),o,a)}(e,t,n)})}(n.sections,e,t))}(e,t),$r.legend,$r.fieldset,function(e,t){return function(){var e=document.createElement("ul");return e.setAttribute("class","w-100 vh-50-ns h3 flex flex-column overflow-y-scroll list ma0 pt2 pb3 pl3 pr3"),ri(e,["\n        ",arguments[0],"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e.name,i=e.description,o=e._id,a=t.modals.addSectionLinksModal.links.includes(o)?"bg-light-green":"bg-white";return function(){var e=document.createElement("li");e.onclick=arguments[2],e.setAttribute("data-id",arguments[3]),e.setAttribute("class",arguments[4]+" grow h3 w-100 pa1 ma0 f7 mt2 mb2 bg-white outline dropshadow");var t=document.createElement("p");t.setAttribute("class","ma0 pa0 f7 truncate b"),ri(t,[arguments[0]]);var n=document.createElement("p");return n.setAttribute("class","ma0 pa0 f7 truncate"),ri(n,[arguments[1]]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(r,i,function(e,t,n){return function(t){n("ADDSECTIONLINKSMODAL_LINKSELECT_TOGGLE",e)}}(o,0,n),o,a)}(e,t,n)})}(e.main.links.data,e,t))}(e,t),function(e,t){return function(){var e=document.createElement("form");return e.setAttribute("id","AddListForm"),e.onsubmit=arguments[0],ri(e,["\n            ",arguments[1],"    \n            ",arguments[2],"\n            ",arguments[3],"\n            ",arguments[4],"\n            ",arguments[5],"\n        "]),e}(function(e,t){return function(e){e.preventDefault(),t("ADDSECTIONLINKSMODAL_SUBMIT")}}(0,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Name"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","url"),n.setAttribute("type","text"),n.setAttribute("placeholder","e.g. https://itp.nyu.edu"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addSectionLinksModal.url,Ji(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Name"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","name"),n.setAttribute("type","text"),n.setAttribute("placeholder","e.g. Title of URL"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addSectionLinksModal.name,Ji(0,t),$r.modalInput,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Description"]);var n=document.createElement("textarea");return n.onkeyup=arguments[1],n.setAttribute("name","description"),n.setAttribute("placeholder","A description to go with the magic"),n.setAttribute("class",arguments[2]),ri(n,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,Ji(0,t),$r.modalInput,e.modals.addSectionLinksModal.description,$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Tags"]);var n=document.createElement("input");return n.setAttribute("value",arguments[1]),n.onkeyup=arguments[2],n.setAttribute("name","tags"),n.setAttribute("type","text"),n.setAttribute("placeholder","creative, coding, javascript"),n.setAttribute("class",arguments[3]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,e.modals.addSectionLinksModal.tags,Ji(0,t),$r.modalInput,$r.fieldset)}(e,t),function(){var e=document.createElement("div");e.setAttribute("class","w-100 mt4 flex flex-row justify-end");var t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value","Submit"),t.setAttribute("class",arguments[0]),ri(e,["\n            ",t,"\n        "]),e}($r.submitButton))}(e,t))}(e,t))}(e,t),e.cache(zi,"AddCollaboratorModal",e,t).render())},lo=function(e,t){switch("nautilists - lists"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - lists"),e.route){case"lists":return function(e,t){return"nautilists - lists"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - lists"),function(){var e=document.createElement("body");e.onload=arguments[3],e.setAttribute("class",arguments[4]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]),ri(t,["\n      ",arguments[1],"\n      ",arguments[2],"\n  "]),ri(e,["\n  ",arguments[5],"\n  ",t,"\n  ",arguments[6],"\n  ",arguments[7],"\n  ",arguments[8],"\n  ",arguments[9],"\n  ",arguments[10],"\n  ",arguments[11],"\n"]),e}($r.main,function(e,t){var n,r,i=e.main.lists,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no lists yet"]),o=r):o=Hi(i.data),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Recent Lists"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),ri(n,["\n      ",arguments[0],"\n      "]),ri(e,["\n      ",t,"\n      ",n,"\n    "]),e}(o)}(e),Vi("LISTS_FIND_MORE",0,t),function(){return t("LISTS_FIND")},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t),Ki(e,t))}(e,t);case"lists/:_id":return co(e,t);default:return ri(n=document.createElement("body"),["nothing found"]),n}var n},fo=function(e,t){return"nautilists - user"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - user"),function(){var e=document.createElement("body");e.onload=arguments[4],e.setAttribute("class",arguments[5]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]+" flex flex-column items-center pa2"),ri(t,["\n        ",arguments[1],"\n        ",arguments[2],"\n        ",arguments[3],"\n    "]),ri(e,["\n    ",arguments[6],"\n    ",t,"\n    ",arguments[7],"\n    ",arguments[8],"\n    ",arguments[9],"\n    ",arguments[10],"\n    ",arguments[11],"\n    ",arguments[12],"\n    "]),e}($r.main,function(e,t){var n=e.main.selected.user.profile,r=n.username,i=n.bio,o=n.emojis,a=n.selectedEmoji,s=void 0;return o&&(s=o[a]),function(){var e=document.createElement("header");e.setAttribute("class",arguments[4]+" h-auto ba bw1 dropshadow mt4 pa2");var t=document.createElement("p");t.setAttribute("class","pa0 ma0 w-100 tr"),ri(t,[arguments[0]]);var n=document.createElement("div");n.setAttribute("class","w-100 flex flex-column flex-row items-center pa2");var r=document.createElement("img");r.setAttribute("src","/assets/"+arguments[1]),r.setAttribute("class","ma0 pa0 dib h3 dropshadow ba bw1");var i=document.createElement("h1");i.setAttribute("class","ma0 pa0 pl3 f3 f2-ns"),ri(i,[arguments[2]]),ri(n,["\n                ",r,"\n                ",i,"\n            "]);var o=document.createElement("p");return o.setAttribute("class","pa2"),ri(o,[arguments[3]]),ri(e,["\n            ",t,"    \n            ",n,"\n            ",o,"\n        "]),e}(function(e,t){var n=e.user,r=n.authenticated,i=n.username;if(r&&e.params.username===i)return function(){var e=document.createElement("button");return e.onclick=arguments[0],e.setAttribute("class","bg-transparent bn f7 underline black"),ri(e,["edit profile"]),e}(function(){return t("EDITPROFILEMODAL_TOGGLE")})}(e,t),s,r,i,$r.sectionmw7)}(e,t),function(e,t){function n(e){return function(n){t("USERPAGE_SET_TAB",e)}}function r(t){if(e.userPage.selectedTab!==t)return"bg-near-white navy";switch(t){case"lists":return"bg-light-green navy";case"links":return"bg-light-pink navy";case"listsFollowing":return"bg-light-blue navy";default:return"bg-pink navy"}}return function(){var e=document.createElement("section");e.setAttribute("class",arguments[6]+" pa0 ma0 flex flex-column flex-row-ns mt4 justify-between-ns justify-start flex-wrap");var t=document.createElement("ul");t.setAttribute("class","list pa0 pl0 flex flex-row ma0");var n=document.createElement("li");n.setAttribute("class","pa0 mr2");var r=document.createElement("button");r.onclick=arguments[0],r.setAttribute("class","f7 f6-ns pa2 dropshadow ba bw1 b--black "+arguments[1]),ri(r,["lists"]),ri(n,[r]);var i=document.createElement("li");i.setAttribute("class","pa0 mr2");var o=document.createElement("button");o.onclick=arguments[2],o.setAttribute("class","f7 f6-ns pa2 dropshadow ba bw1 b--black "+arguments[3]),ri(o,["links"]),ri(i,[o]),ri(t,["\n                ",n,"\n                ",i,"\n            "]);var a=document.createElement("ul");a.setAttribute("class","list pa0 pl0 flex flex-row ma0");var s=document.createElement("li");s.setAttribute("class","pa0 ml2-ns ml0 mt2 mt0-ns");var u=document.createElement("button");return u.onclick=arguments[4],u.setAttribute("class","f7 f6-ns pa2 dropshadow ba bw1 b--black "+arguments[5]),ri(u,["lists I follow"]),ri(s,[u]),ri(a,["\n            ",s,"\n            "]),ri(e,["\n            ",t,"\n            ",a,"\n        "]),e}(n("lists"),r("lists"),n("links"),r("links"),n("listsFollowing"),r("listsFollowing"),$r.sectionmw7)}(e,t),function(e,t){switch(e.userPage.selectedTab){case"lists":return function(e,t){var n=e.main.selected.user.lists;return!Object.keys(n).length>0?"loading":function(){var e=document.createElement("section");e.setAttribute("class",arguments[1]+" pa2 bn bg-white mt3 mb5");var t=document.createElement("ul");return t.setAttribute("class","list pl0"),ri(t,["\n            ",arguments[0],"\n        "]),ri(e,["\n        ",arguments[2],"\n        ",t,"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e._id,i=e.name,o=e.description,a=(e.ownerDetails,e.updatedAt);return function(){var e=document.createElement("li");e.onclick=arguments[3],e.setAttribute("class","w-100 ba bw1 mt2 mb2 pa3-ns pa2 bg-washed-green dropshadow flex flex-column flex-row-ns justify-between-ns pointer");var t=document.createElement("div");t.setAttribute("class","w-75-ns w-100");var n=document.createElement("h2");n.setAttribute("class","pa0 ma0 f5 f4-ns"),ri(n,[arguments[0]]);var r=document.createElement("p");r.setAttribute("class","pa0 ma0 f7 f6-ns"),ri(r,[arguments[1]]),ri(t,["\n        ",n,"\n        ",r,"\n        "]);var i=document.createElement("div");i.setAttribute("class","w-25-ns w-100 tr");var o=document.createElement("small");return o.setAttribute("class","f8 ma0 pa0"),ri(o,[arguments[2]]),ri(i,["\n        ",o,"\n        "]),ri(e,["\n        ",t,"\n        ",i,"\n    "]),e}(i,o,Qi(a).format("MMMM Do YYYY, h:mm a"),function(e){n("pushState","/lists/"+r)})}(e,0,n)})}(n.data,0,t),$r.sectionmw7,function(){var e=document.createElement("div");e.setAttribute("class",arguments[0]+" flex flex-row justify-between pa2 bb bw1");var t=document.createElement("div"),n=document.createElement("p");n.setAttribute("class","ma0 pa0 f7"),ri(n,["Name"]),ri(t,["\n            ",n,"\n        "]);var r=document.createElement("div"),i=document.createElement("p");return i.setAttribute("class","ma0 pa0 f7"),ri(i,["Updated"]),ri(r,["\n            ",i,"\n        "]),ri(e,["\n        ",t,"\n        ",r,"\n    "]),e}($r.mw7))}(e,t);case"links":return function(e,t){var n=e.main.selected.user.links;return!Object.keys(n).length>0?"loading":function(){var e=document.createElement("section");e.setAttribute("class",arguments[1]+" pa2 bn bg-white mt3 mb5");var t=document.createElement("ul");return t.setAttribute("class","list pl0"),ri(t,["\n            ",arguments[0],"\n        "]),ri(e,["\n        ",arguments[2],"\n        ",t,"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e._id,i=e.name,o=e.description,a=(e.ownerDetails,e.updatedAt);return function(){var e=document.createElement("li");e.onclick=arguments[4],e.setAttribute("class","w-100 ba bw1 mt2 mb2 pa3-ns pa2 bg-washed-red dropshadow flex flex-column flex-row-ns justify-between-ns pointer");var t=document.createElement("div");t.setAttribute("class","w-75-ns w-100");var n=document.createElement("small");n.setAttribute("class","f8 ma0 pa0"),ri(n,[arguments[0]]);var r=document.createElement("h2");r.setAttribute("class","pa0 ma0 f4 f5-ns"),ri(r,[arguments[1]]);var i=document.createElement("p");i.setAttribute("class","pa0 ma0 f7 f6-ns"),ri(i,[arguments[2]]),ri(t,["\n        ",n,"\n        ",r,"\n        ",i,"\n        "]);var o=document.createElement("div");o.setAttribute("class","w-25-ns w-100 tr");var a=document.createElement("small");return a.setAttribute("class","f8 ma0 pa0"),ri(a,[arguments[3]]),ri(o,["\n        ",a,"\n        "]),ri(e,["\n        ",t,"\n        ",o,"\n    "]),e}(e.url,i,o,Qi(a).format("MMMM Do YYYY, h:mm a"),function(e){n("pushState","/links/"+r)})}(e,0,n)})}(n.data,0,t),$r.sectionmw7,function(){var e=document.createElement("div");e.setAttribute("class",arguments[0]+" flex flex-row justify-between pa2 bb bw1");var t=document.createElement("div"),n=document.createElement("p");n.setAttribute("class","ma0 pa0 f7"),ri(n,["Name"]),ri(t,["\n            ",n,"\n        "]);var r=document.createElement("div"),i=document.createElement("p");return i.setAttribute("class","ma0 pa0 f7"),ri(i,["Updated"]),ri(r,["\n            ",i,"\n        "]),ri(e,["\n        ",t,"\n        ",r,"\n    "]),e}($r.mw7))}(e,t);case"listsFollowing":return function(e,t){var n=e.main.selected.user.listsFollowing;return!Object.keys(n).length>0?"nothing to see here":function(){var e=document.createElement("section");e.setAttribute("class",arguments[1]+" pa2 bn bg-white mt3 mb5");var t=document.createElement("ul");return t.setAttribute("class","list pl0"),ri(t,["\n            ",arguments[0],"\n        "]),ri(e,["\n        ",arguments[2],"\n        ",t,"\n    "]),e}(function(e,t,n){return e.map(function(e){return function(e,t,n){var r=e._id,i=e.name,o=e.description,a=e.ownerDetails,s=e.updatedAt;return function(){var e=document.createElement("li");e.onclick=arguments[4],e.setAttribute("class","w-100 ba bw1 mt2 mb2 pa3-ns pa2 bg-lightest-blue dropshadow flex flex-column flex-row-ns justify-between-ns pointer");var t=document.createElement("div");t.setAttribute("class","w-75-ns w-100");var n=document.createElement("h2");n.setAttribute("class","pa0 ma0 f4 f5-ns"),ri(n,[arguments[0]]);var r=document.createElement("p");r.setAttribute("class","pa0 ma0 f7 f6-ns"),ri(r,["by ",arguments[1]]);var i=document.createElement("p");i.setAttribute("class","pa0 ma0 f7 f6-ns"),ri(i,[arguments[2]]),ri(t,["\n        ",n,"\n        ",r,"\n        ",i,"\n        "]);var o=document.createElement("div");o.setAttribute("class","w-25-ns w-100 tr");var a=document.createElement("small");return a.setAttribute("class","f8 ma0 pa0"),ri(a,[arguments[3]]),ri(o,["\n        ",a,"\n        "]),ri(e,["\n        ",t,"\n        ",o,"\n    "]),e}(i,a.username,o,Qi(s).format("MMMM Do YYYY, h:mm a"),function(e){n("pushState","/lists/"+r)})}(e,0,n)})}(n.data,0,t),$r.sectionmw7,function(){var e=document.createElement("div");e.setAttribute("class",arguments[0]+" flex flex-row justify-between pa2 bb bw1");var t=document.createElement("div"),n=document.createElement("p");n.setAttribute("class","ma0 pa0 f7"),ri(n,["Name"]),ri(t,["\n            ",n,"\n        "]);var r=document.createElement("div"),i=document.createElement("p");return i.setAttribute("class","ma0 pa0 f7"),ri(i,["Updated"]),ri(r,["\n            ",i,"\n        "]),ri(e,["\n        ",t,"\n        ",r,"\n    "]),e}($r.mw7))}(e,t);default:return""}}(e,t),function(){return t("USERS_SET_SELECTED",e.params.username)},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t),function(e,t){if(!0===e.modals.editProfileModal.displayed)return function(){var e=document.createElement("div");return e.setAttribute("style","background:rgba(232, 253, 245, 1)"),e.setAttribute("class",arguments[0]),ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n        "]),e}($r.modalContainer,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","flex flex-row items-center justify-between w-100");var t=document.createElement("h2");t.setAttribute("class","ma0 pa0 pl2"),ri(t,["Edit Profile"]);var n=document.createElement("button");return n.onclick=arguments[0],n.setAttribute("class","bn bg-navy pink bw2 pa2 h3 w3 f3 pointer"),ri(n,["\u2573"]),ri(e,["\n        ",t,"\n        ",n,"\n    "]),e}(function(){return t("EDITPROFILEMODAL_TOGGLE")})}(0,t),function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 h-100 bt bw1 b--black flex flex-row-ns flex-column overflow-y-scroll justify-center");var t=document.createElement("section");return t.setAttribute("class",arguments[0]),ri(t,["\n        ",arguments[1],"\n        "]),ri(e,["\n        ",t,"\n    "]),e}($r.sectionmw7,function(e,t){return function(){var e=document.createElement("form");return e.setAttribute("id","EditProfileModalForm"),e.onsubmit=arguments[0],ri(e,["\n            ",arguments[1],"\n            ",arguments[2],"\n            ",arguments[3],"\n        "]),e}(function(e,t){return function(e){e.preventDefault();var n=new FormData(e.currentTarget);t("EDITPROFILEMODAL_SUBMIT",n)}}(0,t),function(e,t){var n=e.main.selected.user.profile,r=n.emojis,i=n.selectedEmoji;return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Profile Avatar"]);var n=document.createElement("img");n.setAttribute("src","/assets/"+arguments[1]),n.setAttribute("class","w4 ba bw1 dropshadow");var r=document.createElement("br"),i=document.createElement("select");return i.setAttribute("name","selectedEmoji"),i.onchange=arguments[2],i.setAttribute("class","w4"),ri(i,["\n            ",arguments[3],"\n          "]),ri(e,["\n            ",t,"\n            ",n,"\n            ",r,"\n            ",i,"\n        "]),e}($r.legend,r[i],function(e){t("EDITPROFILEMODAL_UPDATE_EMOJI",e.target.value)},n.emojis.map(function(e,t){var r=e.split("-")[0].toLowerCase();return t==n.selectedEmoji?function(){var e=document.createElement("option");return e.setAttribute("value",arguments[0]),e.setAttribute("selected","selected"),ri(e,[arguments[1]]),e}(t,r):function(){var e=document.createElement("option");return e.setAttribute("value",arguments[0]),ri(e,[arguments[1]]),e}(t,r)}),$r.fieldset)}(e,t),function(e,t){return function(){var e=document.createElement("fieldset");e.setAttribute("class",arguments[4]);var t=document.createElement("legend");t.setAttribute("class",arguments[0]),ri(t,["Bio"]);var n=document.createElement("textarea");return n.onkeyup=arguments[1],n.setAttribute("name","bio"),n.setAttribute("type","text"),n.setAttribute("placeholder","short bio"),n.setAttribute("class",arguments[2]),ri(n,[arguments[3]]),ri(e,["\n            ",t,"\n            ",n,"\n        "]),e}($r.legend,function(e,t){return function(e){var n=e.target.value,r=e.target.name;t("modal_handle_keyup",{modalName:"editProfileModal",prop:r,val:n})}}(0,t),$r.modalInput,e.main.selected.user.profile.bio,$r.fieldset)}(e,t),function(){var e=document.createElement("div");e.setAttribute("class","w-100 mt4 flex flex-row justify-end");var t=document.createElement("input");return t.setAttribute("type","submit"),t.setAttribute("value","Submit"),t.setAttribute("class",arguments[0]),ri(e,["\n            ",t,"\n        "]),e}($r.submitButton))}(e,t))}(e,t))}(e,t))},ho=function(e,t){switch("nautilists - user"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - user"),e.route){case"users":return function(e,t){return"nautilists - users"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - users"),function(){var e=document.createElement("body");e.onload=arguments[3],e.setAttribute("class",arguments[4]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]),ri(t,["\n      ",arguments[1],"\n      ",arguments[2],"\n  "]),ri(e,["\n  ",arguments[5],"\n  ",t,"\n  ",arguments[6],"\n  ",arguments[7],"\n  ",arguments[8],"\n  ",arguments[9],"\n  ",arguments[10],"\n"]),e}($r.main,function(e,t){var n,r,i=e.main.users,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no users yet"]),o=r):o=Wi(i.data,0,t),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["New Contributors"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100 overflow-scroll-x"),ri(n,["\n        ",arguments[0],"\n      "]),ri(e,["\n      ",t,"\n      ",n,"\n    "]),e}(o)}(e,t),Vi("USERS_FIND_MORE",0,t),function(){return t("USERS_FIND")},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t))}(e,t);case"users/:username":return fo(e,t);default:return ri(n=document.createElement("body"),["nothing found"]),n}var n},mo=Ge();mo.use(B()),mo.use(Yr),mo.use(function(e,t){var n=function(){function n(e){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.db=e,console.log("initialized api:",e),this.find=this.find.bind(this),this.findMore=this.findMore.bind(this),this.get=this.get.bind(this),this.create=this.create.bind(this),this.patch=this.patch.bind(this),this.remove=this.remove.bind(this)}return Vr(n,[{key:"find",value:function(n){var r=this,i=n||{};e.api[this.db].find(i).then(function(n){return e.main[r.db]=n,t.emit("render"),n}).catch(function(e){alert(e)})}},{key:"findMore",value:function(n){var r=this,i={query:{$sort:{createdAt:-1},$limit:8,$skip:8+e.main[this.db].data.length-1}};e.api[this.db].find(i).then(function(n){return e.main[r.db].limit=n.limit,e.main[r.db].total=n.total,e.main[r.db].skip=n.skip,e.main[r.db].data=[].concat(Br(e.main[r.db].data),Br(n.data)),t.emit("render"),n}).catch(function(e){alert(e)})}},{key:"get",value:function(t){var n=this,r=t||{},i=e.api[this.db].get(r).then(function(t){return e.main.selected[n.db]=t,t}).catch(function(e){alert(e)});return Promise.resolve(i)}},{key:"create",value:function(t){var n=e.api[this.db].create(t).then(function(e){return alert("list created: "+e.name),e}).catch(function(e){alert(e)});return Promise.resolve(n)}},{key:"patch",value:function(t,n,r){var i=e.api[this.db].patch(t,n,r).then(function(e){return e}).catch(function(e){alert(e)});return Promise.resolve(i)}},{key:"remove",value:function(n){var r=e.api[this.db].remove(n).then(function(n){return t.emit("USERS_SET_SELECTED",e.user.username),t.emit("pushState","/users/"+e.user.username),n}).catch(function(e){alert(e)});return Promise.resolve(r)}}]),n}(),r=new n("lists"),i=new n("links"),o=new n("users");delete o.create,e.main={links:{data:[]},lists:{data:[]},users:{data:[]},selected:{links:{},lists:{},user:{profile:{},links:{},lists:{},listsFollowing:{},followers:{}}}},e.events.LINKS_FIND="LINKS_FIND",e.events.LINKS_FIND_MORE="LINKS_FIND_MORE",e.events.LINKS_GET="LINKS_GET",e.events.LINKS_REMOVE="LINKS_REMOVE",e.events.LINKS_PATCH="LINKS_PATCH",e.events.LISTS_FIND="LISTS_FIND",e.events.LISTS_FIND_MORE="LISTS_FIND_MORE",e.events.LISTS_GET="LISTS_GET",e.events.LISTS_REMOVE="LISTS_REMOVE",e.events.LISTS_PATCH="LISTS_PATCH",e.events.LISTS_CREATE="LISTS_CREATE",e.events.USERS_FIND="USERS_FIND",e.events.USERS_FIND_MORE="USERS_FIND_MORE",e.events.USERS_GET="USERS_GET",e.events.USERS_REMOVE="USERS_REMOVE",e.events.USERS_PATCH="USERS_PATCH",e.events.USERS_SET_SELECTED="USERS_SET_SELECTED",e.events.BROWSE_FIND="BROWSE_FIND",e.events.NAVSEARCH_FIND="NAVSEARCH_FIND",t.on("LISTS_FIND",r.find),t.on("LISTS_FIND_MORE",r.findMore),t.on("LISTS_GET",function(e){r.get(e).then(function(e){t.emit("LISTPAGE_CHECK_EDITABLE",e),t.emit("render")})}),t.on("LISTS_PATCH",function(n,i,o){r.patch(n,i,o).then(function(n){console.log("LISTS_PATCH - patching!",n.sections[0].links),e.main.selected.lists=n,t.emit("render")})}),t.on("LISTS_CREATE",function(e){r.create(e).then(function(e){t.emit("pushState","/lists/"+e._id)})}),t.on("LISTS_REMOVE",r.remove),t.on("LINKS_FIND",i.find),t.on("LINKS_FIND_MORE",i.findMore),t.on("LINKS_GET",i.get),t.on("USERS_FIND",o.find),t.on("USERS_FIND_MORE",o.findMore),t.on("USERS_GET",o.get),t.on("USERS_SET_SELECTED",function(n){var r=void 0,i=void 0;console.log("set - user selected!"),e.api.users.find({query:{username:n}}).then(function(t){return r=t.data[0]._id,e.main.selected.user.profile=t.data[0],i=function(e){return{query:{$sort:{createdAt:-1},$or:[{owner:e},{collaborator:{$in:[e]}}]}}}(r),e.api.lists.find(i)}).then(function(t){e.main.selected.user.lists=t;var n=function(e){return{query:{followers:{$in:[e]}}}}(r);return e.api.lists.find(n)}).then(function(t){e.main.selected.user.listsFollowing=t;var n=function(e){return{query:{following:{$in:[e]}}}}(r);return e.api.users.find(n)}).then(function(t){return e.main.selected.user.followers=t,e.api.links.find(i)}).then(function(n){e.main.selected.user.links=n,t.emit("render")}).catch(function(e){return console(e),e})}),t.on("BROWSE_FIND",function(){var e={query:{$sort:{createdAt:-1},$limit:16}};t.emit("LISTS_FIND",e),t.emit("LINKS_FIND",e),t.emit("USERS_FIND",e)}),t.on("NAVSEARCH_FIND",function(){var n=e.search.searchTerm,r={query:{$or:[{name:{$regex:n,$options:"i"}},{description:{$regex:n,$options:"i"}},{url:{$regex:n,$options:"i"}},{username:{$regex:n,$options:"i"}}]}};t.emit("LISTS_FIND",r),t.emit("LINKS_FIND",r),t.emit("USERS_FIND",r),t.emit("pushState","/search")})}),mo.use(function(e,t){var n=new(function(){function n(){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),console.log("initialized auth"),this.signup=this.signup.bind(this),this.checkLogin=this.checkLogin.bind(this),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.sendVerificationToken=this.sendVerificationToken.bind(this),this.sendResetPassword=this.sendResetPassword.bind(this),this.resetPassword=this.resetPassword.bind(this)}return zr(n,[{key:"signup",value:function(n){var r={username:n.get("username"),email:n.get("email"),password:n.get("password")};e.api.users.create(r).then(function(){alert("Sign up successful - you will receive an email from hello.nautilists@gmail.com to verify your account"),t.emit("pushState","/verifyRedirect")}).catch(function(e){return alert("Something went wrong!",e),error})}},{key:"checkLogin",value:function(n){console.log("checking if user is authd"),e.api.authenticate().then(function(n){e.user.username=n.username,e.user._id=n.id,e.user.authenticated=!0,t.emit("render")}).catch(function(t){return console.log("Sorry, you're not logged in!"),e.user.authenticated=!1,t})}},{key:"login",value:function(t){var n={username:t.get("username"),email:t.get("email"),password:t.get("password")},r=Object.assign({strategy:"local"},n);e.api.authenticate(r).then(function(t){e.user.authenticated=!0,e.user.username=t.username,e.user._id=t.id,alert("log in successful!"),window.location="/"}).catch(function(t){console.log("Authentication error",t),alert(t),e.user.authenticated=!1})}},{key:"logout",value:function(){e.api.logout(),e.user.username=null,e.user.authenticated=!1,e.user._id=null,t.emit("pushState","/")}},{key:"sendVerificationToken",value:function(){var t={action:"verifySignupLong",value:e.query.token};e.api.authmanagement.create(t).then(function(e){return alert("Hooray! You are verified. Go ahead and get started!"),e}).catch(function(e){return alert(e),e})}},{key:"sendResetPassword",value:function(n){var r={action:"sendResetPwd",value:{email:n.get("email")}};e.api.authmanagement.create(r).then(function(e){alert("Sending reset password url to your email inbox - please check your email"),t.emit("pushState","/verifyRedirect")}).catch(function(e){return e})}},{key:"resetPassword",value:function(n){var r={action:"resetPwdLong",value:{token:e.query.token,password:n.get("password")}};e.api.authmanagement.create(r).then(function(e){alert("password changed successful!"),t.emit("pushState","/login")}).catch(function(e){return alert(e),e})}}]),n}());e.user={authenticated:!1,_id:null,username:null,bio:null,selectedEmoji:null,isOwnerOrCollaborator:null},e.events.USER_SIGNUP="USER_SIGNUP",e.events.USER_LOGIN="USER_LOGIN",e.events.USER_LOGOUT="USER_LOGOUT",e.events.USER_RESETPASSWORD="USER_RESETPASSWORD",e.events.USER_SENDRESETPASSWORD="USER_SENDRESETPASSWORD",e.events.USER_SENDVERIFICATIONTOKEN="USER_SENDVERIFICATIONTOKEN",n.checkLogin(),t.on(e.events.USER_SIGNUP,n.signup),t.on(e.events.USER_LOGIN,n.login),t.on(e.events.USER_LOGOUT,n.logout),t.on(e.events.USER_RESETPASSWORD,n.resetPassword),t.on(e.events.USER_SENDRESETPASSWORD,n.sendResetPassword),t.on(e.events.USER_SENDVERIFICATIONTOKEN,n.sendVerificationToken)}),mo.use(function(e,t){e.userPage={selectedTab:"lists",editProfile:{displayed:!1}},e.events.USERPAGE_SET_TAB="USERPAGE_SET_TAB",e.events.USERPAGE_EDIT_PROFILE="USERPAGE_EDIT_PROFILE",t.on("DOMContentLoaded",function(){t.on("navigate",function(){"users/:username"===e.route&&t.emit("USERS_SET_SELECTED",e.params.username)})}),t.on("USERPAGE_SET_TAB",function(n){e.userPage.selectedTab=n,t.emit("render")}),t.on("USERPAGE_EDIT_PROFILE",function(){e.userPage.displayed=!e.userPage.displayed,t.emit("render")})}),mo.use(function(e,t){function n(n){return function(s){e.modals[n].displayed=!e.modals[n].displayed,i(),r(),o(),a(),t.emit("render")}}function r(){e.modals.addLinkModal.url="",e.modals.addLinkModal.name="",e.modals.addLinkModal.description="",e.modals.addLinkModal.tags=[],e.modals.addLinkModal.selectedList={},e.modals.addLinkModal.selectedSection={}}function i(){e.modals.addListModal.name="",e.modals.addListModal.description="",e.modals.addListModal.tags=[],e.modals.addListModal.links=[]}function o(){e.modals.addSectionModal.name="",e.modals.addSectionModal.description="",e.modals.addSectionModal.tags=[],e.modals.addSectionModal.links=[]}function a(){e.modals.addSectionLinksModal.name="",e.modals.addSectionLinksModal.url="",e.modals.addSectionLinksModal.description="",e.modals.addSectionLinksModal.tags=[],e.modals.addSectionLinksModal.links=[],e.modals.addSectionLinksModal.selectedSection={}}e.modals={nav:{displayed:!1},addFeatureBtnPopup:{displayed:!1},addLinkModal:{displayed:!1,url:"",name:"",description:"",tags:[],selectedList:{},selectedSection:{}},addListModal:{displayed:!1,name:"",description:"",tags:[],links:[]},editProfileModal:{displayed:!1,bio:""},editFeatureModal:{displayed:!1,_id:null,featureid:null,prop:null,url:"",name:"",description:"",tags:[]},addSectionModal:{displayed:!1,name:"",description:"",tags:"",links:[]},addSectionLinksModal:{displayed:!1,url:"",name:"",description:"",tags:[],links:[],selectedList:{},selectedSection:{}},addCollaboratorModal:{displayed:!1,searchTerm:"",searchResults:[]}},e.events.NAVMODAL_TOGGLE="NAVMODAL_TOGGLE",e.events.NAVMODAL_CLOSE="NAVMODAL_CLOSE",e.events.ADDFEATUREBTNPOPUP_TOGGLE="ADDFEATUREBTNPOPUP_TOGGLE",e.events.ADDLISTMODAL_TOGGLE="ADDLISTMODAL_TOGGLE",e.events.ADDLISTMODAL_LINKSELECT_TOGGLE="ADDLISTMODAL_LINKSELECT_TOGGLE",e.events.ADDLISTMODAL_SUBMIT="ADDLISTMODAL_SUBMIT",e.events.ADDLINKMODAL_TOGGLE="ADDLINKMODAL_TOGGLE",e.events.ADDLINKMODAL_LISTSELECT_TOGGLE="ADDLINKMODAL_LISTSELECT_TOGGLE",e.events.ADDLINKMODAL_SECTIONSELECT_TOGGLE="ADDLINKMODAL_SECTIONSELECT_TOGGLE",e.events.ADDLINKMODAL_SUBMIT="ADDLINKMODAL_SUBMIT",e.events.EDITPROFILEMODAL_TOGGLE="EDITPROFILEMODAL_TOGGLE",e.events.EDITPROFILEMODAL_SUBMIT="EDITPROFILEMODAL_SUBMIT",e.events.modal_handle_keyup="modal_handle_keyup",e.events.EDITFEATUREMODAL_TOGGLE="EDITFEATUREMODAL_TOGGLE",e.events.EDITFEATUREMODAL_SET_VALUES="EDITFEATUREMODAL_SET_VALUES",e.events.EDITFEATUREMODAL_SUBMIT="EDITFEATUREMODAL_SUBMIT",e.events.ADDSECTIONMODAL_TOGGLE="ADDSECTIONMODAL_TOGGLE",e.events.ADDSECTIONMODAL_LINKSELECT_TOGGLE="ADDSECTIONMODAL_LINKSELECT_TOGGLE",e.events.ADDSECTIONMODAL_SUBMIT="ADDSECTIONMODAL_SUBMIT",e.events.ADDSECTIONLINKSMODAL_TOGGLE="ADDSECTIONLINKSMODAL_TOGGLE",e.events.ADDSECTIONLINKSMODAL_SECTIONSELECT_TOGGLE="ADDSECTIONLINKSMODAL_SECTIONSELECT_TOGGLE",e.events.ADDSECTIONLINKSMODAL_SUBMIT="ADDSECTIONLINKSMODAL_SUBMIT",e.events.ADDCOLLABORATORMODAL_TOGGLE="ADDCOLLABORATORMODAL_TOGGLE",t.on("NAVMODAL_TOGGLE",n("nav")),t.on("NAVMODAL_CLOSE",function(n){e.modals.nav.displayed=!1,i(),r(),o(),a(),t.emit("render")}),t.on("ADDFEATUREBTNPOPUP_TOGGLE",n("addFeatureBtnPopup")),t.on("ADDLISTMODAL_TOGGLE",n("addListModal")),t.on("ADDLISTMODAL_LINKSELECT_TOGGLE",function(n){!0===e.modals.addListModal.links.includes(n)?e.modals.addListModal.links=e.modals.addListModal.links.filter(function(e){return e!==n}):e.modals.addListModal.links.push(n),t.emit("render")}),t.on("ADDLISTMODAL_SUBMIT",function(r){var o={name:r.get("name"),description:r.get("description"),tags:r.get("tags").split(","),sections:{name:"",description:"",links:e.modals.addListModal.links}};e.api.lists.create(o).then(function(e){alert("new list created: "+e.name),n("addListModal").call(),n("addFeatureBtnPopup").call(),i(),t.emit("pushState","/lists/"+e._id)}).catch(function(e){alert(e)})}),t.on("ADDLINKMODAL_TOGGLE",n("addLinkModal")),t.on("ADDLINKMODAL_LISTSELECT_TOGGLE",function(n){Object.keys(e.modals.addLinkModal.selectedList).length>0&&e.modals.addLinkModal.selectedList._id==n?e.modals.addLinkModal.selectedList={}:e.modals.addLinkModal.selectedList=e.main.lists.data.find(function(e){return e._id===n}),t.emit("render")}),t.on("ADDLINKMODAL_SECTIONSELECT_TOGGLE",function(n){Object.keys(e.modals.addLinkModal.selectedSection).length>0&&e.modals.addLinkModal.selectedSection._id==n?e.modals.addLinkModal.selectedSection={}:e.modals.addLinkModal.selectedSection=e.modals.addLinkModal.selectedList.sections.find(function(e){return e._id===n}),t.emit("render")}),t.on("ADDLINKMODAL_SUBMIT",function(i){var o={url:i.get("url"),name:i.get("name"),description:i.get("description"),tags:i.get("tags").split(",")},a=e.modals.addLinkModal,s=a.selectedList,u=a.selectedSection;Object.keys(s).length>0&&Object.keys(u).length>0?e.api.links.create(o).then(function(t){alert("new link created: "+t.name);var n={query:{"sections._id":u._id}},r={$push:{"sections.$.links":t._id}};return e.api.lists.patch(s._id,r,n)}).then(function(e){n("addLinkModal").call(),n("addFeatureBtnPopup").call(),r(),t.emit("pushState","/lists/"+e._id)}).catch(function(e){alert(e)}):e.api.links.create(o).then(function(e){alert("new link created: "+e.name),n("addLinkModal").call(),n("addFeatureBtnPopup").call(),r(),t.emit("LINKS_FIND")}).catch(function(e){alert(e)})}),t.on("EDITFEATUREMODAL_SET_VALUES",function(t){var n=t.name,r=t.url,i=t.description,o=t.prop,a=t.tags,s=t._id,u=t.featureid;switch(e.modals.editFeatureModal.prop=o,e.modals.editFeatureModal._id=s,e.modals.editFeatureModal.featureid=u,o){case"sections":e.modals.editFeatureModal.name=n,e.modals.editFeatureModal.description=i,e.modals.editFeatureModal.tags=a.join();break;case"links":e.modals.editFeatureModal.name=n,e.modals.editFeatureModal.url=r,e.modals.editFeatureModal.description=i,e.modals.editFeatureModal.tags=a.join()}}),t.on("EDITFEATUREMODAL_TOGGLE",n("editFeatureModal")),t.on("EDITFEATUREMODAL_SUBMIT",function(){var n=e.modals.editFeatureModal,r=n.prop,i=n.url,o=n.name,a=n.description,s=n.tags,u=(n._id,n.featureid),c={url:i,name:o,description:a,tags:s.split(",")};if("links"!==r&&delete c.url,"links"===r&&e.api.links.patch(u,c,{}).then(function(n){t.emit("pushState","/lists/"+e.main.selected.lists._id),t.emit("EDITFEATUREMODAL_TOGGLE")}).catch(function(e){alert(e)}),"sections"===r){var l={query:{"sections._id":u}},d={$set:{"sections.$.name":o,"sections.$.description":a,"sections.$.tags":s.split(",")}};e.api.lists.patch(e.params._id,d,l).then(function(n){e.main.selected.lists=n,t.emit("EDITFEATUREMODAL_TOGGLE")}).catch(function(e){alert(e)})}}),t.on("ADDSECTIONMODAL_TOGGLE",n("addSectionModal")),t.on("ADDSECTIONMODAL_LINKSELECT_TOGGLE",function(n){!0===e.modals.addSectionModal.links.includes(n)?e.modals.addSectionModal.links=e.modals.addSectionModal.links.filter(function(e){return e!==n}):e.modals.addSectionModal.links.push(n),t.emit("render")}),t.on("ADDSECTIONMODAL_SUBMIT",function(){var n=e.modals.addSectionModal,r=n.name,i=n.description,o=n.tags,a=n.links,s={$push:{sections:{name:r,description:i,tags:"object"===(void 0===o?"undefined":qr(o))?o.join():o.split(","),links:a}}};e.api.lists.patch(e.params._id,s,{}).then(function(n){e.main.selected.lists=n,t.emit("ADDSECTIONMODAL_TOGGLE")}).catch(function(e){alert(e)})}),t.on("ADDSECTIONLINKSMODAL_TOGGLE",n("addSectionLinksModal")),t.on("ADDSECTIONLINKSMODAL_LISTSELECT_SET",function(){e.modals.addSectionLinksModal.selectedList=e.main.selected.lists}),t.on("ADDSECTIONLINKSMODAL_LINKSELECT_TOGGLE",function(n){!0===e.modals.addSectionLinksModal.links.includes(n)?e.modals.addSectionLinksModal.links=e.modals.addSectionLinksModal.links.filter(function(e){return e!==n}):e.modals.addSectionLinksModal.links.push(n),t.emit("render")}),t.on("ADDSECTIONLINKSMODAL_SECTIONSELECT_TOGGLE",function(n){Object.keys(e.modals.addSectionLinksModal.selectedSection).length>0&&e.modals.addSectionLinksModal.selectedSection._id==n?e.modals.addSectionLinksModal.selectedSection={}:e.modals.addSectionLinksModal.selectedSection=e.modals.addSectionLinksModal.selectedList.sections.find(function(e){return e._id===n}),t.emit("render")}),t.on("ADDSECTIONLINKSMODAL_SUBMIT",function(){var n=e.modals.addSectionLinksModal,r=n.name,i=n.url,o=n.description,a=n.tags,s=n.links,u=n.selectedList,c=n.selectedSection,l="object"===(void 0===a?"undefined":qr(a))?a.join():a.split(",");if(!s.length>0&&!i.length>0)return alert("you must select some links or add a valid url"),!1;if(s.length>0&&!i.length>0){var d={query:{"sections._id":c._id}},f={$set:{"sections.$.links":[].concat(Kr(c.links),Kr(s))}};e.api.lists.patch(u._id,f,d).then(function(n){e.main.selected.lists=n,t.emit("ADDSECTIONLINKSMODAL_TOGGLE")})}else{var h={name:r,url:i,description:o,tags:l};e.api.links.create(h).then(function(t){var n=[].concat(Kr(s),[t._id]),r={query:{"sections._id":c._id}},i={$set:{"sections.$.links":[].concat(Kr(c.links),Kr(n))}};return e.api.lists.patch(u._id,i,r)}).then(function(n){e.main.selected.lists=n,t.emit("ADDSECTIONLINKSMODAL_TOGGLE")})}}),t.on("ADDCOLLABORATORMODAL_TOGGLE",n("addCollaboratorModal")),t.on("EDITPROFILEMODAL_TOGGLE",n("editProfileModal")),t.on("EDITPROFILEMODAL_UPDATE_EMOJI",function(n){var r=e.user,i=r._id,o=r.username;e.api.users.patch(i,{selectedEmoji:n}).then(function(e){t.emit("USERS_SET_SELECTED",o)}).catch(function(e){alert(e)})}),t.on("EDITPROFILEMODAL_SUBMIT",function(){var n=e.user,r=n._id,i=n.username,o=e.modals.editProfileModal.bio;e.api.users.patch(r,{bio:o}).then(function(e){t.emit("USERS_SET_SELECTED",i),t.emit("EDITPROFILEMODAL_TOGGLE")}).catch(function(e){alert(e)})}),t.on("modal_handle_keyup",function(t){var n=t.modalName,r=t.prop,i=t.val;e.modals[n][r]=i})}),mo.use(function(e,t){e.listPage={editable:!1,canEdit:!1,sortable:null,sortables:[],name:null,description:null},e.events.LISTPAGE_TOGGLE_EDITABLE="LISTPAGE_TOGGLE_EDITABLE",e.events.LISTPAGE_REMIX="LISTPAGE_REMIX",e.events.LISTPAGE_DISPLAY_FOLLOWERS="LISTPAGE_DISPLAY_FOLLOWERS",e.events.LISTPAGE_FOLLOW="LISTPAGE_FOLLOW",e.events.LISTPAGE_FOLLOW="LISTPAGE_UNFOLLOW",e.events.LISTPAGE_ADD_COLLABORATOR="LISTPAGE_ADD_COLLABORATOR",e.events.LISTPAGE_REMOVE_LINK="LISTPAGE_REMOVE_LINK",e.events.LISTPAGE_REMOVE_SECTION="LISTPAGE_REMOVE_SECTION",e.events.LISTPAGE_REMOVE_LIST="LISTPAGE_REMOVE_LIST",e.events.LISTPAGE_CHECK_EDITABLE="LISTPAGE_CHECK_EDITABLE",e.events.listPage_handle_keyup="listPage_handle_keyup",t.on("LISTPAGE_TOGGLE_EDITABLE",function(){e.user;var n=e.params._id;if(!0===e.listPage.canEdit){if(!0===e.listPage.editable){var r={name:e.listPage.name,description:e.listPage.description};t.emit("LISTS_PATCH",n,r,{}),t.emit("pushState","/lists/"+n)}e.listPage.editable=!e.listPage.editable,t.emit("render")}else alert("Sorry! You are not an owner or collaborator of this list.")}),t.on("LISTPAGE_CHECK_EDITABLE",function(t){var n=e.user,r=n.authenticated,i=n.username,o=t.ownerDetails;!0===r&&i===o.username?e.listPage.canEdit=!0:e.listPage.canEdit=!1}),t.on("LISTPAGE_FOLLOW",function(){var n=e.user,r=e.params._id;if(!n.authenticated)return alert("You must be logged in to follow a list"),!1;var i={$push:{followers:n._id}};t.emit("LISTS_PATCH",r,i,{}),t.emit("render")}),t.on("LISTPAGE_UNFOLLOW",function(){var n=e.user,r=e.params._id;if(!n.authenticated)return alert("You must be logged in to unfollow a list"),!1;var i={$pull:{followers:n._id}};t.emit("LISTS_PATCH",r,i,{}),t.emit("render")}),t.on("LISTPAGE_REMIX",function(){var n=e.user,r=(e.params._id,e.main.selected.lists);if(!n.authenticated)return alert("You must be logged in to follow a list"),!1;var i=Wr(r);i.followers=[],t.emit("LISTS_CREATE",i)}),t.on("LISTPAGE_REMOVE_LIST",function(){if(!e.user.authenticated)return alert("You must be logged in to follow a list"),!1;var n=e.params._id;return!0===confirm("Are you sure you want to delete this forever?")&&t.emit("LISTS_REMOVE",n),!1}),t.on("listPage_handle_keyup",function(t){var n=t.prop,r=t.val;e.listPage[n]=r}),t.on("navigate",function(){"lists/:_id"===e.route&&t.emit("LISTS_GET",e.params._id)})}),mo.use(function(e,t){e.search={searchTerm:""},t.on("DOMContentLoaded",function(){t.on("searchTerm_update",function(t){e.search.searchTerm=t})})}),mo.route("/",function(e,t){return"nautilists - home"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - home"),function(){var e=document.createElement("body");e.setAttribute("class",arguments[2]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]),ri(t,["\n      ",arguments[1],"\n  "]),ri(e,["\n  ",arguments[3],"\n  ",t,"\n  ",arguments[4],"\n  ",arguments[5],"\n"]),e}($r.main,function(e,t){return function(){var e=document.createElement("header");e.setAttribute("class","vh-100 bg-light-pink dt w-100 bg-washed-red");var t=document.createElement("div");return t.setAttribute("class","dtc v-mid cover ph3 ph4-m ph5-l"),ri(t,["\n      ",arguments[0],"\n    "]),ri(e,["\n      ",t,"\n  "]),e}(function(e,t){return function(){var e=document.createElement("div");e.setAttribute("class","w-100 flex flex-row-ns flex-column items-center");var t=document.createElement("section");t.setAttribute("class","w-50-ns w-100 flex flex-column h-100 justify-center pa3 pr4 pb5 pb0-ns");var n=document.createElement("h2");n.setAttribute("class","tl-ns tc b f2-ns f4 ma0 f-subheadline-l measure lh-title");var r=document.createElement("span");r.setAttribute("class","f2-ns ma0 pa0"),ri(r,["Welcome to "]);var i=document.createElement("br"),o=document.createElement("span");o.setAttribute("class","dark-pink"),ri(o,["Nautilists"]),ri(n,[r,i,o]);var a=document.createElement("h3");a.setAttribute("class","tl-ns tc f3-ns f5 mt1"),ri(a,["Pick-and-mix lists for all occasions"]);var s=document.createElement("p");s.setAttribute("class","f6"),ri(s,["Nautilists are easy, pick-and-pix lists. In an effort to support open education, nautilists makes it easy to curate and share lists that inspire creativity and learning."]);var u=document.createElement("div");u.setAttribute("class","w-100 mt4 flex flex-row justify-start-ns justify-center");var c=document.createElement("h2");c.setAttribute("class","ma0");var l=document.createElement("button");l.onclick=arguments[0],l.setAttribute("class","black bn bg-transparent underline"),ri(l,["Get Started"]),ri(c,["\u2192 ",l]);var d=document.createElement("img");d.setAttribute("src","/assets/2728.png"),d.setAttribute("class","pl2 h2"),ri(u,["\n        ",c,"\n        ",d,"\n      "]),ri(t,["\n      ",n,"\n      ",a,"\n      ",s,"\n      ",u,"\n    "]);var f=document.createElement("section");f.setAttribute("class","dropshadow bg-white bn h-100 pa3-ns pt3 pb3 w-50-ns w-100 flex flex-row-ns flex-column ba-ns bw1-ns dropshadow-ns b--dark-pink ml3-ns");var h=document.createElement("div");h.setAttribute("class","justify-between w-third-ns w-100 h-100 tc flex flex-column items-center");var m=document.createElement("h4");m.setAttribute("class","ma0"),ri(m,["Add links"]);var p=document.createElement("img");p.setAttribute("src","/assets/1F517.png"),p.setAttribute("class","h3 w3");var v=document.createElement("p");v.setAttribute("class","f6 ma0 pa2 tl"),ri(v,["Add your favorite links from across the web."]),ri(h,["\n        ",m,"\n        ",p,"\n        ",v,"\n      "]);var b=document.createElement("div");b.setAttribute("class","justify-between w-third-ns w-100 h-100 tc flex flex-column items-center");var y=document.createElement("h4");y.setAttribute("class","ma0"),ri(y,["Mix 'em up"]);var g=document.createElement("img");g.setAttribute("src","/assets/1F4A5.png"),g.setAttribute("class","h3 w3");var w=document.createElement("p");w.setAttribute("class","f6 ma0 pa2 tl"),ri(w,["Pick-and-mix links and lists for all to see."]),ri(b,["\n        ",y,"\n        ",g,"\n        ",w,"\n      "]);var E=document.createElement("div");E.setAttribute("class","justify-between w-third-ns w-100 h-100 tc flex flex-column items-center");var A=document.createElement("h4");A.setAttribute("class","ma0"),ri(A,["Collaborate"]);var _=document.createElement("img");_.setAttribute("src","/assets/1F3D3.png"),_.setAttribute("class","h3 w3");var S=document.createElement("p");return S.setAttribute("class","f6 ma0 pa2 tl"),ri(S,["Build with buddies on collaborative lists."]),ri(E,["\n        ",A,"\n        ",_,"\n        ",S,"\n      "]),ri(f,["\n      ",h,"\n      ",b,"\n      ",E,"\n    "]),ri(e,["\n    ",t,"\n    ",f,"\n  "]),e}(function(e){t("BROWSE_FIND"),t("pushState","/browse")})}(0,t))}(0,t),$r.body,di(e,t),oi(),ci(e,t))}),mo.route("/login",vi),mo.route("/verify",vi),mo.route("/verifyRedirect",vi),mo.route("/reset",vi),mo.route("/signup",vi),mo.route("/browse",function(e,t){return"nautilists - browse"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - browse"),function(){var e=document.createElement("body");e.onload=arguments[5],e.setAttribute("class",arguments[6]);var t=document.createElement("main");return t.setAttribute("class",arguments[0]),ri(t,["\n      ",arguments[1],"\n      ",arguments[2],"\n      ",arguments[3],"\n      ",arguments[4],"\n  "]),ri(e,["\n  ",arguments[7],"\n  ",t,"\n  ",arguments[8],"\n  ",arguments[9],"\n  ",arguments[10],"\n  ",arguments[11],"\n  ",arguments[12],"\n"]),e}($r.main,function(){var e=document.createElement("section");e.setAttribute("class","w-100 pa4 flex flex-column items-center");var t=document.createElement("h2");t.setAttribute("class","w-100 tc f2 lh-title"),ri(t,["Browse Categories"]);var n=document.createElement("div");n.setAttribute("class","w-100 flex flex-row-ns flex-column items-start justify-start tc");var r=document.createComment(" links "),i=document.createElement("div");i.setAttribute("class","w-third-ns w-100 flex flex-column justify-start");var o=document.createElement("a");o.setAttribute("href","/links"),o.setAttribute("class","link black w-100");var a=document.createElement("img");a.setAttribute("style","max-width:60%"),a.setAttribute("src","/assets/1F517.png"),a.setAttribute("class","h4-ns h3"),ri(o,["\n            ",a,"  \n            "]);var s=document.createElement("h3");s.setAttribute("class","f2 lh-title"),ri(s,["links"]);var u=document.createElement("p");u.setAttribute("class","pa2"),ri(u,["Links are the heart of nautilist projects. Add 'em in and organize them into lists."]),ri(i,["\n          ",o,"\n          ",s,"\n          ",u,"\n        "]);var c=document.createComment(" lists "),l=document.createElement("div");l.setAttribute("class","w-third-ns w-100 flex flex-column justify-start");var d=document.createElement("a");d.setAttribute("href","/lists"),d.setAttribute("class","link black w-100");var f=document.createElement("img");f.setAttribute("style","max-width:60%"),f.setAttribute("src","/assets/1F490.png"),f.setAttribute("class","h4-ns h3"),ri(d,["\n            ",f,"  \n          "]);var h=document.createElement("h3");h.setAttribute("class","f2 lh-title"),ri(h,["lists"]);var m=document.createElement("p");m.setAttribute("class","pa2"),ri(m,["Lists are the home for your wonderful links. These have been created, curated, and saved to Nautilist for you to reuse and remix."]),ri(l,["\n          ",d,"\n          ",h,"\n          ",m,"\n        "]);var p=document.createComment(" collections "),v=document.createElement("div");v.setAttribute("class","w-25-ns w-100 dn");var b=document.createElement("a");b.setAttribute("href","/collections"),b.setAttribute("class","link black w-100");var y=document.createElement("img");y.setAttribute("style","max-width:60%"),y.setAttribute("src","/assets/1F490.png"),y.setAttribute("class","h4-ns h3"),ri(b,["\n          ",y," \n          "]);var g=document.createElement("h3");g.setAttribute("class","f2 lh-title"),ri(g,["Collections"]);var w=document.createElement("p");w.setAttribute("class","pa2"),ri(w,["Collections are groups of projects. Collections may contain similar themed projects such as for a class or larger project."]),ri(v,["\n          ",b,"\n          ",g,"\n          ",w,"\n        "]);var E=document.createComment(" users "),A=document.createElement("div");A.setAttribute("class","w-third-ns w-100 flex flex-column justify-start");var _=document.createElement("a");_.setAttribute("href","/users"),_.setAttribute("class","link black w-100");var S=document.createElement("img");S.setAttribute("style","max-width:60%"),S.setAttribute("src","/assets/1F984.png"),S.setAttribute("class","h4-ns h3");var k=document.createElement("h3");k.setAttribute("class","f2 lh-title"),ri(k,["users"]),ri(_,["\n          ",S,"\n          ",k,"\n          "]);var O=document.createElement("p");O.setAttribute("class","pa2"),ri(O,["Oh and what would we be without our wonderful users? Go checkout their projects and collections for inspiration or to collaborate!"]),ri(A,["\n          ",_,"\n          ",O,"\n        "]),ri(n,["\n        \n        ",r,"\n        ",i,"  \n  \n        ",c,"\n        ",l,"\n  \n        ",p,"\n        ",v,"\n  \n        ",E,"\n        ",A,"\n      "]);var T=document.createElement("p");return T.setAttribute("class","i dn"),ri(T,[" Organizing lists into tracks and collections coming soon! "]),ri(e,["\n      ",t,"\n      ",n,"\n  \n      ",T,"\n    "]),e}(),function(e,t){var n,r,i=e.main.lists,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no lists yet"]),o=r):o=Hi(i.data),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Recent Lists"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),ri(n,["\n    ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e),function(e,t){var n,r,i=e.main.links,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no links yet"]),o=r):o=Ui(i.data),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Recent Links"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),ri(n,["\n    ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e),function(e,t){var n,r,i=e.main.users,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no users yet"]),o=r):o=Wi(i.data,0,t),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["New Contributors"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100 overflow-scroll-x"),ri(n,["\n      ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e,t),function(){return t("BROWSE_FIND")},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t))}),mo.route("/search",function(e,t){return"nautilists - search"!==e.title&&t(e.events.DOMTITLECHANGE,"nautilists - search"),function(){var e=document.createElement("body");e.onload=arguments[5],e.setAttribute("class",arguments[6]);var t=document.createElement("main");t.setAttribute("class",arguments[1]);var n=document.createElement("section");n.setAttribute("class","w-100 mt4");var r=document.createElement("h2");return r.setAttribute("class","f3 tc lh-title"),ri(r,["Search results for: ",arguments[0]]),ri(n,["\n    ",r,"\n    "]),ri(t,["\n  ",n,"\n      ",arguments[2],"\n      ",arguments[3],"\n      ",arguments[4],"\n  "]),ri(e,["\n  ",arguments[7],"\n  ",t,"\n  ",arguments[8],"\n  ",arguments[9],"\n  ",arguments[10],"\n  ",arguments[11],"\n  ",arguments[12],"\n"]),e}(e.search.searchTerm,$r.main,function(e,t){var n,r,i=e.main.lists,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no lists yet"]),o=r):o=Hi(i.data),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Lists"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),ri(n,["\n    ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e),function(e,t){var n,r,i=e.main.links,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no links yet"]),o=r):o=Ui(i.data),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Links"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100"),ri(n,["\n    ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e),function(e,t){var n,r,i=e.main.users,o=void 0;return i.data.length<=0?(n=ri,(r=document.createElement("p")).setAttribute("class","w-100 tc"),n(r,["no users yet"]),o=r):o=Wi(i.data,0,t),function(){var e=document.createElement("section");e.setAttribute("class","w-100 mt4");var t=document.createElement("h2");t.setAttribute("class","f3 tc lh-title"),ri(t,["Contributors"]);var n=document.createElement("div");return n.setAttribute("class","mw9 center ph3-ns h-100 overflow-scroll-x"),ri(n,["\n      ",arguments[0],"\n    "]),ri(e,["\n    ",t,"\n    ",n,"\n  "]),e}(o)}(e,t),function(){return t("NAVSEARCH_FIND","p5")},$r.body,di(e,t),oi(),ci(e,t),e.cache(Pi,"AddFeatureBtn",e,t).render(),Ri(e,t),Yi(e,t))}),mo.route("/users",ho),mo.route("/users/:username",ho),mo.route("/links",Bi),mo.route("/links/:_id",Bi),mo.route("/lists",lo),mo.route("/lists/:_id",lo),mo.route("/*",function(e,t){return e.title!==ii&&t(e.events.DOMTITLECHANGE,ii),function(){var e=document.createElement("body");e.setAttribute("class","sans-serif pa3");var t=document.createElement("h1");ri(t,["Route not found."]);var n=document.createElement("a");return n.setAttribute("href","/"),n.setAttribute("class","pt2"),ri(n,["Back to main."]),ri(e,["\n      ",t,"\n      ",n,"\n    "]),e}()}),"undefined"!=typeof window&&document.body.appendChild(mo.start())}();
//# sourceMappingURL=bundle.js.map